# 2.5D 素材规范（桌面端轻交互）

## 目标
- 构建纯 SVG + CSS 的 2.5D 分层视图素材库，支持同步层级数据流动与轻交互窗口（Popover/Dock）。
- 素材具备统一视角、厚度与光影规范，便于工程实现动态效果与主题切换。

## 素材清单
- 平台与层级
  - 每层平台三面：顶面、侧面、阴影（独立 SVG），可选 PNG 阴影贴图。
  - 层间桥梁：直线桥、斜角桥两种，桥面含“数据轨道”装饰。
- 节点卡片
  - 2.5D 卡片三面：顶面（含标题区）、侧面、底部阴影；角标与选中辉光为独立切片。
  - 形态：标准（中）、小型（密集）、强调（高亮）三套。
- 连接与路径
  - 箭头 `marker`：实心、空心、高亮三款。
  - 路径装饰：渐变轨、虚线轨；分叉与汇聚节点标识。
- 轻交互窗口
  - Popover 皮肤：浅色/深色双主题；标题、摘要、2–3 指标位。
  - Dock 小窗：内容区、指示箭头、边框/投影；含“更多”按钮位。
- 背景与纹理
  - 低对比度网格/噪点纹理，light/dark 双套。
  - 环境光装饰条（可选）。
- 图标与状态
  - 指标/状态图标：吞吐、延迟、成功率、告警、离线、维护。
  - 状态徽章底板：绿/黄/红/灰，含 2.5D 高光。
- 品牌与字体
  - 品牌色板与中性色板、强调色；项目 Logo（SVG）。
  - 字体与字重规范，标题/正文字号对照。

## 视角与厚度规范
- 视角：伪等距 30° 系列（水平轴 30°/150°），所有分面遵循统一方向。
- 厚度系数
  - 平台厚度≈顶面边长的 6–8%。
  - 卡片厚度≈顶面边长的 4–6%。

## 尺寸与切片规范
- 平台基准：`viewBox 1200×300`，三面分组清晰（顶面/侧面/阴影）。
- 卡片基准
  - 标准：顶面 `240×140`，角半径 `8–12px`。
  - 小型：顶面 `160×96`；强调版加外发光切片。
- 桥梁：长度随层距可变，提供直线与斜角两套。

## 颜色与梯度规范
- 色板
  - primary、secondary、accent、neutral、success、warn、danger。
- 渐变对比
  - 顶面 `linearGradient` 明暗比 8–12%。
  - 侧面明暗比 15–22%。
  - 高亮轨道渐变对比 25–35%。

## 阴影与高光规范
- 投影
  - 平台阴影：`y 8–12px`、模糊 `12–18px`。
  - 卡片阴影：`y 6–8px`、模糊 `10–14px`。
- 高光描边
  - 选中态外发光半径 `6–10px`，透明度 `20–28%`。

## 线条与箭头规范
- 线宽
  - 主路径 `2.5–3px`，次路径 `1.5–2px`。
- 虚线参数
  - 主路径 `stroke-dasharray: 8 4`。
  - 次路径 `stroke-dasharray: 6 6`。
- 箭头尺寸≈线宽×3，分别提供实心、空心、高亮三款。

## 导出与结构规范
- 格式：优先 SVG，阴影纹理可备 PNG；所有素材保留 `viewBox`。
- 结构：分面分组 `<g>` 清晰；命名规范便于脚本控制；尽量保留 `stroke` 而非转轮廓。
- 主题：提供 light/dark 双主题素材；色板与渐变停靠点遵循统一规范。

## 文件组织与命名
- 目录结构
  - `assets/2_5d/layers/`：`layer-{index}-{light|dark}.svg`
  - `assets/2_5d/nodes/`：`node-{size}-{state}-{light|dark}.svg`
  - `assets/2_5d/bridges/`：`bridge-{type}-{light|dark}.svg`
  - `assets/2_5d/paths/markers/`：箭头 `marker` 集合
  - `assets/2_5d/paths/decor/`：轨道渐变、虚线模板
  - `assets/ui/popover/`、`assets/ui/dock/`
  - `assets/brand/`：`logo.svg`、`palette.json`
  - `assets/bg/`：`grid-{light|dark}.svg`、`noise-{light|dark}.png`
- 命名示例
  - `node-standard-active-light.svg`
  - `marker-arrow-solid.svg`
  - `layer-2-dark.svg`

## 文案与数据字段
- 文案字段
  - 标题（≤16 字）、一句简介（≤32 字）。
  - 指标：吞吐量、延迟、成功率，单位明确（如 `req/s`、`ms`、`%`）。
  - 状态：正常、告警、离线、维护，与颜色映射一致。
- 指标样例
  - 吞吐：`1.2k req/s`；延迟：`85 ms P95`；成功率：`99.97%`。
- 状态颜色映射
  - `success→绿`、`warn→黄`、`danger→红`、`offline→灰`。

## 动效参考素材（可选）
- 渐变轨道静帧若干，用于开发对齐视觉。
- 箭头微闪与呼吸效果的 2–3 帧参考。
- 视差倾斜参考图，标注最大倾斜角 `±3°` 与层级权重。

## 验收与交付
- 所有 SVG 带 `viewBox`，分面分组清晰，颜色引用统一（`palette.json`）。
- 提供 light/dark 两套主题素材与对比度满足 WCAG（≥4.5:1）。
- 素材尺寸、角半径、线宽、渐变停靠点与阴影参数有文档说明。
- 预览稿：合成大图与局部放大图，检查 2.5D 光影一致与层级清晰。

## 色板模板（palette.json 示例）

```json
{
  "light": {
    "primary": "#3B82F6",
    "secondary": "#6366F1",
    "accent": "#22D3EE",
    "neutral": "#64748B",
    "success": "#22C55E",
    "warn": "#F59E0B",
    "danger": "#EF4444",
    "bg": "#0B1220",
    "surface": "#0F172A"
  },
  "dark": {
    "primary": "#60A5FA",
    "secondary": "#818CF8",
    "accent": "#38BDF8",
    "neutral": "#94A3B8",
    "success": "#34D399",
    "warn": "#FBBF24",
    "danger": "#F87171",
    "bg": "#0A0F1E",
    "surface": "#0D1428"
  }
}
```

## 开发协作指引
- 素材交付采用上述目录命名，设计侧提供 `palette.json` 与主题双份资源。
- 前端按组件加载对应素材分面，路径与窗口样式统一引用色板与阴影参数。
- 交互与动画以 `transform/opacity` 为主，路径流动使用 `stroke-dasharray/dashoffset` 或渐变滑动。

## 逻辑地图布局规范（泳道 + 插槽）
- 目标：不依赖底图像素，以“分层泳道 + 水平插槽”驱动节点的可计算布局，在不同屏幕与节点数量下保持结构稳定。
- 分层泳道（Lanes）
  - 建议三条水平泳道：数据仓库层、中间数据资产层、业务应用层。
  - 参数：`lanes = [{ index:0, yPct:22 }, { index:1, yPct:55 }, { index:2, yPct:75 }]`，`yPct` 为带中心的百分比位置。
- 水平插槽（Slots）
  - 每条泳道定义插槽数：如 `[5, 5, 7]`；插槽居中分布。
  - 计算：`paddingX = 8%`，`spacingX = (100 - 2*paddingX) / (slotCount - 1)`；`xPct = paddingX + slotIndex * spacingX`。
- 节点映射
  - 节点携带 `laneIndex` 与 `slotIndex`；`yPct = lanes[laneIndex].yPct + laneOffset(laneIndex) + offsetY`。
  - `offsetX/offsetY` 用于微调（避免遮挡、贴齐桥梁/路径）。
- 路径与控制点
  - 边为二次贝塞尔：控制点取两端中点并向目标偏移 10–15% 的向量，形成“自左上到右下”的顺畅流向。
  - 通道类型（`kind`）映射线型：`sync→8 4`、`async→10 6`、`batch→6 6`，透明度随类型递减。
- 主题与2.5D
  - 节点的三面（顶/侧/阴影）与平台厚度遵循本规范；布局仅影响位置，不影响材质与厚度。
- 与底图对齐模式
  - 提供模式切换：`logical`（默认）与 `background`（底图对齐）。`background` 模式下仅用于演示或像素级贴合参考图。
- 校准流程
  1. 根据参考图为每个节点设置 `laneIndex/slotIndex`（按左右顺序与层级分布）。
  2. 打开 `background` 模式叠加参考图，使用 `offsetX/offsetY` 精修到像素级一致。
  3. 关闭 `background` 模式回归 `logical`，确保不同分辨率下结构稳定。

## 基于基础图片的“即梦”拆分提示词

### 使用说明
- 目的：基于现有基础图片（例如首页的 `2.5d.svg` 或上传的位图），引导“即梦”生成可工程化的分层 SVG 素材。
- 通用输出要求（每个提示词都应包含）：
  - 输出格式：SVG，包含 `viewBox`，纯矢量，无位图嵌入。
  - 分层分组：顶面（g-top）、侧面（g-side）、阴影（g-shadow）独立 `<g>` 分组。
  - 视角与厚度：伪等距 30°，厚度系数遵循本文档规范（平台 6–8%，卡片 4–6%）。
  - 颜色与主题：参考 `palette.json`，提供 `light/dark` 两套；高亮与中性色对比满足 WCAG ≥4.5:1。
  - 结构约束：保留 `stroke`，不要“转轮廓”，`<defs>` 中集中 `marker`/`gradient`/`filter`。
  - 命名：使用语义化命名（示例：`layer-top`、`node-side`、`marker-arrow-solid`）。
  - 负面提示：不要栅格化、不要文字/水印、不要过度滤镜、不要路径碎片化。

### 色板抽取（先行步骤）
提示词（提取主色与中性色，输出十六进制列表）：

```
目标：从上传的基础图片中提取品牌主色、强调色与中性色。
输出：light/dark 两套色板的十六进制列表与用途建议（primary/secondary/accent/neutral/success/warn/danger）。
要求：遵循对比度 WCAG ≥ 4.5:1；给出每个颜色的建议明暗变体（±8%、±15%）。
避免：不要生成位图或 SVG，仅输出颜色与用途描述。
```

### 平台（LayerPlatform）素材拆分
提示词模板：

```
输入：上传基础图片，参考其层级布局，抽象为 3 条水平泳道平台。
输出：每层平台的 SVG（light/dark 各一份），包含顶面(g-top)、侧面(g-side)、阴影(g-shadow)分组。
规范：
- 视角伪等距 30°；平台厚度≈顶面边长的 6–8%。
- viewBox：1200×300；顶面为浅色，侧面为深色渐变；阴影使用 drop-shadow。
- `<defs>` 中提供 `linearGradient` 与 `filter`，分组命名清晰。
限制：纯矢量，无位图嵌入；保留 stroke；不要转为轮廓；不要文字。
主题：参考提供的 `palette.json`，生成 light/dark 两套。
```

### 节点卡片（NodeCard）素材拆分
提示词模板：

```
输入：上传基础图片，识别代表模块/节点的视觉元素，抽象为 2.5D 卡片。
输出：标准/小型/强调三套 SVG（light/dark），每套包含顶面(g-top)、侧面(g-side)、阴影(g-shadow)。
规范：
- 标准卡片顶面 240×140，角半径 8–12px；小型顶面 160×96；强调版含外发光切片。
- 厚度≈顶面边长的 4–6%；顶面微网格/材质可选。
- `<defs>`：drop-shadow、linearGradient 独立定义；分组命名语义化。
限制：纯矢量，无位图嵌入；保留 stroke；不要文字；不要过度滤镜。
```

### 桥梁与连接器素材拆分
提示词模板：

```
输入：上传基础图片，参考层间连接的视觉结构，生成 2.5D 桥梁与连接器。
输出：直线桥、斜角桥两款 SVG（light/dark），桥面含“数据轨道”装饰；独立分组。
规范：
- 视角伪等距 30°；桥面顶层有高亮轨道；侧面较深，底部阴影。
- 箭头 `marker` 请在 `<defs>` 定义：solid、hollow、highlight 三款，尺寸≈线宽×3。
限制：纯矢量，无位图嵌入；保留 stroke；不要文字。
```

### 路径与箭头（FlowOverlay）素材拆分
提示词模板：

```
目标：生成主/次路径的装饰素材与箭头，供工程侧在 SVG 中复用。
输出：
- 渐变轨道（linearGradient）与虚线模板（stroke-dasharray：主 8 4、次 6 6）。
- 箭头 `marker`：solid、hollow、highlight，适配线宽 1.5–3px。
规范：所有定义放在 `<defs>`，命名清晰；提供 light/dark 两套。
限制：不要生成整幅路径图，仅提供可复用的定义与示例片段（纯矢量）。
```

### 轻交互窗口皮肤（Popover/Dock）素材拆分
提示词模板：

```
输入：上传基础图片，参考整体风格，设计轻交互窗口皮肤。
输出：Popover 与 Dock 的 SVG/可嵌入片段（light/dark），包含：内容区、指示箭头、边框/投影。
规范：标题区与指标位的留白比例合理；投影参数与本文档阴影规范一致。
限制：不包含文字与图表，纯皮肤；不要位图；分组命名语义化。
```

### 背景纹理与环境光
提示词模板：

```
目标：生成低对比度的网格/噪点纹理与环境光装饰条。
输出：`grid-light.svg`、`grid-dark.svg`、`noise-light.png`、`noise-dark.png`、环境光条 SVG。
规范：对比度低，不干扰主体；尺寸与 `viewBox` 适配画布；light/dark 双份。
限制：除噪点 PNG 外，一律纯矢量；命名遵循本文档目录结构。
```

### 验收自检提示词（用于生成后自查）

```
请对已生成的 SVG 素材进行结构自检：
- 检查是否包含 `viewBox`，是否纯矢量无位图嵌入。
- 顶面/侧面/阴影是否独立 `<g>` 分组，命名清晰。
- `<defs>` 是否集中 `marker`、`linearGradient`、`filter` 且无重复。
- 颜色是否与 `palette` 对齐，light/dark 是否成对。
- stroke 是否保留，未转轮廓；路径数量是否适中（无碎片化）。
输出：按上述检查项给出“通过/需修正”的列表与修正建议。
```
