# 客群中心平台项目说明文档

## 1. 产品定位与价值主张

### 产品定位
**客群中心** - 企业级客户数据管理与洞察平台

作为数据发现平台的核心子系统，客群中心专注于客户数据的统一管理、标签构建、人群圈选与深度洞察，为企业提供从客户数据采集到精准营销的全链路解决方案。

### 核心价值主张
- **数据统一**：整合多源客户数据，构建360°客户视图
- **智能标签**：基于行为+属性构建动态标签体系
- **精准圈选**：可视化人群圈选，支持复杂条件组合
- **深度洞察**：多维度客户画像分析与对比
- **营销闭环**：无缝对接营销活动，实现精准触达

### 目标用户画像

| 用户角色 | 核心需求 | 使用场景 |
|---------|---------|---------|
| **数据分析师** | 客户特征分析、标签体系设计 | 标签创建、人群分析、洞察报告 |
| **营销策略师** | 精准人群圈选、营销策略制定 | 人群包创建、A/B测试、效果评估 |
| **产品运营** | 用户分群运营、生命周期管理 | 新客获取、老客留存、流失挽回 |
| **数据工程师** | 数据源接入、标签计算引擎 | 数据集成、标签ETL、系统运维 |

### 业务目标与KPI
- **数据覆盖**：客户数据覆盖率 ≥ 95%
- **标签准确**：标签准确率 ≥ 90%
- **圈选效率**：人群圈选响应时间 ≤ 3秒
- **洞察深度**：支持10+维度交叉分析
- **营销提升**：精准营销转化率提升 ≥ 30%

## 2. 产品功能架构

### 2.1 核心功能模块

#### 2.1.1 标签系统（Tag System）
**功能定位**：客户标签的创建、管理与生命周期管理

**核心能力**：
- **标签创建**：支持规则标签、算法标签、导入标签
- **标签分类**：层级分类、标签组管理
- **标签计算**：实时计算、离线计算、增量更新
- **标签质量**：标签覆盖率、稳定性、准确性监控
- **标签市场**：标签共享、复用、评价机制

**技术特性**：
- 支持SQL、拖拽、API三种创建方式
- 标签计算引擎支持Spark/Flink
- 标签版本管理与回溯
- 标签血缘关系追踪

#### 2.1.2 人群系统（Audience System）
**功能定位**：基于标签和行为的可视化人群圈选

**核心能力**：
- **人群创建**：交并差组合、行为序列、属性筛选
- **人群估算**：实时计算预估人群规模
- **人群对比**：多人群特征对比分析
- **人群更新**：定时更新、触发更新、手动更新
- **人群分发**：推送至营销系统、数据导出

**高级功能**：

- 人群包版本管理
- 人群使用权限控制
- 人群效果追踪

#### 2.1.3 事件中心（Event Center）
**功能定位**：客户行为事件的统一管理与分析

**核心能力**：
- **事件管理**：事件定义、属性管理、元数据维护
- **事件分析**：事件统计、漏斗分析、留存分析
- **事件采样**：数据采样策略、样本管理
- **数据源接入**：Kafka、API、文件导入
- **事件查询**：SQL查询、可视化探索

**技术特性**：
- 支持千万级事件数据实时处理
- 事件数据压缩存储优化
- 事件流式计算引擎
- 事件数据质量监控

### 2.2 辅助功能模块

#### 2.2.1 客户360视图
**功能定位**：提供完整的客户全景视图，整合客户全生命周期数据

**核心能力**：
- **客户搜索**：基于客户ID的快速搜索和定位
- **全景视图**：整合基本信息、产品持有、信用记录、行为数据
- **产品信息**：存款、贷款、理财等产品全貌展示
- **信用记录**：授信记录、用信记录、调额历史的完整追踪
- **风险评级**：基于还款行为、逾期情况的风险等级评估
- **资产总览**：客户资产、负债、净值的实时计算

**数据维度**：
- **基础信息**：姓名、年龄、联系方式、地址、证件信息
- **产品持有**：存款产品、贷款产品、理财产品详细列表
- **信用状况**：授信额度、已用额度、还款记录、逾期情况
- **行为数据**：开户时间、活跃度、交易频率分析
- **风险指标**：最大逾期天数、当前逾期状态、还款率

**技术特性**：
- 支持千万级客户数据的快速检索
- 实时数据更新和同步
- 多维度数据聚合和计算
- 响应式设计，支持移动端查看

#### 2.2.2 数据资产管理
- 客户数据源管理、质量监控
- 数据血缘关系可视化
- 数据使用统计与计费

#### 2.2.3 系统管理
- 用户权限管理、角色配置
- 系统配置、参数调优
- 操作审计、日志监控

## 3. 技术架构设计

### 3.1 前端技术栈
- **框架**：Vue 3.3 + TypeScript 5.0
- **构建工具**：Vite 4.4
- **UI组件库**：Arco Design Vue 2.5
- **状态管理**：Pinia 2.1
- **路由管理**：Vue Router 4.2
- **图表库**：ECharts 5.4 + D3.js 7.8
- **工具库**：lodash-es、dayjs、axios

### 3.2 项目目录结构

```
src/pages/exploration/customer-center/
├── index.vue                 # 客群中心首页
├── tag-system/              # 标签系统
│   ├── index.vue           # 标签系统入口
│   ├── tag-management.vue  # 标签管理
│   ├── tag-create.vue      # 标签创建
│   ├── tag-detail.vue      # 标签详情
│   └── attribute-management.vue # 属性管理
├── audience-system/        # 人群系统
│   ├── index.vue           # 人群系统入口
│   ├── audience-management.vue # 人群管理
│   ├── audience-create.vue # 人群创建
│   └── audience-detail.vue # 人群详情
└── event-center/           # 事件中心
    ├── index.vue           # 事件中心入口
    ├── event-management.vue # 事件管理
    ├── event-sample-stats.vue # 事件统计
    ├── virtual-events.vue  # 虚拟事件
    └── kafka-datasource.vue # Kafka数据源
```

### 3.3 核心业务流程

#### 3.3.1 标签创建流程
1. **需求分析**：业务人员提出标签需求
2. **数据探查**：分析源数据质量、覆盖度
3. **规则设计**：设计标签计算规则
4. **标签创建**：通过界面创建标签
5. **质量验证**：验证标签准确性、覆盖率
6. **发布上线**：标签发布到生产环境

#### 3.3.2 人群圈选流程
1. **需求明确**：确定营销活动的目标人群
2. **条件配置**：使用标签和行为配置筛选条件
3. **人群估算**：实时计算预估人群规模
4. **人群生成**：生成人群包并计算实际规模
5. **质量检查**：验证人群合理性
6. **营销应用**：推送至营销系统执行

#### 3.3.3 事件分析流程
1. **事件定义**：定义事件名称、属性、触发条件
2. **数据采集**：配置数据采集源
3. **数据验证**：验证事件数据完整性
4. **事件分析**：进行事件统计、漏斗分析
5. **洞察输出**：生成分析报告和洞察

### 3.4 数据存储架构

#### 3.4.1 标签存储
- **标签元数据**：MySQL 8.0
- **标签结果**：ClickHouse（列式存储）
- **标签计算中间结果**：Redis缓存

#### 3.4.2 人群存储
- **人群定义**：MySQL 8.0
- **人群结果**：HDFS + Parquet格式
- **人群缓存**：Redis（提升查询性能）

#### 3.4.3 事件存储
- **事件元数据**：MySQL 8.0
- **事件数据**：ClickHouse（时序数据优化）
- **事件采样**：Elasticsearch（全文检索）

### 3.5 关键技术实现

#### 3.5.1 标签计算引擎
- **实时计算**：基于Flink的流式计算
- **离线计算**：基于Spark的批处理计算
- **增量更新**：支持标签的增量更新机制
- **计算优化**：预计算、缓存策略、分布式计算

#### 3.5.2 人群圈选引擎
- **查询优化**：基于ClickHouse的向量化查询
- **内存计算**：Redis缓存热点人群
- **分布式计算**：支持大规模人群的分布式计算
- **实时估算**：基于采样的实时人群规模估算

#### 3.5.3 客户360数据引擎
- **数据整合**：多源客户数据的实时聚合和关联
- **缓存策略**：客户详情数据的智能缓存和预加载
- **搜索优化**：基于Elasticsearch的全文检索和模糊匹配
- **实时计算**：客户资产、负债、风险指标的实时计算
- **数据推送**：支持客户数据的实时推送和同步更新

#### 3.5.4 事件处理引擎
- **流式处理**：Kafka + Flink实时处理
- **数据压缩**：Parquet列式存储压缩
- **查询优化**：ClickHouse物化视图加速查询
- **数据采样**：基于时间的智能采样策略

## 4. 扩展开发指南

### 4.1 新标签类型开发
1. **定义标签配置**：在标签元数据表中定义新标签类型
2. **实现计算逻辑**：开发对应的计算引擎插件
3. **创建前端组件**：开发标签创建和展示界面
4. **测试验证**：完成功能测试和性能测试
5. **文档更新**：更新用户手册和API文档

### 4.2 自定义人群规则
1. **规则引擎扩展**：扩展人群圈选规则引擎
2. **界面配置**：开发对应的配置界面
3. **计算优化**：优化新规则的计算性能
4. **权限控制**：配置新规则的使用权限

### 4.3 数据源接入
1. **数据源配置**：配置新的数据源连接信息
2. **数据映射**：定义数据字段映射关系
3. **数据验证**：开发数据质量验证规则
4. **调度配置**：配置数据采集和更新调度

## 5. 部署与运维

### 5.1 部署架构
- **容器化部署**：Docker + Kubernetes
- **负载均衡**：Nginx + Ingress
- **服务发现**：Consul
- **配置管理**：ConfigMap + Secret

### 5.2 监控告警
- **应用监控**：Prometheus + Grafana
- **日志收集**：ELK Stack（Elasticsearch + Logstash + Kibana）
- **链路追踪**：Jaeger分布式追踪
- **告警通知**：AlertManager + 钉钉/企业微信

### 5.3 性能调优
- **前端优化**：代码分割、懒加载、缓存策略
- **后端优化**：数据库索引、查询优化、缓存策略
- **计算优化**：分布式计算、并行处理、资源调度
- **存储优化**：数据压缩、冷热数据分离、分区分表