# 项目需求总览

## 项目整体背景与目标

本项目旨在优化数据社区平台的核心数据结构，提升数据质量管理水平，确保业务流程数据的完整性和准确性。通过 TDD 开发模式，建立标准化的数据质量评估体系。

## 功能模块需求

### 模块001：businessProcessData 数据结构优化

**需求描述：**
优化 businessProcessData.ts 文件，完善业务流程数据结构定义，提升数据质量覆盖率。

**具体要求：**
1. 为所有字段添加 qualityLevel（数据质量等级）属性
2. 为所有字段添加 businessImportance（业务重要性）属性
3. 补充缺失的字段属性（required、maxLength、constraints 等）
4. 为敏感字段添加 isSensitive 标识
5. 数据质量覆盖率需达到 80% 以上

**涉及表格：**
- user_device（用户设备表）
- user_register（用户注册表）
- user_auth（用户认证表）
- user_bankcard（用户银行卡表）
- credit_apply（授信申请表）
- credit_result（授信结果表）
- loan_apply（借款申请表）
- loan_contract（借款合同表）
- repayment_plan（还款计划表）
- repayment_record（还款记录表）
- loan_overdue（逾期记录表）
- collection_record（催收记录表）
- campaign_participation（活动参与表）
- data_quality_rules（数据质量规则表）
- data_quality_check_results（数据质量检查结果表）
- commonTables（通用表格）

**验收标准：**
- 所有测试用例通过
- 数据质量覆盖率达到 100%
- 代码符合 TypeScript 规范
- 文档完整记录开发过程

### 模块002：工作流编辑器功能模块

**需求描述：**
简化工作流编辑器，提供直观的数据处理流程构建能力，支持从左到右的线性工作流设计。

**具体要求：**
1. **节点类型简化**：仅支持3种节点类型
   - 数据输入节点（INPUT）：作为工作流的起始节点
   - 数据输出节点（OUTPUT）：作为工作流的结束节点
   - 数据处理节点（PROCESSING）：支持Python和SQL两种处理方式

2. **画布交互优化**：
   - 禁用缩放功能，简化用户操作
   - 支持左右滑动，便于查看长流程
   - 节点连接限制为从左到右，确保流程逻辑清晰

3. **节点功能增强**：
   - 数据处理节点支持自定义名称编辑
   - 数据处理节点可选择Python或SQL处理方式
   - 所有节点支持属性配置

4. **调试功能**：
   - 支持工作流调试运行
   - 调试时显示每个节点的输入输出数据
   - 提供详细的调试日志和状态反馈

**涉及组件：**
- WorkflowEditor.vue（工作流编辑器主组件）
- WorkflowNode.vue（工作流节点组件）
- workflowNodeTypes.js（节点类型定义）
- workflowNodeCreator.js（节点创建工具）
- workflowStorage.ts（工作流存储管理）

**验收标准：**
- 所有节点类型功能正常
- 画布交互符合设计要求
- 调试功能完整可用
- 所有测试用例通过
- 代码符合Vue 3 + TypeScript规范

## 变更日志

### 版本：v2.0（2025-01-21）
- 新增工作流编辑器功能模块
- 简化节点类型为3种基础类型
- 优化画布交互体验
- 增强调试功能
- 添加数据输出节点支持

### 版本：v1.0（2025-08-13）
- 初始需求文档创建
- 定义了 businessProcessData 优化需求
- 确立了数据质量标准和验收条件

## 优化需求记录

### 工作流编辑器优化（v2.0）
**优化目标：** 简化用户操作，提升工作流构建效率
**优化范围：** 节点类型、画布交互、调试功能
**优化原因：** 原有节点类型过于复杂，用户学习成本高，需要简化为核心功能
**提出人：** 用户需求
**确认人：** 开发团队
**更新日期：** 2025-01-21