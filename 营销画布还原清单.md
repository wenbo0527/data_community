# 营销画布相关文件还原清单

## 核心画布组件
- `src/pages/marketing/tasks/components/TaskFlowCanvas.vue` - 主要画布组件
- `src/pages/marketing/tasks/components/TaskFlowCanvas.vue.js` - 画布JS逻辑
- `src/pages/marketing/tasks/create.vue` - 创建任务页面（引用TaskFlowCanvas）
- `src/pages/marketing/tasks/task-editor.vue` - 任务编辑器（引用TaskFlowCanvas）

## 预览线管理系统
- `src/core/PreviewLineManager.js` - 核心预览线管理器
- `src/utils/UnifiedPreviewLineManager.js` - 统一预览线管理器
- `src/composables/useStructuredLayout.js` - 结构化布局组合式函数（包含统一预览线管理器）

## 布局引擎系统
- `src/utils/UnifiedStructuredLayoutEngine.js` - 统一结构化布局引擎
- `src/composables/layout/HierarchyLayoutEngine.js` - 层次布局引擎
- `src/composables/layout/HierarchyAdapter.js` - 层次适配器

## 核心工具类
- `src/utils/SmartCacheManager.js` - 智能缓存管理器
- `src/utils/NodeConfigManager.js` - 节点配置管理器
- `src/managers/publish/BranchLineProcessor.ts` - 分支线处理器
- `src/managers/publish/EndNodeAutoGenerator.ts` - 结束节点自动生成器
- `src/managers/publish/PublishFlowManager.ts` - 发布流程管理器
- `src/managers/publish/DeletionCascadeHandler.ts` - 删除级联处理器

## 性能优化和同步管理
- `src/utils/coordinate-refactor/performance/PerformanceOptimizer.js` - 性能优化器
- `src/utils/coordinate-refactor/sync/EnhancedPreviewLineRefreshManager.js` - 增强预览线刷新管理器
- `src/utils/coordinate-refactor/sync/PreviewLineIntegrationManager.js` - 预览线集成管理器

## 接口验证和完整性测试
- `src/utils/interfaceValidator.js` - 接口验证器
- `src/utils/IntegrityTestScript.js` - 完整性测试脚本

## 组合式函数和配置
- `src/composables/useConfigDrawers.js` - 配置抽屉组合式函数

## 测试文件（营销画布相关）
- `src/tests/unit/UnifiedStructuredLayoutEngine.test.js` - 布局引擎单元测试
- `src/tests/unit/HierarchyLayoutEngine.test.js` - 层次布局引擎测试
- `src/tests/yCoordinateConsistencyTest.js` - Y坐标一致性测试
- `src/tests/yCoordinateConsistency.test.js` - Y坐标一致性测试
- `src/tests/simpleYCoordinateTest.js` - 简单Y坐标测试
- `src/tests/quickYCoordinateTest.js` - 快速Y坐标测试
- `src/tests/third-layer-alignment.test.js` - 第三层对齐测试
- `src/tests/integrity.test.js` - 完整性测试
- `src/tests/is-configured-*.test.js` - 配置状态相关测试
- `src/tests/ai-call-node-preview-line.test.js` - AI调用节点预览线测试
- `src/tests/start-node-preview-line.test.js` - 开始节点预览线测试
- `src/tests/audience-split-preview-line.test.js` - 受众分流预览线测试
- `src/tests/publish/*.test.ts` - 发布相关测试

## 发布管理器组件
- `src/components/workflow-editor/managers/publish/BranchLineProcessor.ts` - 工作流编辑器分支线处理器

## 主入口文件修改
- `src/main.js` - 包含布局引擎动态导入和测试逻辑

## 还原策略
1. 这些文件都是营销画布和预览线系统的核心组件
2. 需要从main分支还原这些文件到之前的稳定版本
3. 保留客户360、指标注册、数据地图等非营销画布功能的修改
4. 还原后需要验证预览线系统的稳定性

## 风险评估
- **高风险**：核心画布组件和布局引擎的还原可能影响整个营销画布功能
- **中风险**：预览线管理器的还原需要确保与现有节点的兼容性
- **低风险**：测试文件的还原不会影响生产功能

## 建议操作顺序
1. 先还原测试文件，验证还原过程
2. 还原工具类和管理器
3. 还原核心组件（布局引擎、预览线管理器）
4. 最后还原主画布组件
5. 每个步骤后进行功能验证