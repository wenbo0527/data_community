我已完成对现有代码的分析，并为您制定了增加“核销备注”功能的实施计划。

### 1. 更新数据模型 (Store)
**文件**: `apps/risk-app/src/modules/budget/stores/settlementFlow.ts`
- 修改 `WriteoffRecord` 接口，增加可选的 `remark` 字段。这将确保备注信息能够被保存到结算记录中。

### 2. 更新核销面板 (UI & 逻辑)
**文件**: `apps/risk-app/src/modules/budget/pages/settlement/WriteoffPanel.vue`

**交互设计**:
- 在核销行的操作区域（“执行”按钮旁）增加一个**“备注”按钮**。
- 点击按钮后弹出对话框，允许用户输入多行备注信息。
- 输入完成后点击“确定”，备注将暂存在当前行中。

**代码实现**:
- **状态扩展**:
  - 在 `productRows` 的数据结构中，为每个核销分录增加 `remark` 字段。
  - 新增 `remarkModalVisible`（控制弹窗显示）、`currentRemark`（绑定输入框）和 `editingTarget`（记录当前正在编辑哪一行）等响应式变量。
- **功能方法**:
  - `openRemarkModal(record, index)`: 打开弹窗并回显已有备注。
  - `saveRemark()`: 将弹窗中的内容保存回数据列表。
  - `confirmWriteoff`: 修改此方法，在提交核销记录时一并带上 `remark` 字段。
- **初始化逻辑**:
  - 在添加新核销行（`addWriteoffLine`）时，初始化 `remark` 为空字符串。

### 3. 验证
- 启动应用，进入结算任务的“确认核销”步骤。
- 点击“备注”按钮，测试输入、保存和回显功能。
- 点击“执行”核销，验证备注信息是否正确传递到了 Store 中（可以通过控制台日志或查看 Store 状态确认）。
