# 客户360授信信息模块测试用例

## 1. 测试概述

本文档针对客户360授信信息模块的功能、性能、兼容性等方面设计详细的测试用例，确保模块功能完整、性能稳定、用户体验良好。

### 1.1 测试范围

- 授信信息卡片展示功能
- 用信列表管理功能
- 调额历史查询功能
- 还款信息抽屉展示功能
- 放款信息抽屉展示功能
- 数据筛选和排序功能
- 数据导出和复制功能
- 响应式设计适配

### 1.2 测试环境

- **前端框架**：Vue 3 + Composition API
- **UI组件库**：Arco Design
- **浏览器**：Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **设备**：桌面端、平板端、手机端
- **分辨率**：1920x1080, 1366x768, 768x1024, 375x667

## 2. 功能测试用例

### 2.1 授信信息卡片测试

#### TC001: 授信信息基本展示

**测试目标**：验证授信信息卡片正确展示所有必需字段

**前置条件**：
- 用户已登录系统
- 已选择具有授信信息的客户
- 已切换到业务核心明细Tab

**测试步骤**：
1. 进入客户详情页面
2. 点击"业务核心明细"Tab
3. 查看授信信息卡片

**预期结果**：
- 授信信息卡片正确显示
- 包含以下字段：授信单号、授信日期、授信结果、拒绝原因、总授信额度、当前额度、已用额度、授信定价、可用期限
- 字段数据格式正确（日期、金额、百分比等）
- 授信结果状态颜色正确（通过-绿色，拒绝-红色，待审批-橙色）

**测试数据**：
```json
{
  "creditNo": "CR202401001",
  "creditDate": "2024-01-15",
  "creditResult": "通过",
  "rejectReason": null,
  "totalCreditLimit": 500000,
  "currentLimit": 450000,
  "usedLimit": 50000,
  "creditPricing": 0.0485,
  "availablePeriod": "2024-01-15至2025-01-15"
}
```

#### TC002: 授信信息状态展示

**测试目标**：验证不同授信状态的正确展示

**测试步骤**：
1. 测试授信结果为"通过"的情况
2. 测试授信结果为"拒绝"的情况
3. 测试授信结果为"待审批"的情况

**预期结果**：
- 通过状态显示绿色标签
- 拒绝状态显示红色标签，并显示拒绝原因
- 待审批状态显示橙色标签

#### TC003: 授信信息数据复制

**测试目标**：验证授信信息数据复制功能

**测试步骤**：
1. 点击授信单号旁的复制按钮
2. 点击整体数据复制按钮
3. 验证复制内容

**预期结果**：
- 单个字段复制成功
- 整体数据复制格式正确
- 显示复制成功提示

### 2.2 用信列表测试

#### TC004: 用信列表基本展示

**测试目标**：验证用信列表正确展示所有记录

**前置条件**：
- 客户存在用信记录
- 已进入业务核心明细页面

**测试步骤**：
1. 查看用信列表表格
2. 验证表格列头
3. 验证数据行内容

**预期结果**：
- 表格包含以下列：用信单号、用信日期、银行卡号、用信结果、拒绝原因、借据号、借据状态、借款金额、期数、操作
- 银行卡号正确脱敏显示（如：****1234）
- 借据状态使用标签形式展示
- 操作列包含"还款信息"和"放款信息"按钮

**测试数据**：
```json
[
  {
    "loanNo": "LN202401001",
    "loanDate": "2024-01-20",
    "bankCardNo": "****1234",
    "loanResult": "成功",
    "rejectReason": null,
    "contractNo": "CT202401001",
    "contractStatus": "正常",
    "loanAmount": 100000,
    "periods": 12
  }
]
```

#### TC005: 用信列表筛选功能

**测试目标**：验证用信列表筛选功能正常工作

**测试步骤**：
1. 使用用信结果筛选（成功/失败/处理中）
2. 使用借据状态筛选（正常/逾期/结清）
3. 使用日期范围筛选
4. 组合多个筛选条件

**预期结果**：
- 单个筛选条件生效
- 多个筛选条件组合生效
- 筛选结果正确
- 清空筛选功能正常

#### TC006: 用信列表排序功能

**测试目标**：验证用信列表排序功能

**测试步骤**：
1. 点击用信日期列头排序
2. 点击借款金额列头排序
3. 验证排序结果

**预期结果**：
- 日期排序正确（升序/降序）
- 金额排序正确（升序/降序）
- 排序图标状态正确

#### TC007: 用信列表分页功能

**测试目标**：验证用信列表分页功能

**前置条件**：
- 用信记录数量超过单页显示数量

**测试步骤**：
1. 验证分页器显示
2. 点击下一页
3. 点击上一页
4. 直接跳转到指定页
5. 修改每页显示数量

**预期结果**：
- 分页器正确显示总页数和当前页
- 翻页功能正常
- 跳转功能正常
- 每页显示数量修改生效

### 2.3 调额历史测试

#### TC008: 调额历史基本展示

**测试目标**：验证调额历史表格正确展示

**测试步骤**：
1. 查看调额历史表格
2. 验证表格列头
3. 验证数据内容

**预期结果**：
- 表格包含以下列：授信单号、调整时间、原授信额度、调整后授信额度、生效起始时间、生效结束时间、操作类型
- 操作类型使用标签形式展示
- 金额对比清晰显示
- 默认按调整时间倒序排列

**测试数据**：
```json
[
  {
    "creditNo": "CR202401001",
    "adjustmentTime": "2024-02-01 10:30:00",
    "originalLimit": 300000,
    "newLimit": 500000,
    "effectiveStartTime": "2024-02-01 00:00:00",
    "effectiveEndTime": "2025-02-01 00:00:00",
    "operationType": "提额"
  }
]
```

#### TC009: 调额历史筛选功能

**测试目标**：验证调额历史筛选功能

**测试步骤**：
1. 使用操作类型筛选（提额/降额/冻结/解冻）
2. 使用时间范围筛选
3. 组合筛选条件

**预期结果**：
- 操作类型筛选正确
- 时间范围筛选正确
- 组合筛选结果正确

### 2.4 抽屉功能测试

#### TC010: 还款信息抽屉展示

**测试目标**：验证还款信息抽屉正确展示

**测试步骤**：
1. 点击用信列表中的"还款信息"按钮
2. 验证抽屉打开动画
3. 验证抽屉内容
4. 点击关闭按钮

**预期结果**：
- 抽屉从右侧滑入，宽度占屏幕40%
- 抽屉标题显示"还款信息"
- 内容以卡片形式展示还款记录
- 每个卡片包含：还款日期、还款金额、还款方式、还款状态、本金、利息、罚息等信息
- 关闭功能正常

**测试数据**：
```json
[
  {
    "repaymentId": "RP202401001",
    "contractNo": "CT202401001",
    "repaymentDate": "2024-02-20",
    "repaymentAmount": 8500,
    "repaymentMethod": "银行卡代扣",
    "repaymentStatus": "成功",
    "principalAmount": 8000,
    "interestAmount": 500,
    "penaltyAmount": 0
  }
]
```

#### TC011: 放款信息抽屉展示

**测试目标**：验证放款信息抽屉正确展示

**测试步骤**：
1. 点击用信列表中的"放款信息"按钮
2. 验证抽屉打开动画
3. 验证抽屉内容
4. 测试多种关闭方式

**预期结果**：
- 抽屉正确打开
- 抽屉标题显示"放款信息"
- 内容以卡片形式展示放款记录
- 每个卡片包含：放款日期、放款金额、放款渠道、放款状态、到账时间等信息
- 支持点击关闭按钮、点击遮罩层、按ESC键关闭

**测试数据**：
```json
[
  {
    "disbursementId": "DS202401001",
    "contractNo": "CT202401001",
    "disbursementDate": "2024-01-20",
    "disbursementAmount": 100000,
    "disbursementChannel": "银行转账",
    "disbursementStatus": "成功",
    "arrivalTime": "2024-01-20 15:30:00"
  }
]
```

#### TC012: 抽屉数据操作功能

**测试目标**：验证抽屉内数据操作功能

**测试步骤**：
1. 在抽屉内点击数据复制按钮
2. 点击数据导出按钮
3. 验证操作结果

**预期结果**：
- 数据复制成功，格式正确
- 数据导出成功，文件格式正确
- 操作提示友好

### 2.5 产品关联测试

#### TC013: 产品切换数据联动

**测试目标**：验证产品切换时授信信息正确联动

**前置条件**：
- 客户拥有多个产品
- 不同产品有不同的授信信息

**测试步骤**：
1. 选择产品A，查看授信信息
2. 切换到产品B，查看授信信息
3. 验证数据变化

**预期结果**：
- 产品切换后，授信信息、用信列表、调额历史都正确更新
- 数据与选中产品匹配
- 切换过程流畅，无数据残留

#### TC014: 无授信信息产品处理

**测试目标**：验证无授信信息产品的处理

**测试步骤**：
1. 选择无授信信息的产品
2. 查看授信信息模块

**预期结果**：
- 显示"暂无授信信息"提示
- 界面布局保持正常
- 不显示错误信息

## 3. 性能测试用例

### 3.1 加载性能测试

#### TC015: 页面首次加载性能

**测试目标**：验证页面首次加载性能

**测试步骤**：
1. 清空浏览器缓存
2. 访问客户详情页面
3. 记录加载时间

**预期结果**：
- 页面首次加载时间 < 2秒
- 授信信息卡片渲染时间 < 500ms
- 用信列表首屏渲染时间 < 1秒

#### TC016: 大数据量加载性能

**测试目标**：验证大数据量情况下的加载性能

**测试条件**：
- 用信记录数量：1000+
- 调额历史记录：100+
- 还款记录：500+

**测试步骤**：
1. 加载包含大量数据的客户
2. 测试各模块加载时间
3. 测试滚动性能

**预期结果**：
- 分页加载响应时间 < 1秒
- 虚拟滚动流畅，无卡顿
- 内存使用合理，无内存泄漏

### 3.2 交互性能测试

#### TC017: 筛选操作性能

**测试目标**：验证筛选操作的响应性能

**测试步骤**：
1. 在大数据量情况下进行筛选
2. 测试多条件组合筛选
3. 记录响应时间

**预期结果**：
- 单条件筛选响应时间 < 300ms
- 多条件筛选响应时间 < 500ms
- 筛选结果准确

#### TC018: 抽屉打开性能

**测试目标**：验证抽屉打开的响应性能

**测试步骤**：
1. 点击"还款信息"按钮
2. 点击"放款信息"按钮
3. 记录响应时间

**预期结果**：
- 抽屉打开响应时间 < 300ms
- 动画流畅，无卡顿
- 数据加载时间 < 500ms

### 3.3 并发性能测试

#### TC019: 多用户并发访问

**测试目标**：验证多用户并发访问性能

**测试条件**：
- 并发用户数：50
- 测试时长：10分钟

**测试步骤**：
1. 模拟50个用户同时访问
2. 执行各种操作（查看、筛选、导出等）
3. 监控系统性能

**预期结果**：
- 系统响应时间稳定
- 无错误或超时
- 服务器资源使用合理

## 4. 兼容性测试用例

### 4.1 浏览器兼容性测试

#### TC020: Chrome浏览器兼容性

**测试目标**：验证Chrome浏览器兼容性

**测试版本**：Chrome 90+

**测试步骤**：
1. 在Chrome浏览器中执行所有功能测试
2. 验证样式显示
3. 验证交互功能

**预期结果**：
- 所有功能正常
- 样式显示正确
- 交互响应正常

#### TC021: Firefox浏览器兼容性

**测试目标**：验证Firefox浏览器兼容性

**测试版本**：Firefox 88+

**测试步骤**：
1. 在Firefox浏览器中执行核心功能测试
2. 重点测试抽屉功能和动画效果

**预期结果**：
- 核心功能正常
- 动画效果流畅
- 无JavaScript错误

#### TC022: Safari浏览器兼容性

**测试目标**：验证Safari浏览器兼容性

**测试版本**：Safari 14+

**测试步骤**：
1. 在Safari浏览器中测试基本功能
2. 验证CSS样式兼容性

**预期结果**：
- 基本功能正常
- 样式显示正确
- 无兼容性问题

### 4.2 设备兼容性测试

#### TC023: 桌面端适配测试

**测试目标**：验证桌面端显示效果

**测试分辨率**：
- 1920x1080
- 1366x768
- 1440x900

**测试步骤**：
1. 在不同分辨率下测试页面布局
2. 验证表格和卡片显示效果
3. 测试抽屉宽度适配

**预期结果**：
- 布局适配正确
- 内容显示完整
- 交互区域大小合适

#### TC024: 平板端适配测试

**测试目标**：验证平板端显示效果

**测试分辨率**：768x1024

**测试步骤**：
1. 在平板模式下测试页面布局
2. 验证触摸操作
3. 测试抽屉适配

**预期结果**：
- 布局适配平板屏幕
- 触摸操作响应正常
- 抽屉宽度适配屏幕

#### TC025: 手机端适配测试

**测试目标**：验证手机端基本功能

**测试分辨率**：375x667

**测试步骤**：
1. 在手机模式下测试基本查看功能
2. 验证表格横向滚动
3. 测试抽屉全屏显示

**预期结果**：
- 基本查看功能正常
- 表格支持横向滚动
- 抽屉在手机端全屏显示

## 5. 安全性测试用例

### 5.1 数据安全测试

#### TC026: 敏感数据脱敏测试

**测试目标**：验证敏感数据正确脱敏

**测试步骤**：
1. 查看银行卡号显示
2. 查看身份证号显示
3. 验证脱敏规则

**预期结果**：
- 银行卡号显示为****1234格式
- 身份证号显示为前3位+****+后4位格式
- 敏感金额信息根据权限显示

#### TC027: 权限控制测试

**测试目标**：验证不同角色的权限控制

**测试步骤**：
1. 使用业务人员账号登录测试
2. 使用风控人员账号登录测试
3. 使用管理人员账号登录测试

**预期结果**：
- 不同角色看到的数据范围不同
- 操作权限正确限制
- 无权限操作被正确拦截

### 5.2 输入安全测试

#### TC028: XSS攻击防护测试

**测试目标**：验证XSS攻击防护

**测试步骤**：
1. 在筛选输入框输入脚本代码
2. 验证系统响应

**预期结果**：
- 脚本代码被正确转义
- 不执行恶意脚本
- 系统正常运行

## 6. 易用性测试用例

### 6.1 用户体验测试

#### TC029: 操作流程测试

**测试目标**：验证操作流程的易用性

**测试步骤**：
1. 模拟新用户首次使用
2. 记录操作步骤和时间
3. 收集用户反馈

**预期结果**：
- 操作流程直观易懂
- 关键操作在3步内完成
- 用户满意度 > 80%

#### TC030: 错误处理测试

**测试目标**：验证错误处理的友好性

**测试步骤**：
1. 模拟网络异常
2. 模拟数据加载失败
3. 模拟操作超时

**预期结果**：
- 错误提示信息友好
- 提供重试机制
- 不影响其他功能使用

## 7. 回归测试用例

### 7.1 核心功能回归

#### TC031: 授信信息展示回归测试

**测试目标**：验证授信信息展示功能稳定性

**测试频率**：每次发版前执行

**测试步骤**：
1. 执行TC001-TC003测试用例
2. 验证功能无退化

#### TC032: 用信列表功能回归测试

**测试目标**：验证用信列表功能稳定性

**测试频率**：每次发版前执行

**测试步骤**：
1. 执行TC004-TC007测试用例
2. 验证功能无退化

## 8. 自动化测试用例

### 8.1 UI自动化测试

#### TC033: 页面元素自动化验证

**测试工具**：Cypress/Playwright

**测试脚本**：
```javascript
// 授信信息卡片验证
cy.get('[data-testid="credit-info-card"]').should('be.visible')
cy.get('[data-testid="credit-no"]').should('contain.text', 'CR')
cy.get('[data-testid="credit-result"]').should('have.class', 'success')
```

#### TC034: 交互功能自动化测试

**测试脚本**：
```javascript
// 抽屉打开测试
cy.get('[data-testid="repayment-btn"]').click()
cy.get('[data-testid="drawer"]').should('be.visible')
cy.get('[data-testid="drawer-close"]').click()
cy.get('[data-testid="drawer"]').should('not.be.visible')
```

### 8.2 API自动化测试

#### TC035: 数据接口自动化测试

**测试脚本**：
```javascript
// 授信信息API测试
cy.request('GET', '/api/credit-info/123').then((response) => {
  expect(response.status).to.eq(200)
  expect(response.body).to.have.property('creditNo')
  expect(response.body).to.have.property('creditResult')
})
```

## 9. 测试数据准备

### 9.1 基础测试数据

```json
{
  "customers": [
    {
      "customerId": "CUST001",
      "name": "张三",
      "products": [
        {
          "productKey": "loan_001",
          "productName": "个人信用贷",
          "creditInfo": {
            "creditNo": "CR202401001",
            "creditDate": "2024-01-15",
            "creditResult": "通过",
            "totalCreditLimit": 500000,
            "currentLimit": 450000,
            "usedLimit": 50000,
            "creditPricing": 0.0485,
            "availablePeriod": "2024-01-15至2025-01-15"
          },
          "loanRecords": [
            {
              "loanNo": "LN202401001",
              "loanDate": "2024-01-20",
              "bankCardNo": "****1234",
              "loanResult": "成功",
              "contractNo": "CT202401001",
              "contractStatus": "正常",
              "loanAmount": 100000,
              "periods": 12
            }
          ]
        }
      ]
    }
  ]
}
```

### 9.2 边界测试数据

```json
{
  "extremeData": {
    "maxCreditLimit": 10000000,
    "minCreditLimit": 1000,
    "maxLoanRecords": 1000,
    "maxRepaymentRecords": 500,
    "longTextFields": {
      "rejectReason": "拒绝原因文本超过100个字符的情况测试..."
    }
  }
}
```

## 10. 测试执行计划

### 10.1 测试阶段划分

| 阶段 | 测试类型 | 执行时间 | 负责人 |
|------|----------|----------|--------|
| 单元测试 | 组件功能测试 | 开发阶段 | 开发工程师 |
| 集成测试 | 模块集成测试 | 开发完成后 | 测试工程师 |
| 系统测试 | 完整功能测试 | 集成测试通过后 | 测试团队 |
| 验收测试 | 用户验收测试 | 系统测试通过后 | 产品经理+用户 |

### 10.2 测试环境要求

- **开发环境**：用于开发阶段的功能验证
- **测试环境**：用于完整的功能和性能测试
- **预生产环境**：用于最终验收测试
- **生产环境**：用于生产发布后的监控

### 10.3 缺陷管理

#### 缺陷等级定义

- **P0（阻塞）**：系统无法使用，核心功能完全失效
- **P1（严重）**：主要功能异常，影响正常使用
- **P2（一般）**：次要功能异常，不影响主流程
- **P3（轻微）**：界面问题，用户体验问题

#### 缺陷处理流程

1. 发现缺陷 → 记录缺陷 → 分配处理
2. 开发修复 → 测试验证 → 关闭缺陷
3. 回归测试 → 发版验证

## 11. 测试报告模板

### 11.1 测试执行报告

```
测试执行报告

项目名称：客户360授信信息模块
测试版本：v1.0.0
测试时间：2024-01-01 至 2024-01-15
测试环境：测试环境

测试概况：
- 计划执行用例：35个
- 实际执行用例：35个
- 通过用例：33个
- 失败用例：2个
- 阻塞用例：0个

缺陷统计：
- P0缺陷：0个
- P1缺陷：1个
- P2缺陷：1个
- P3缺陷：3个

测试结论：
功能基本满足需求，存在少量问题需要修复后发版。
```

### 11.2 性能测试报告

```
性能测试报告

测试指标：
- 页面加载时间：1.2秒（目标<2秒）✅
- 筛选响应时间：280ms（目标<500ms）✅
- 抽屉打开时间：250ms（目标<300ms）✅
- 并发用户支持：50用户（目标50用户）✅

性能结论：
所有性能指标均满足要求。
```

## 12. 测试总结

### 12.1 测试覆盖率要求

- **功能覆盖率**：≥95%
- **代码覆盖率**：≥80%
- **分支覆盖率**：≥70%
- **用例执行率**：100%

### 12.2 质量标准

- **功能正确性**：核心功能100%正确
- **性能达标率**：≥95%
- **兼容性通过率**：≥90%
- **用户满意度**：≥85%

### 12.3 发版标准

- P0、P1缺陷修复率：100%
- P2缺陷修复率：≥90%
- 回归测试通过率：100%
- 性能测试通过率：100%

通过以上全面的测试用例设计和执行，确保客户360授信信息模块的质量和稳定性，为用户提供优质的使用体验。