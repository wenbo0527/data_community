## 现象与成因研判
- 拖拽时闪烁：视图频繁重绘（网格、辅助线、最小地图、边标签、悬停样式）叠加；节点/边组件在鼠标事件中触发重渲染。
- 连线不刷新：边的控制点/路由在视图变换期间未更新或被样式动画影响；最小地图和高频日志也加重卡顿。

## 优化目标
- 保留当前“左键拖拽”的画布移动方式。
- 在拖拽过程中关闭/弱化高成本 UI 与事件；拖拽结束后再恢复。
- 保证边在拖拽过程中位置跟随并在拖拽结束后执行一次精确刷新。

## 具体方案
### 1. 拖拽生命周期统一控制（添加“拖拽中”标志）
- 在 `blank:mousedown` 设置 `isPanning=true` 并给画布容器加类 `is-panning`；在 `blank:mouseup`/`blank:click` 取消。
- CSS 针对 `.is-panning`：
  - 禁用过渡/动画：`* { transition: none !important; animation: none !important }`
  - 隐藏高成本元素：边标签、节点阴影、发光、复杂滤镜。
  - 减少 hover 效果：禁用节点 hover 的样式增强。

### 2. 拖拽期间关闭高开销 UI，结束后恢复
- 关闭：`snapline`、`grid.visible=false`（可选）、最小地图更新（暂停 updateGraph）；恢复：拖拽结束再打开。
- 磁体高亮 `highlighting.magnetAdsorbed` 暂时跳过（在 pan 中置标志，使 validateConnection 返回早）。

### 3. 边刷新与路由简化
- 路由/连接器统一：大量边时使用 `router: 'orth'` 或简单 `normal`，`connector: 'rounded'`；减少曲线计算。
- 拖拽结束：执行一次精确刷新
  - 清空边顶点：`edge.setVertices([])`（已有类似逻辑）
  - 调整目标端口吸附逻辑在 pan 结束时执行一次（而非高频实时）。
- 按需隐藏边标签在拖拽中显示：拖拽结束再恢复（避免文字布局计算）。

### 4. 事件与日志降噪
- 将高频 `console.log` 包裹到 `DEBUG` 开关；默认关闭。
- 将 `edge:mouseenter` 的工具插入改为右键或选中态（已部分处理），继续排查其他高频事件写入。

### 5. 仅保留单一拖拽通道且启用 GPU 合成
- 保持 `panning` 左键拖拽，关闭其他通道；
- Graph 容器使用 `will-change: transform`（已加），补充 `transform: translateZ(0)` 强制 GPU 合成。

### 6. 最小地图策略
- 拖拽中暂停最小地图更新；拖拽结束后延迟（如 100ms）更新。
- 小地图仍可显示，但不在每一帧做同步。

### 7. 验收与监测
- 节点 300+、边 400+：拖拽时 FPS 提升、边位置跟随；拖拽结束 100ms 内连线刷新到位。
- 闪烁显著减少；日志不占用主线程。

## 修改范围
- `src/pages/marketing/tasks/horizontal/index.vue`（拖拽生命周期、标志类、事件分流、日志开关、最小地图暂停）
- `src/pages/marketing/tasks/horizontal/HorizontalNode.vue`（若节点存在复杂过渡/滤镜，在 `.is-panning` 下弱化）
- 样式：为 `.is-panning` 增加禁用过渡与隐藏标签的规则。

请确认该方案，确认后我将按上述步骤逐项实施，并在每一步完成后进行回归测试（含大图场景）与具体改动说明。