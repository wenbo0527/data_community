# é¢„è§ˆçº¿ç®¡ç†æœºåˆ¶æŠ€æœ¯è¯„ä¼°æ–‡æ¡£

## 1. é—®é¢˜æ¦‚è¿°

### 1.1 é—®é¢˜æè¿°
åœ¨åˆ†æµèŠ‚ç‚¹ä¸‹è¿æ¥çš„èŠ‚ç‚¹åˆ é™¤åï¼Œé¢„è§ˆçº¿æ²¡æœ‰æ­£ç¡®æ¢å¤ï¼Œå¯¼è‡´ç”¨æˆ·ç•Œé¢ç¼ºå¤±å¿…è¦çš„é¢„è§ˆçº¿æç¤ºï¼Œå½±å“ç”¨æˆ·ä½“éªŒå’Œæ“ä½œæµç¨‹ã€‚

### 1.2 å½±å“èŒƒå›´
- **èŠ‚ç‚¹ç±»å‹**: ä¸»è¦å½±å“åˆ†æµèŠ‚ç‚¹ï¼ˆaudience-splitã€event-splitã€ab-testï¼‰
- **æ“ä½œåœºæ™¯**: èŠ‚ç‚¹åˆ é™¤åçš„é¢„è§ˆçº¿æ¢å¤
- **ç”¨æˆ·ä½“éªŒ**: ç¼ºå¤±é¢„è§ˆçº¿å¯¼è‡´è¿æ¥æç¤ºä¸æ˜ç¡®

## 2. é¢„è§ˆçº¿ç®¡ç†æœºåˆ¶åˆ†æ

### 2.1 æ ¸å¿ƒç»„ä»¶æ¶æ„

```mermaid
graph TD
    A[UnifiedPreviewLineManager] --> B[é¢„è§ˆçº¿åˆ›å»º]
    A --> C[é¢„è§ˆçº¿æ›´æ–°]
    A --> D[é¢„è§ˆçº¿åˆ é™¤]
    A --> E[äº‹ä»¶ç›‘å¬]
    
    B --> F[åˆ†æ”¯èŠ‚ç‚¹å¤„ç†]
    B --> G[æ™®é€šèŠ‚ç‚¹å¤„ç†]
    
    C --> H[ä½ç½®æ›´æ–°]
    C --> I[çŠ¶æ€åŒæ­¥]
    
    D --> J[æ¸…ç†æ˜ å°„]
    D --> K[æ¢å¤é€»è¾‘]
    
    E --> L[èŠ‚ç‚¹åˆ é™¤äº‹ä»¶]
    E --> M[èŠ‚ç‚¹ç§»åŠ¨äº‹ä»¶]
    E --> N[èŠ‚ç‚¹é…ç½®äº‹ä»¶]
```

### 2.2 é¢„è§ˆçº¿ç”Ÿå‘½å‘¨æœŸ

#### 2.2.1 åˆ›å»ºé˜¶æ®µ
- **è§¦å‘æ¡ä»¶**: èŠ‚ç‚¹é…ç½®å®Œæˆä¸”æ»¡è¶³`shouldCreatePreviewLine`æ¡ä»¶
- **æ ¸å¿ƒæ–¹æ³•**: `createUnifiedPreviewLine()`, `createPreviewLineAfterConfig()`
- **åˆ†æ”¯å¤„ç†**: åˆ†æµèŠ‚ç‚¹åˆ›å»ºå¤šæ¡é¢„è§ˆçº¿ï¼Œæ¯ä¸ªåˆ†æ”¯ä¸€æ¡

#### 2.2.2 æ›´æ–°é˜¶æ®µ
- **è§¦å‘äº‹ä»¶**: èŠ‚ç‚¹ç§»åŠ¨ã€é…ç½®å˜æ›´
- **æ›´æ–°æœºåˆ¶**: é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹åˆ·æ–°
- **ä½ç½®åŒæ­¥**: å®æ—¶æ›´æ–°é¢„è§ˆçº¿ç«¯ç‚¹ä½ç½®

#### 2.2.3 åˆ é™¤é˜¶æ®µ
- **æ¸…ç†èŒƒå›´**: é¢„è§ˆçº¿å®ä¾‹ã€èŠ‚ç‚¹æ˜ å°„ã€ç±»å‹æ˜ å°„
- **æ¢å¤æœºåˆ¶**: `restorePreviewLinesAfterNodeDeletion()`

### 2.3 åˆ†æµèŠ‚ç‚¹ç‰¹æ®Šå¤„ç†

#### 2.3.1 åˆ†æµèŠ‚ç‚¹è¯†åˆ«
```javascript
// æ”¯æŒçš„åˆ†æµèŠ‚ç‚¹ç±»å‹
const branchNodeTypes = ['audience-split', 'event-split', 'ab-test']

// åˆ¤æ–­é€»è¾‘
isBranchNode(node, config) {
    const nodeType = nodeData.type || nodeData.nodeType
    const isBranchByType = branchNodeTypes.includes(nodeType)
    const branchCount = this.calculateBranchCount(node, nodeConfig)
    const isBranchByCount = branchCount > 1
    return isBranchByType || isBranchByCount
}
```

#### 2.3.2 åˆ†æ”¯é¢„è§ˆçº¿ç®¡ç†
- **å¤šåˆ†æ”¯æ”¯æŒ**: æ¯ä¸ªåˆ†æ”¯ç‹¬ç«‹çš„é¢„è§ˆçº¿å®ä¾‹
- **åˆ†æ”¯æ˜ å°„**: `nodePreviewLines` Mapç»´æŠ¤èŠ‚ç‚¹åˆ°é¢„è§ˆçº¿çš„æ˜ å°„
- **æ ‡ç­¾ç®¡ç†**: åˆ†æ”¯æ ‡ç­¾çš„ç”Ÿæˆå’ŒéªŒè¯

## 3. å¸é™„æœºåˆ¶åˆ†æ

### 3.1 å¸é™„çŠ¶æ€ç®¡ç†
- **çŠ¶æ€æšä¸¾**: `DragStates.SNAPPING`
- **å¸é™„æ£€æµ‹**: åŸºäºè·ç¦»å’Œä½ç½®çš„å¸é™„åˆ¤æ–­
- **çŠ¶æ€è½¬æ¢**: `GlobalDragStateManager`ç»Ÿä¸€ç®¡ç†æ‹–æ‹½çŠ¶æ€

### 3.2 å¸é™„é€»è¾‘
```javascript
startSnapping(targetNode, snapInfo) {
    if (!this.transitionTo(DragStates.SNAPPING, { targetNode, snapInfo })) {
        return false
    }
    this.currentDrag.targetNode = targetNode
    this.currentDrag.metadata.snapInfo = snapInfo
}
```

### 3.3 å¸é™„ä¸é¢„è§ˆçº¿çš„å…³ç³»
- **é¢„è§ˆçº¿ä½œä¸ºå¸é™„ç›®æ ‡**: èŠ‚ç‚¹å¯ä»¥å¸é™„åˆ°é¢„è§ˆçº¿ç«¯ç‚¹
- **å¸é™„çŠ¶æ€å½±å“**: å¸é™„çŠ¶æ€å˜åŒ–è§¦å‘é¢„è§ˆçº¿æ›´æ–°
- **è§†è§‰åé¦ˆ**: å¸é™„æ—¶é¢„è§ˆçº¿çŠ¶æ€å˜åŒ–æä¾›è§†è§‰æç¤º

## 4. åŠ¨ä½œç›‘å¬æœºåˆ¶åˆ†æ

### 4.1 äº‹ä»¶ç›‘å¬æ¶æ„

```mermaid
graph LR
    A[Graph Events] --> B[UnifiedPreviewLineManager]
    B --> C[node:removed]
    B --> D[node:moved]
    B --> E[node:configured]
    B --> F[edge:connected]
    B --> G[edge:removed]
    
    C --> H[handleNodeRemoved]
    D --> I[handleNodeMoved]
    E --> J[onNodeConfigured]
```

### 4.2 å…³é”®äº‹ä»¶å¤„ç†

#### 4.2.1 èŠ‚ç‚¹åˆ é™¤äº‹ä»¶
```javascript
handleNodeRemoved(e, providedIncomingEdges) {
    // 1. é˜²é‡å¤å¤„ç†
    if (this.processedNodeDeletions.has(node.id)) return
    
    // 2. æ¸…ç†é¢„è§ˆçº¿
    this.removePreviewLine(node.id)
    
    // 3. æ¸…ç†ç¼“å­˜
    this.clearNodeCache(node.id)
    
    // 4. æ¢å¤ç›¸å…³é¢„è§ˆçº¿
    this.restorePreviewLinesAfterNodeDeletion(node, incomingEdges)
}
```

#### 4.2.2 èŠ‚ç‚¹ç§»åŠ¨äº‹ä»¶
- **é˜²æŠ–å¤„ç†**: 50mså»¶è¿Ÿé¿å…é¢‘ç¹æ›´æ–°
- **ä½ç½®åŒæ­¥**: å®æ—¶æ›´æ–°é¢„è§ˆçº¿ä½ç½®
- **æ€§èƒ½ä¼˜åŒ–**: ç«‹å³æ›´æ–° + é˜²æŠ–å¤‡ä»½æœºåˆ¶

### 4.3 äº‹ä»¶å¤„ç†ä¼˜å…ˆçº§
1. **èŠ‚ç‚¹åˆ é™¤**: æœ€é«˜ä¼˜å…ˆçº§ï¼Œç«‹å³å¤„ç†
2. **èŠ‚ç‚¹é…ç½®**: é«˜ä¼˜å…ˆçº§ï¼Œå½±å“é¢„è§ˆçº¿åˆ›å»º
3. **èŠ‚ç‚¹ç§»åŠ¨**: ä¸­ç­‰ä¼˜å…ˆçº§ï¼Œé˜²æŠ–å¤„ç†
4. **è¾¹è¿æ¥/æ–­å¼€**: ä½ä¼˜å…ˆçº§ï¼Œæ‰¹é‡å¤„ç†

## 5. é—®é¢˜æ ¹å› åˆ†æ

### 5.1 æ ¸å¿ƒé—®é¢˜å®šä½

#### 5.1.1 é¢„è§ˆçº¿æ¢å¤é€»è¾‘ç¼ºé™·
**é—®é¢˜ä½ç½®**: `restorePreviewLinesAfterNodeDeletion()` æ–¹æ³•

**å…·ä½“é—®é¢˜**:
1. **åˆ†æ”¯å®Œæ•´æ€§æ£€æŸ¥ä¸è¶³**: `ensureAllBranchesRestored()` æ–¹æ³•åœ¨èŠ‚ç‚¹åˆ é™¤åçš„æ¢å¤è¿‡ç¨‹ä¸­ï¼Œå¯¹åˆ†æµèŠ‚ç‚¹çš„åˆ†æ”¯å®Œæ•´æ€§æ£€æŸ¥å­˜åœ¨é€»è¾‘ç¼ºé™·
2. **çœŸå®è¿æ¥åˆ¤æ–­é”™è¯¯**: `checkBranchHasRealConnection()` æ–¹æ³•å¯èƒ½é”™è¯¯åˆ¤æ–­åˆ†æ”¯æ˜¯å¦æœ‰çœŸå®è¿æ¥
3. **æ¢å¤æ—¶æœºé—®é¢˜**: é¢„è§ˆçº¿æ¢å¤å¯èƒ½åœ¨èŠ‚ç‚¹åˆ é™¤äº‹ä»¶å®Œå…¨å¤„ç†å®Œæˆä¹‹å‰æ‰§è¡Œ

#### 5.1.2 çŠ¶æ€åŒæ­¥é—®é¢˜
**é—®é¢˜è¡¨ç°**:
- èŠ‚ç‚¹åˆ é™¤åï¼Œç›¸å…³æºèŠ‚ç‚¹çš„é¢„è§ˆçº¿çŠ¶æ€æœªæ­£ç¡®æ›´æ–°
- åˆ†æ”¯æ˜ å°„å…³ç³»æ¸…ç†ä¸å½»åº•
- ç¼“å­˜æ•°æ®ä¸å®é™…çŠ¶æ€ä¸ä¸€è‡´

#### 5.1.3 äº‹ä»¶å¤„ç†æ—¶åºé—®é¢˜
**æ—¶åºå†²çª**:
1. èŠ‚ç‚¹åˆ é™¤äº‹ä»¶è§¦å‘
2. è¾¹åˆ é™¤äº‹ä»¶åŒæ—¶è§¦å‘
3. é¢„è§ˆçº¿æ¢å¤é€»è¾‘æ‰§è¡Œ
4. çŠ¶æ€æ£€æŸ¥æ—¶å¯èƒ½è¯»å–åˆ°è¿‡æœŸæ•°æ®

### 5.2 åˆ†æµèŠ‚ç‚¹ç‰¹æ®Šæ€§åˆ†æ

#### 5.2.1 å¤šåˆ†æ”¯ç®¡ç†å¤æ‚æ€§
- **åˆ†æ”¯ç‹¬ç«‹æ€§**: æ¯ä¸ªåˆ†æ”¯æœ‰ç‹¬ç«‹çš„é¢„è§ˆçº¿å®ä¾‹
- **éƒ¨åˆ†æ¢å¤**: åˆ é™¤è¿æ¥åˆ°æŸä¸ªåˆ†æ”¯çš„èŠ‚ç‚¹æ—¶ï¼Œåªåº”æ¢å¤è¯¥åˆ†æ”¯çš„é¢„è§ˆçº¿
- **æ ‡ç­¾ä¿æŒ**: æ¢å¤æ—¶éœ€è¦ä¿æŒåŸæœ‰çš„åˆ†æ”¯æ ‡ç­¾ä¿¡æ¯

#### 5.2.2 é…ç½®ä¾èµ–æ€§
- **é…ç½®éªŒè¯**: åˆ†æµèŠ‚ç‚¹çš„é¢„è§ˆçº¿åˆ›å»ºä¾èµ–æœ‰æ•ˆçš„é…ç½®æ•°æ®
- **åŠ¨æ€åˆ†æ”¯**: é…ç½®å˜æ›´å¯èƒ½å¯¼è‡´åˆ†æ”¯æ•°é‡å˜åŒ–
- **çŠ¶æ€ä¸€è‡´æ€§**: é…ç½®çŠ¶æ€ä¸é¢„è§ˆçº¿çŠ¶æ€éœ€è¦ä¿æŒåŒæ­¥

## 6. ä¿®æ”¹æ–¹æ¡ˆè®¾è®¡

### 6.1 æ•´ä½“ä¿®æ”¹ç­–ç•¥

#### 6.1.1 åˆ†å±‚ä¿®å¤æ–¹æ¡ˆ
1. **æ ¸å¿ƒé€»è¾‘å±‚**: ä¿®å¤é¢„è§ˆçº¿æ¢å¤çš„æ ¸å¿ƒç®—æ³•
2. **çŠ¶æ€ç®¡ç†å±‚**: ä¼˜åŒ–çŠ¶æ€åŒæ­¥å’Œç¼“å­˜æœºåˆ¶
3. **äº‹ä»¶å¤„ç†å±‚**: æ”¹è¿›äº‹ä»¶å¤„ç†æ—¶åºå’Œä¼˜å…ˆçº§
4. **ç”¨æˆ·ç•Œé¢å±‚**: å¢å¼ºè§†è§‰åé¦ˆå’Œé”™è¯¯æç¤º

#### 6.1.2 æ¸è¿›å¼ä¿®å¤
- **Phase 1**: ä¿®å¤æ ¸å¿ƒæ¢å¤é€»è¾‘
- **Phase 2**: ä¼˜åŒ–çŠ¶æ€ç®¡ç†
- **Phase 3**: å®Œå–„äº‹ä»¶å¤„ç†
- **Phase 4**: å¢å¼ºç”¨æˆ·ä½“éªŒ

### 6.2 å…·ä½“ä¿®æ”¹æ–¹æ¡ˆ

#### 6.2.1 é¢„è§ˆçº¿æ¢å¤é€»è¾‘ä¼˜åŒ–

**æ–‡ä»¶**: `UnifiedPreviewLineManager.js`

**ä¿®æ”¹ç‚¹1**: `restorePreviewLinesAfterNodeDeletion()` æ–¹æ³•
```javascript
// ä¼˜åŒ–åçš„æ¢å¤é€»è¾‘
restorePreviewLinesAfterNodeDeletion(deletedNode, incomingEdges = null) {
    // 1. å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿åˆ é™¤äº‹ä»¶å®Œå…¨å¤„ç†å®Œæˆ
    setTimeout(() => {
        this.executePreviewLineRestore(deletedNode, incomingEdges)
    }, 100) // å¢åŠ å»¶è¿Ÿç¡®ä¿çŠ¶æ€ç¨³å®š
}

executePreviewLineRestore(deletedNode, incomingEdges) {
    // 2. è·å–æœ€æ–°çš„è¾¹ä¿¡æ¯
    const edges = this.getValidIncomingEdges(deletedNode, incomingEdges)
    
    // 3. åˆ†ç»„å¤„ç†æºèŠ‚ç‚¹
    const sourceNodeGroups = this.groupSourceNodesByType(edges)
    
    // 4. æŒ‰ç±»å‹åˆ†åˆ«å¤„ç†
    this.processBranchNodes(sourceNodeGroups.branch)
    this.processNormalNodes(sourceNodeGroups.normal)
}
```

**ä¿®æ”¹ç‚¹2**: `ensureAllBranchesRestored()` æ–¹æ³•å¢å¼º
```javascript
ensureAllBranchesRestored(node, isAfterNodeDeletion = false) {
    if (!this.isBranchNode(node)) return
    
    // 1. è·å–å½“å‰çœŸå®è¿æ¥çŠ¶æ€
    const currentConnections = this.getCurrentBranchConnections(node)
    
    // 2. è·å–æœŸæœ›çš„åˆ†æ”¯é…ç½®
    const expectedBranches = this.getNodeBranches(node)
    
    // 3. è®¡ç®—éœ€è¦æ¢å¤çš„åˆ†æ”¯
    const branchesToRestore = this.calculateBranchesToRestore(
        expectedBranches, 
        currentConnections, 
        isAfterNodeDeletion
    )
    
    // 4. é€ä¸ªæ¢å¤åˆ†æ”¯é¢„è§ˆçº¿
    branchesToRestore.forEach(branch => {
        this.restoreBranchPreviewLine(node, branch)
    })
}
```

#### 6.2.2 çŠ¶æ€ç®¡ç†ä¼˜åŒ–

**æ–°å¢çŠ¶æ€ç®¡ç†å™¨**: `PreviewLineStateManager.js`
```javascript
export class PreviewLineStateManager {
    constructor() {
        this.nodeStates = new Map() // èŠ‚ç‚¹çŠ¶æ€ç¼“å­˜
        this.branchStates = new Map() // åˆ†æ”¯çŠ¶æ€ç¼“å­˜
        this.pendingOperations = new Set() // å¾…å¤„ç†æ“ä½œ
    }
    
    // çŠ¶æ€åŒæ­¥æ–¹æ³•
    syncNodeState(nodeId, state) {
        this.nodeStates.set(nodeId, {
            ...state,
            timestamp: Date.now()
        })
    }
    
    // çŠ¶æ€éªŒè¯æ–¹æ³•
    validateState(nodeId) {
        const state = this.nodeStates.get(nodeId)
        if (!state) return false
        
        // æ£€æŸ¥çŠ¶æ€æ˜¯å¦è¿‡æœŸï¼ˆ5ç§’è¶…æ—¶ï¼‰
        return (Date.now() - state.timestamp) < 5000
    }
}
```

#### 6.2.3 äº‹ä»¶å¤„ç†ä¼˜åŒ–

**ä¿®æ”¹ç‚¹**: äº‹ä»¶å¤„ç†æ—¶åºæ§åˆ¶
```javascript
// æ–°å¢äº‹ä»¶é˜Ÿåˆ—ç®¡ç†
class EventQueueManager {
    constructor() {
        this.eventQueue = []
        this.processing = false
    }
    
    enqueue(event, priority = 0) {
        this.eventQueue.push({ event, priority, timestamp: Date.now() })
        this.eventQueue.sort((a, b) => b.priority - a.priority)
        
        if (!this.processing) {
            this.processQueue()
        }
    }
    
    async processQueue() {
        this.processing = true
        
        while (this.eventQueue.length > 0) {
            const { event } = this.eventQueue.shift()
            await this.processEvent(event)
        }
        
        this.processing = false
    }
}
```

#### 6.2.4 å¸é™„æœºåˆ¶å¢å¼º

**ä¿®æ”¹ç‚¹**: `GlobalDragStateManager.js`
```javascript
// å¢å¼ºå¸é™„æ£€æµ‹
enhancedSnapDetection(dragNode, targetPreviewLine) {
    // 1. è·ç¦»æ£€æµ‹
    const distance = this.calculateDistance(dragNode, targetPreviewLine)
    if (distance > this.snapThreshold) return false
    
    // 2. ç±»å‹å…¼å®¹æ€§æ£€æµ‹
    if (!this.isCompatibleConnection(dragNode, targetPreviewLine)) return false
    
    // 3. åˆ†æ”¯ç‰¹æ®Šæ€§æ£€æµ‹
    if (targetPreviewLine.isBranch) {
        return this.validateBranchSnap(dragNode, targetPreviewLine)
    }
    
    return true
}
```

### 6.3 é£é™©è¯„ä¼°å’Œå½±å“èŒƒå›´

#### 6.3.1 ä¿®æ”¹é£é™©ç­‰çº§
- **æ ¸å¿ƒé€»è¾‘ä¿®æ”¹**: ğŸ”´ é«˜é£é™© - å½±å“é¢„è§ˆçº¿æ ¸å¿ƒåŠŸèƒ½
- **çŠ¶æ€ç®¡ç†ä¼˜åŒ–**: ğŸŸ¡ ä¸­é£é™© - å¯èƒ½å½±å“æ€§èƒ½
- **äº‹ä»¶å¤„ç†æ”¹è¿›**: ğŸŸ¡ ä¸­é£é™© - å¯èƒ½å½±å“å“åº”æ—¶é—´
- **å¸é™„æœºåˆ¶å¢å¼º**: ğŸŸ¢ ä½é£é™© - ä¸»è¦æ˜¯åŠŸèƒ½å¢å¼º

#### 6.3.2 å½±å“èŒƒå›´åˆ†æ
**ç›´æ¥å½±å“**:
- åˆ†æµèŠ‚ç‚¹çš„é¢„è§ˆçº¿ç®¡ç†
- èŠ‚ç‚¹åˆ é™¤åçš„æ¢å¤é€»è¾‘
- æ‹–æ‹½å’Œå¸é™„ä½“éªŒ

**é—´æ¥å½±å“**:
- æ•´ä½“ç”»å¸ƒæ€§èƒ½
- å†…å­˜ä½¿ç”¨æƒ…å†µ
- ç”¨æˆ·æ“ä½œå“åº”æ—¶é—´

#### 6.3.3 å…¼å®¹æ€§è€ƒè™‘
- **å‘åå…¼å®¹**: ä¿æŒç°æœ‰APIæ¥å£ä¸å˜
- **æ•°æ®å…¼å®¹**: æ”¯æŒç°æœ‰çš„é¢„è§ˆçº¿æ•°æ®æ ¼å¼
- **åŠŸèƒ½å…¼å®¹**: ä¸å½±å“ç°æœ‰çš„é¢„è§ˆçº¿åŠŸèƒ½

## 7. æµ‹è¯•éªŒè¯æ–¹æ¡ˆ

### 7.1 å•å…ƒæµ‹è¯•

#### 7.1.1 æ ¸å¿ƒæ–¹æ³•æµ‹è¯•
```javascript
describe('PreviewLine Restoration', () => {
    test('should restore branch preview lines after node deletion', () => {
        // æµ‹è¯•åˆ†æ”¯é¢„è§ˆçº¿æ¢å¤
    })
    
    test('should handle multiple branch restoration correctly', () => {
        // æµ‹è¯•å¤šåˆ†æ”¯æ¢å¤
    })
    
    test('should preserve branch labels during restoration', () => {
        // æµ‹è¯•æ ‡ç­¾ä¿æŒ
    })
})
```

#### 7.1.2 çŠ¶æ€ç®¡ç†æµ‹è¯•
```javascript
describe('State Management', () => {
    test('should sync node states correctly', () => {
        // æµ‹è¯•çŠ¶æ€åŒæ­¥
    })
    
    test('should validate state expiration', () => {
        // æµ‹è¯•çŠ¶æ€è¿‡æœŸéªŒè¯
    })
})
```

### 7.2 é›†æˆæµ‹è¯•

#### 7.2.1 ç«¯åˆ°ç«¯æµ‹è¯•åœºæ™¯
1. **åœºæ™¯1**: åˆ›å»ºåˆ†æµèŠ‚ç‚¹ â†’ è¿æ¥å­èŠ‚ç‚¹ â†’ åˆ é™¤å­èŠ‚ç‚¹ â†’ éªŒè¯é¢„è§ˆçº¿æ¢å¤
2. **åœºæ™¯2**: å¤šåˆ†æ”¯åˆ†æµèŠ‚ç‚¹ â†’ éƒ¨åˆ†åˆ é™¤ â†’ éªŒè¯å‰©ä½™åˆ†æ”¯æ­£å¸¸
3. **åœºæ™¯3**: å¤æ‚æµç¨‹å›¾ â†’ æ‰¹é‡åˆ é™¤ â†’ éªŒè¯æ•´ä½“æ¢å¤

#### 7.2.2 æ€§èƒ½æµ‹è¯•
- **å“åº”æ—¶é—´**: èŠ‚ç‚¹åˆ é™¤åé¢„è§ˆçº¿æ¢å¤æ—¶é—´ < 200ms
- **å†…å­˜ä½¿ç”¨**: æ— å†…å­˜æ³„æ¼ï¼ŒçŠ¶æ€æ¸…ç†åŠæ—¶
- **å¹¶å‘å¤„ç†**: å¤šä¸ªèŠ‚ç‚¹åŒæ—¶åˆ é™¤çš„å¤„ç†èƒ½åŠ›

### 7.3 ç”¨æˆ·éªŒæ”¶æµ‹è¯•

#### 7.3.1 åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- âœ… åˆ†æµèŠ‚ç‚¹ä¸‹è¿æ¥çš„èŠ‚ç‚¹åˆ é™¤åï¼Œé¢„è§ˆçº¿æ­£ç¡®æ¢å¤
- âœ… åˆ†æ”¯æ ‡ç­¾ä¿¡æ¯ä¿æŒä¸å˜
- âœ… å¤šåˆ†æ”¯åœºæ™¯ä¸‹éƒ¨åˆ†æ¢å¤æ­£å¸¸
- âœ… æ‹–æ‹½å’Œå¸é™„ä½“éªŒæµç•…
- âœ… æ— æ˜æ˜¾æ€§èƒ½å½±å“

#### 7.3.2 è¾¹ç•Œæƒ…å†µæµ‹è¯•
- å¿«é€Ÿè¿ç»­åˆ é™¤å¤šä¸ªèŠ‚ç‚¹
- åˆ é™¤è¿‡ç¨‹ä¸­ç§»åŠ¨å…¶ä»–èŠ‚ç‚¹
- ç½‘ç»œå»¶è¿Ÿæƒ…å†µä¸‹çš„çŠ¶æ€åŒæ­¥
- å¤§å‹æµç¨‹å›¾çš„å¤„ç†èƒ½åŠ›

## 8. å®æ–½å»ºè®®

### 8.1 å®æ–½ä¼˜å…ˆçº§
1. **P0 - ç´§æ€¥**: ä¿®å¤æ ¸å¿ƒæ¢å¤é€»è¾‘ï¼Œè§£å†³é¢„è§ˆçº¿ä¸æ¢å¤çš„é—®é¢˜
2. **P1 - é«˜ä¼˜å…ˆçº§**: ä¼˜åŒ–çŠ¶æ€ç®¡ç†ï¼Œæå‡ç¨³å®šæ€§
3. **P2 - ä¸­ä¼˜å…ˆçº§**: æ”¹è¿›äº‹ä»¶å¤„ç†ï¼Œæå‡æ€§èƒ½
4. **P3 - ä½ä¼˜å…ˆçº§**: å¢å¼ºç”¨æˆ·ä½“éªŒï¼Œå®Œå–„ç»†èŠ‚

### 8.2 å®æ–½æ—¶é—´è§„åˆ’
- **Week 1**: æ ¸å¿ƒé€»è¾‘ä¿®å¤å’ŒåŸºç¡€æµ‹è¯•
- **Week 2**: çŠ¶æ€ç®¡ç†ä¼˜åŒ–å’Œé›†æˆæµ‹è¯•
- **Week 3**: äº‹ä»¶å¤„ç†æ”¹è¿›å’Œæ€§èƒ½æµ‹è¯•
- **Week 4**: ç”¨æˆ·ä½“éªŒä¼˜åŒ–å’ŒéªŒæ”¶æµ‹è¯•

### 8.3 ç›‘æ§å’Œå›æ»šç­–ç•¥

#### 8.3.1 ç›‘æ§æŒ‡æ ‡
- é¢„è§ˆçº¿æ¢å¤æˆåŠŸç‡
- èŠ‚ç‚¹åˆ é™¤å“åº”æ—¶é—´
- å†…å­˜ä½¿ç”¨æƒ…å†µ
- ç”¨æˆ·æ“ä½œé”™è¯¯ç‡

#### 8.3.2 å›æ»šå‡†å¤‡
- ä¿ç•™å½“å‰ç‰ˆæœ¬çš„å®Œæ•´å¤‡ä»½
- å‡†å¤‡å¿«é€Ÿå›æ»šè„šæœ¬
- å»ºç«‹é—®é¢˜å¿«é€Ÿå®šä½æœºåˆ¶
- åˆ¶å®šç´§æ€¥ä¿®å¤æµç¨‹

## 9. æ€»ç»“

æœ¬æŠ€æœ¯è¯„ä¼°æ–‡æ¡£å…¨é¢åˆ†æäº†åˆ†æµèŠ‚ç‚¹ä¸‹è¿æ¥èŠ‚ç‚¹åˆ é™¤åé¢„è§ˆçº¿æœªæ¢å¤çš„é—®é¢˜ï¼Œä»é¢„è§ˆçº¿ç®¡ç†ã€å¸é™„æœºåˆ¶ã€åŠ¨ä½œç›‘å¬ä¸‰ä¸ªç»´åº¦è¿›è¡Œäº†æ·±å…¥åˆ†æï¼Œè¯†åˆ«å‡ºäº†æ ¸å¿ƒé—®é¢˜å¹¶æå‡ºäº†ç³»ç»Ÿæ€§çš„è§£å†³æ–¹æ¡ˆã€‚

**å…³é”®å‘ç°**:
1. é¢„è§ˆçº¿æ¢å¤é€»è¾‘å­˜åœ¨æ—¶åºå’ŒçŠ¶æ€åŒæ­¥é—®é¢˜
2. åˆ†æµèŠ‚ç‚¹çš„å¤šåˆ†æ”¯ç®¡ç†éœ€è¦ç‰¹æ®Šå¤„ç†
3. äº‹ä»¶å¤„ç†æœºåˆ¶éœ€è¦ä¼˜åŒ–ä»¥æå‡ç¨³å®šæ€§

**è§£å†³æ–¹æ¡ˆ**:
1. åˆ†å±‚ä¿®å¤ç­–ç•¥ï¼Œä»æ ¸å¿ƒé€»è¾‘åˆ°ç”¨æˆ·ä½“éªŒå…¨é¢ä¼˜åŒ–
2. å¼•å…¥çŠ¶æ€ç®¡ç†å™¨ï¼Œæå‡çŠ¶æ€åŒæ­¥çš„å¯é æ€§
3. ä¼˜åŒ–äº‹ä»¶å¤„ç†é˜Ÿåˆ—ï¼Œè§£å†³æ—¶åºå†²çªé—®é¢˜

**é¢„æœŸæ•ˆæœ**:
- å½»åº•è§£å†³é¢„è§ˆçº¿ä¸æ¢å¤çš„é—®é¢˜
- æå‡åˆ†æµèŠ‚ç‚¹æ“ä½œçš„ç¨³å®šæ€§
- æ”¹å–„ç”¨æˆ·æ‹–æ‹½å’Œè¿æ¥ä½“éªŒ
- å¢å¼ºç³»ç»Ÿæ•´ä½“çš„å¥å£®æ€§

é€šè¿‡ç³»ç»Ÿæ€§çš„ä¿®æ”¹å’Œå……åˆ†çš„æµ‹è¯•éªŒè¯ï¼Œå¯ä»¥ç¡®ä¿é—®é¢˜å¾—åˆ°æ ¹æœ¬æ€§è§£å†³ï¼ŒåŒæ—¶ä¸å½±å“ç°æœ‰åŠŸèƒ½çš„ç¨³å®šæ€§ã€‚