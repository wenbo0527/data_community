# 外数中心实施计划

围绕评估中心、服务模块与预算监控三大领域，制定MVP→增强版→完整版的实施路径与任务拆分，确保功能闭环与体验达标。

## 1. 迭代目标与范围
- 目标：评估报告与任务闭环打通、预算监控与预警上线、服务申请可视化配置与任务看板。
- 范围：评估中心（引入/质量/价值/风险/监控）、服务申请与任务查询、预算总览与监控。

## 2. 里程碑规划
- M1 基础增强（已完成）
  - 档案统计与跳转、引入评估列表与详情接入。
- M2 评估中心增强（2周）
  - 统一报告结构（基础字段、指标项、结论、附件）。
  - 创建评估任务（任务服务对接），状态流转（草稿→审核→发布→归档）。
  - 质量/价值/风险页补充指标表与图表，趋势与评分计算。
- M3 服务与监控加强（2–3周）
  - 服务申请页接入 `createTask`，任务查询页接入 `getTasks`、`getTaskDetail`、`updateTaskProgress`；任务看板与筛选。
  - 监控中心完善燃尽/累计图、维度切换、阈值配置与告警列表；处置记录。
- M4 档案深化与联动（2周）
  - 档案详情结构化（产品/接口/供应商），联动评估与监控数据；统一风格与导航。

## 3. 任务拆分（按模块）
- 评估中心
  - 报告模型与UI统一：组件化描述卡、指标表、图表容器、附件区。
  - 任务创建与审批流：新建任务表单、状态标签、执行日志、发布/归档操作。
  - 维度页完善：质量/价值/风险评分表（含权重配置）、趋势图与对比图。
- 服务申请与任务
  - 申请表单分步化：服务类型、参数配置、校验与提交；调用 `createTask`。
  - 任务看板与列表：状态筛选、进度条、详情弹窗、失败重试与导出。
  - 结果展示：结果列表与详情、下载与格式转换、质量评分速览。
- 预算监控与预警
  - 总览卡片与趋势图：执行率、剩余预算、偏差率折线与柱状图。
  - 燃尽与累计：维度切换（月/季/年）与标题计算、聚合算法优化。
  - 预警策略：余额不足、超预算、异常波动；阈值配置与规则生效验证。

## 4. 接口与状态管理
- Store拆分建议：`external-data` 下分 `evaluation`、`service`、`monitor`、`archive` 子域；统一Loading/Error与分页状态。
- 接口封装：统一 `axios` 层参数构造（剔除空值）、错误兜底、类型定义（TS）。
- Mock对齐：补充 `/api/external-data-evaluation/*` 缺失字段；完善 `/api/external-data/burndown`、`/warning`；新增档案/服务必要mock。

## 5. 设计与组件
- 使用 Arco Design 统一表单、表格、卡片与弹窗；图表复用现有图表工具与封装。
- 组件化策略：查询条（表单）+ 数据表（分页）+ 详情弹窗；仪表卡 + 折线/柱状/饼图容器；任务卡 + 进度条。
- 路由与导航：面包屑与一级入口统一，快捷入口直达子模块。

## 6. 开发流程与质量保障
- 代码规范：TypeScript类型严谨、Composition API、模块内单一职责。
- 测试策略：单元（模型计算）、组件（渲染与交互）、端到端（路由与接口）；关键路径优先。
- 性能与稳定性：分页与懒加载、虚拟滚动；接口错误提示与兜底；图表数据抽样与聚合。

## 7. 验收标准
- 评估中心：列表/详情/任务创建与发布闭环；评分与趋势正确。
- 服务模块：申请创建任务成功、任务状态实时更新、详情与日志可见、结果可下载/预览。
- 预算模块：总览指标准确、趋势图与燃尽/累计切换正确、预警命中与处置记录完整。
- 性能与体验：响应<500ms、加载<2s、渲染<1s；无严重报错。

## 8. 时间计划与资源
- 总周期：~6–7周；每里程碑2周节奏（可并行穿插Mock与UI）。
- 参与角色：前端（2）、后端Mock维护（1）、产品/设计（1）、测试（1）。

## 9. 风险与依赖
- 依赖Mock与配置一致性；任务状态更新机制（轮询/推送）选择；图表大数据量渲染。
- 规避：统一参数构造、类型与字段映射、抽样与聚合策略、前端状态机与重试机制。

## 10. 总结
本计划将评估、服务与预算模块的关键能力分阶段落地，强调统一模型与闭环体验。按里程碑推进可快速交付可用版本，并在后续迭代中持续增强。

