import{_ as de,r as T,a as ne,c as V,f as a,w as e,F as g,e as n,o as c,j as o,m as L,d as y,h as u,g as E,t as _,i as k,l as ue,x as D,y as se,s as re,v as ie}from"./index-CsgcdrY7.js";import{I as ce}from"./index-D3r115Ij.js";const w=h=>(re("data-v-d65faa7b"),h=h(),ie(),h),_e={class:"card-header"},pe={class:"data-name"},fe={class:"card-content"},me={class:"info-item"},ve=w(()=>u("span",{class:"label"},"接口编号：",-1)),ye={class:"info-item"},be=w(()=>u("span",{class:"label"},"数据管理：",-1)),Ie={class:"info-item"},Te=w(()=>u("span",{class:"label"},"上线时间：",-1)),Ve={class:"card-header"},ge={class:"data-name"},Ce={class:"card-content"},ke={class:"info-item"},we=w(()=>u("span",{class:"label"},"接口编号：",-1)),Se={class:"info-item"},he=w(()=>u("span",{class:"label"},"数据管理：",-1)),xe={class:"info-item"},Ue=w(()=>u("span",{class:"label"},"上线时间：",-1)),Ne={__name:"index",setup(h){T(!1);const b=T(""),C=T(!1),r=T({dataName:"",interfaces:[{type:"主接口",interfaceId:""}],dataType:"",subType:"",dataManagement:"登陆账号",onlineTime:""}),i=T({dataType:void 0,dataCategory:void 0,supplier:""}),x=T([{interfaceId:"WS_CELLPHONE",backupInterfaceId:"WS_CELLPHONE_BACKUP",dataManagement:"张三",onlineTime:"2023-12-08",dataType:"核验类",subType:"身份核验类",isPrimary:!0,isFavorite:!1,dataName:"手机号核验服务"},{interfaceId:"WS_CREDIT_SCORE_BACKUP",primaryInterfaceId:"WS_CREDIT_SCORE",dataManagement:"张三",onlineTime:"2023-12-10",dataType:"评分类",subType:"信用评分",isPrimary:!1,isFavorite:!0,dataName:"个人信用评分"},{interfaceId:"WS_USER_TAGS",backupInterfaceId:"WS_USER_TAGS_BACKUP",dataManagement:"张三",onlineTime:"2023-12-12",dataType:"标签类",subType:"用户画像",isPrimary:!0,isFavorite:!1,dataName:"用户标签服务"},{interfaceId:"WS_BLACK_LIST",backupInterfaceId:"WS_BLACK_LIST_BACKUP",dataManagement:"张三",onlineTime:"2023-12-15",dataType:"名单类",subType:"风险名单",isPrimary:!0,isFavorite:!1,dataName:"风险名单查询"},{interfaceId:"WS_PRICE_EVAL_BACKUP",primaryInterfaceId:"WS_PRICE_EVAL",dataManagement:"张三",onlineTime:"2023-12-18",dataType:"价格评估类",subType:"资产评估",isPrimary:!1,isFavorite:!0,dataName:"资产价格评估"}]),R=d=>{d.isFavorite=!d.isFavorite},z=[{title:"接口类型",dataIndex:"type",width:120,editable:!1},{title:"接口编号",dataIndex:"interfaceId",slotName:"interfaceId"},{title:"操作",slotName:"operations",width:100}],q=()=>{const d=r.value.interfaces.filter(t=>t.type.includes("备接口")).length;r.value.interfaces.push({type:`备接口${d+1}`,interfaceId:""})},J=d=>{r.value.interfaces.splice(d,1)},Q=()=>{const d=r.value.interfaces.find(p=>p.type==="主接口"),t=r.value.interfaces.filter(p=>p.type.includes("备接口"));x.value.push({...r.value,interfaceId:(d==null?void 0:d.interfaceId)||"",backupInterfaceId:t.map(p=>p.interfaceId).join(","),isPrimary:!0,isFavorite:!1}),C.value=!1,r.value={dataName:"",interfaceId:"",dataType:"",subType:"",dataManagement:"登陆账号",onlineTime:""}},$=ne(()=>{let d=x.value;return b.value&&(d=d.filter(t=>Object.values(t).some(p=>String(p).toLowerCase().includes(b.value.toLowerCase())))),i.value.dataType&&i.value.dataType!=="不限"&&(d=d.filter(t=>t.dataType===i.value.dataType)),d}),K=d=>({核验类:"blue",评分类:"orange",标签类:"green",名单类:"red",价格评估类:"purple",身份核验类:"cyan",信用评分:"gold",用户画像:"lime",风险名单:"magenta",资产评估:"geekblue"})[d]||"gray",O=T(""),X=(d,t)=>t.value.toLowerCase().includes(d.toLowerCase())||t._children.toLowerCase().includes(d.toLowerCase()),M=d=>{b.value=d};return(d,t)=>{const p=n("a-button"),A=n("a-input-search"),S=n("a-space"),f=n("a-radio"),j=n("a-radio-group"),m=n("a-form-item"),s=n("a-option"),I=n("a-select"),B=n("a-input"),W=n("a-form"),Y=n("router-link"),G=n("a-tag"),U=n("a-link"),N=n("a-card"),F=n("a-col"),P=n("a-row"),H=n("a-tab-pane"),Z=n("a-tabs"),ee=n("a-layout-content"),ae=n("a-layout"),le=n("a-table"),te=n("a-date-picker"),oe=n("a-modal");return c(),V(g,null,[a(ae,null,{default:e(()=>[a(ee,{class:"content"},{default:e(()=>[a(Z,{"default-active-key":"1",type:"rounded"},{default:e(()=>[a(H,{key:"1",title:"产品页面"},{default:e(()=>[a(P,{gutter:[24,24]},{default:e(()=>[a(F,{span:24},{default:e(()=>[a(N,{title:"外部数据",bordered:!1},{extra:e(()=>[a(S,null,{default:e(()=>[a(p,{type:"primary",onClick:t[0]||(t[0]=l=>C.value=!0)},{icon:e(()=>[a(k(D))]),default:e(()=>[o(" 新增产品 ")]),_:1}),a(A,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=l=>b.value=l),placeholder:"搜索数据",style:{width:"200px"},onSearch:M},null,8,["modelValue"])]),_:1})]),default:e(()=>[a(W,{model:i.value,layout:"inline",class:"filter-form"},{default:e(()=>[a(m,{field:"dataType",label:"数源种类"},{default:e(()=>[a(j,{modelValue:i.value.dataType,"onUpdate:modelValue":t[2]||(t[2]=l=>i.value.dataType=l),type:"button",style:{"margin-bottom":"8px"}},{default:e(()=>[a(f,{value:"不限"},{default:e(()=>[o("不限")]),_:1}),a(f,{value:"核验类"},{default:e(()=>[o("核验类")]),_:1}),a(f,{value:"评分类"},{default:e(()=>[o("评分类")]),_:1}),a(f,{value:"标签类"},{default:e(()=>[o("标签类")]),_:1}),a(f,{value:"名单类"},{default:e(()=>[o("名单类")]),_:1}),a(f,{value:"价格评估类"},{default:e(()=>[o("价格评估类")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,{field:"dataCategory",label:"数源分类"},{default:e(()=>[a(I,{modelValue:i.value.dataCategory,"onUpdate:modelValue":t[3]||(t[3]=l=>i.value.dataCategory=l),placeholder:"不限",style:{width:"120px"},"allow-clear":""},{default:e(()=>[a(s,{value:"不限"},{default:e(()=>[o("不限")]),_:1}),a(s,{value:"选项2"},{default:e(()=>[o("选项2")]),_:1}),a(s,{value:"选项3"},{default:e(()=>[o("选项3")]),_:1}),a(s,{value:"选项4"},{default:e(()=>[o("选项4")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,{field:"supplier",label:"供应商"},{default:e(()=>[a(B,{modelValue:i.value.supplier,"onUpdate:modelValue":t[4]||(t[4]=l=>i.value.supplier=l),placeholder:"供应商A",style:{width:"200px"},"allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a(P,{gutter:[16,16]},{default:e(()=>[(c(!0),V(g,null,L($.value,l=>(c(),y(F,{xs:24,sm:12,md:8,lg:6,key:l.interfaceId},{default:e(()=>[a(N,{bordered:!0,class:"data-card",hoverable:""},{title:e(()=>[u("div",_e,[u("span",pe,[a(Y,{to:`/discovery/external/detail/${l.interfaceId}`},{default:e(()=>[o(_(l.dataName||"外部数据"),1)]),_:2},1032,["to"])]),a(S,null,{default:e(()=>[a(G,{color:K(l.dataType)},{default:e(()=>[o(_(l.dataType),1)]),_:2},1032,["color"]),l.subType?(c(),y(G,{key:0,color:K(l.subType)},{default:e(()=>[o(_(l.subType),1)]),_:2},1032,["color"])):E("",!0),l.isFavorite?(c(),y(k(ue),{key:1,style:{color:"#FFD700",cursor:"pointer"},onClick:v=>R(l)},null,8,["onClick"])):(c(),y(k(ce),{key:2,style:{cursor:"pointer"},onClick:v=>R(l)},null,8,["onClick"]))]),_:2},1024)])]),default:e(()=>[u("div",fe,[u("div",me,[ve,a(S,null,{default:e(()=>[l.isPrimary?(c(),V(g,{key:0},[a(U,{style:{color:"#165DFF"}},{default:e(()=>[o(_(l.interfaceId),1)]),_:2},1024),l.backupInterfaceId?(c(),y(U,{key:0,style:{color:"#86909C"}},{default:e(()=>[o(_(l.backupInterfaceId),1)]),_:2},1024)):E("",!0)],64)):(c(),V(g,{key:1},[l.primaryInterfaceId?(c(),y(U,{key:0,style:{color:"#165DFF"}},{default:e(()=>[o(_(l.primaryInterfaceId),1)]),_:2},1024)):E("",!0),a(U,{style:{color:"#86909C"}},{default:e(()=>[o(_(l.interfaceId),1)]),_:2},1024)],64))]),_:2},1024)]),u("div",ye,[be,u("span",null,_(l.dataManagement),1)]),u("div",Ie,[Te,u("span",null,_(l.onlineTime),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(H,{key:"2",title:"接口页面"},{default:e(()=>[a(P,{gutter:[24,24]},{default:e(()=>[a(F,{span:24},{default:e(()=>[a(N,{title:"接口列表",bordered:!1},{extra:e(()=>[a(S,null,{default:e(()=>[a(I,{modelValue:O.value,"onUpdate:modelValue":t[5]||(t[5]=l=>O.value=l),placeholder:"关联产品",style:{width:"200px"},"allow-clear":""},{default:e(()=>[(c(!0),V(g,null,L(x.value.value,l=>(c(),y(s,{key:l.interfaceId,value:l.interfaceId},{default:e(()=>[o(_(l.dataName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(A,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=l=>b.value=l),placeholder:"搜索数据",style:{width:"200px"},onSearch:M},null,8,["modelValue"])]),_:1})]),"product-extra":e(()=>[a(S,null,{default:e(()=>[a(p,{type:"primary",onClick:t[7]||(t[7]=l=>C.value=!0)},{icon:e(()=>[a(k(D))]),default:e(()=>[o(" 新增产品 ")]),_:1}),a(A,{modelValue:b.value,"onUpdate:modelValue":t[8]||(t[8]=l=>b.value=l),placeholder:"搜索数据",style:{width:"200px"},onSearch:M},null,8,["modelValue"])]),_:1})]),default:e(()=>[a(W,{model:i.value,layout:"inline",class:"filter-form"},{default:e(()=>[a(m,{field:"dataType",label:"数源种类"},{default:e(()=>[a(j,{modelValue:i.value.dataType,"onUpdate:modelValue":t[9]||(t[9]=l=>i.value.dataType=l),type:"button",style:{"margin-bottom":"8px"}},{default:e(()=>[a(f,{value:"不限"},{default:e(()=>[o("不限")]),_:1}),a(f,{value:"核验类"},{default:e(()=>[o("核验类")]),_:1}),a(f,{value:"评分类"},{default:e(()=>[o("评分类")]),_:1}),a(f,{value:"标签类"},{default:e(()=>[o("标签类")]),_:1}),a(f,{value:"名单类"},{default:e(()=>[o("名单类")]),_:1}),a(f,{value:"价格评估类"},{default:e(()=>[o("价格评估类")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,{field:"dataCategory",label:"数源分类"},{default:e(()=>[a(I,{modelValue:i.value.dataCategory,"onUpdate:modelValue":t[10]||(t[10]=l=>i.value.dataCategory=l),placeholder:"不限",style:{width:"120px"},"allow-clear":""},{default:e(()=>[a(s,{value:"不限"},{default:e(()=>[o("不限")]),_:1}),a(s,{value:"选项2"},{default:e(()=>[o("选项2")]),_:1}),a(s,{value:"选项3"},{default:e(()=>[o("选项3")]),_:1}),a(s,{value:"选项4"},{default:e(()=>[o("选项4")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,{field:"supplier",label:"供应商"},{default:e(()=>[a(B,{modelValue:i.value.supplier,"onUpdate:modelValue":t[11]||(t[11]=l=>i.value.supplier=l),placeholder:"供应商A",style:{width:"200px"},"allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),a(P,{gutter:[16,16]},{default:e(()=>[(c(!0),V(g,null,L($.value,l=>(c(),y(F,{xs:24,sm:12,md:8,lg:6,key:l.interfaceId},{default:e(()=>[a(N,{bordered:!0,class:"data-card",hoverable:""},{title:e(()=>[u("div",Ve,[u("span",ge,_(l.dataName||"外部数据"),1)])]),default:e(()=>[u("div",Ce,[u("div",ke,[we,u("span",null,_(l.interfaceId),1)]),u("div",Se,[he,u("span",null,_(l.dataManagement),1)]),u("div",xe,[Ue,u("span",null,_(l.onlineTime),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(oe,{visible:C.value,"onUpdate:visible":t[17]||(t[17]=l=>C.value=l),title:"新增产品",onOk:Q,onCancel:t[18]||(t[18]=l=>C.value=!1)},{default:e(()=>[a(W,{model:r.value,layout:"vertical"},{default:e(()=>[a(m,{label:"产品名称",field:"dataName"},{default:e(()=>[a(B,{modelValue:r.value.dataName,"onUpdate:modelValue":t[12]||(t[12]=l=>r.value.dataName=l),placeholder:"请输入产品名称"},null,8,["modelValue"])]),_:1}),a(m,{label:"接口列表",field:"interfaces"},{default:e(()=>[a(le,{data:r.value.interfaces,columns:z,size:"small"},{interfaceId:e(({record:l})=>[a(I,{modelValue:l.interfaceId,"onUpdate:modelValue":v=>l.interfaceId=v,placeholder:"请选择或搜索接口编号","allow-search":"","allow-clear":"","filter-option":X},{default:e(()=>[(c(!0),V(g,null,L(x.value.value,v=>(c(),y(s,{key:v.interfaceId,value:v.interfaceId},{default:e(()=>[o(_(v.dataName)+" ("+_(v.interfaceId)+") ",1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),operations:e(({record:l,rowIndex:v})=>[a(p,{type:"text",onClick:q},{icon:e(()=>[a(k(D))]),_:1}),v>0?(c(),y(p,{key:0,type:"text",status:"danger",onClick:Fe=>J(v)},{icon:e(()=>[a(k(se))]),_:2},1032,["onClick"])):E("",!0)]),_:1},8,["data"])]),_:1}),a(m,{label:"数源种类",field:"dataType"},{default:e(()=>[a(I,{modelValue:r.value.dataType,"onUpdate:modelValue":t[13]||(t[13]=l=>r.value.dataType=l),placeholder:"请选择数据类型"},{default:e(()=>[a(s,{value:"核验类"},{default:e(()=>[o("核验类")]),_:1}),a(s,{value:"评分类"},{default:e(()=>[o("评分类")]),_:1}),a(s,{value:"标签类"},{default:e(()=>[o("标签类")]),_:1}),a(s,{value:"名单类"},{default:e(()=>[o("名单类")]),_:1}),a(s,{value:"价格评估类"},{default:e(()=>[o("价格评估类")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"数源分类",field:"subType"},{default:e(()=>[a(I,{modelValue:r.value.subType,"onUpdate:modelValue":t[14]||(t[14]=l=>r.value.subType=l),placeholder:"请选择子类型"},{default:e(()=>[a(s,{value:"身份核验类"},{default:e(()=>[o("身份核验类")]),_:1}),a(s,{value:"信用评分"},{default:e(()=>[o("信用评分")]),_:1}),a(s,{value:"用户画像"},{default:e(()=>[o("用户画像")]),_:1}),a(s,{value:"风险名单"},{default:e(()=>[o("风险名单")]),_:1}),a(s,{value:"资产评估"},{default:e(()=>[o("资产评估")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"数据管理",field:"dataManagement"},{default:e(()=>[a(I,{modelValue:r.value.dataManagement,"onUpdate:modelValue":t[15]||(t[15]=l=>r.value.dataManagement=l),placeholder:"请选择数据管理员"},{default:e(()=>[a(s,{value:"张三"},{default:e(()=>[o("张三")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"上线时间",field:"onlineTime"},{default:e(()=>[a(te,{modelValue:r.value.onlineTime,"onUpdate:modelValue":t[16]||(t[16]=l=>r.value.onlineTime=l),style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])],64)}}},Ee=de(Ne,[["__scopeId","data-v-d65faa7b"]]);export{Ee as default};
