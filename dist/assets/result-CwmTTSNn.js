import{_ as W,r as d,a as X,d as _,w as t,e as u,o as s,f as a,c as g,F as x,m as b,j as i,t as v,h as V,M as h}from"./index-CsgcdrY7.js";const Y={__name:"result",props:{planName:{type:String,required:!0}},setup(Z){const l=d({dataProduct:"",creditProduct:"",scene:"",period:"",dateRange:[],status:""}),C=d(["数据产品A","数据产品B","数据产品C"]),R=d(["信贷产品A","信贷产品B","信贷产品C"]),I=d(["场景A","场景B","场景C"]),w=d(["1","3","6","12"]),A=d(["已启动","已完成","已终止"]),N=d([{dataProduct:"数据产品A",creditProduct:"信贷产品B",scene:"场景A",condition:"条件1",period:"3",batchNo:"批次001",plannedAmount:1e3,actualAmount:980,acquisitionRate:"98%",successRate:"95%",progress:"90%",status:"已启动",finishTime:"2024-01-01 15:00:00"},{dataProduct:"数据产品B",creditProduct:"信贷产品C",scene:"场景B",condition:"条件2",period:"1",batchNo:"批次002",plannedAmount:2e3,actualAmount:1950,acquisitionRate:"97.5%",successRate:"96%",progress:"100%",status:"已完成",finishTime:"2024-01-02 21:00:00"}]),B=[{title:"数据产品",dataIndex:"dataProduct"},{title:"信贷产品",dataIndex:"creditProduct"},{title:"场景",dataIndex:"scene"},{title:"条件",dataIndex:"condition"},{title:"期数",dataIndex:"period"},{title:"陪跑批次",dataIndex:"batchNo"},{title:"计划陪跑量",dataIndex:"plannedAmount"},{title:"实际陪跑量",dataIndex:"actualAmount"},{title:"取得率",dataIndex:"acquisitionRate"},{title:"成功率",dataIndex:"successRate"},{title:"跑批进度",dataIndex:"progress"},{title:"当前状态",dataIndex:"status"},{title:"实际完成时间",dataIndex:"finishTime"},{title:"操作",slotName:"operations"}],P=d(!1),p=d([]),k=d([]),f=d(!1),T=X(()=>N.value.filter(n=>(!l.value.dataProduct||n.dataProduct===l.value.dataProduct)&&(!l.value.creditProduct||n.creditProduct===l.value.creditProduct)&&(!l.value.scene||n.scene===l.value.scene)&&(!l.value.period||n.period===l.value.period)&&(!l.value.status||n.status===l.value.status))),U=()=>{P.value=!0,setTimeout(()=>{P.value=!1},500)},S=()=>{l.value={dataProduct:"",creditProduct:"",scene:"",period:"",dateRange:[],status:""}},q=()=>{h.success("导出成功")},z=()=>{h.info("重跑操作已触发")},D=n=>{h.info(`重跑陪跑批次：${n.batchNo}`)},E=(n,o)=>{p.value=n,k.value=o.filter(r=>["已启动","未执行"].includes(r.status))},F=()=>{if(!p.value.length){h.warning("请选择要终止的记录");return}f.value=!0},M=()=>{k.value.forEach(n=>{n.status="已终止",n._animate=!0,setTimeout(()=>{n._animate=!1},1e3)}),h.success({content:"终止操作成功",duration:2e3}),f.value=!1};return(n,o)=>{const r=u("a-option"),y=u("a-select"),c=u("a-form-item"),$=u("a-range-picker"),m=u("a-button"),K=u("a-space"),j=u("a-form"),L=u("a-table"),O=u("a-list"),G=u("a-modal"),H=u("a-card"),J=u("a-layout-content"),Q=u("a-layout");return s(),_(Q,null,{default:t(()=>[a(J,{class:"content"},{default:t(()=>[a(H,{title:"陪跑计划结果",bordered:!1},{default:t(()=>[a(j,{model:l.value,layout:"inline"},{default:t(()=>[a(c,{field:"dataProduct",label:"数据产品"},{default:t(()=>[a(y,{modelValue:l.value.dataProduct,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.dataProduct=e),placeholder:"请选择数据产品",style:{width:"200px"}},{default:t(()=>[(s(!0),g(x,null,b(C.value,e=>(s(),_(r,{key:e,value:e},{default:t(()=>[i(v(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,{field:"creditProduct",label:"信贷产品"},{default:t(()=>[a(y,{modelValue:l.value.creditProduct,"onUpdate:modelValue":o[1]||(o[1]=e=>l.value.creditProduct=e),placeholder:"请选择信贷产品",style:{width:"200px"}},{default:t(()=>[(s(!0),g(x,null,b(R.value,e=>(s(),_(r,{key:e,value:e},{default:t(()=>[i(v(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,{field:"scene",label:"场景"},{default:t(()=>[a(y,{modelValue:l.value.scene,"onUpdate:modelValue":o[2]||(o[2]=e=>l.value.scene=e),placeholder:"请选择场景",style:{width:"200px"}},{default:t(()=>[(s(!0),g(x,null,b(I.value,e=>(s(),_(r,{key:e,value:e},{default:t(()=>[i(v(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,{field:"period",label:"期数"},{default:t(()=>[a(y,{modelValue:l.value.period,"onUpdate:modelValue":o[3]||(o[3]=e=>l.value.period=e),placeholder:"请选择期数",style:{width:"200px"}},{default:t(()=>[(s(!0),g(x,null,b(w.value,e=>(s(),_(r,{key:e,value:e},{default:t(()=>[i(v(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,{field:"dateRange",label:"陪跑日期"},{default:t(()=>[a($,{modelValue:l.value.dateRange,"onUpdate:modelValue":o[4]||(o[4]=e=>l.value.dateRange=e),style:{width:"300px"}},null,8,["modelValue"])]),_:1}),a(c,{field:"status",label:"当前状态"},{default:t(()=>[a(y,{modelValue:l.value.status,"onUpdate:modelValue":o[5]||(o[5]=e=>l.value.status=e),placeholder:"请选择状态",style:{width:"200px"}},{default:t(()=>[(s(!0),g(x,null,b(A.value,e=>(s(),_(r,{key:e,value:e},{default:t(()=>[i(v(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,null,{default:t(()=>[a(K,null,{default:t(()=>[a(m,{type:"primary",onClick:U},{default:t(()=>[i("查询")]),_:1}),a(m,{onClick:S},{default:t(()=>[i("重置")]),_:1}),a(m,{type:"outline",onClick:q},{default:t(()=>[i("导出")]),_:1}),a(m,{type:"primary",status:"warning",onClick:z},{default:t(()=>[i("重跑")]),_:1}),a(m,{type:"primary",status:"danger",onClick:F,disabled:!p.value.length,title:p.value.length?"":"请选择要终止的记录"},{default:t(()=>[i("终止")]),_:1},8,["disabled","title"])]),_:1})]),_:1})]),_:1},8,["model"]),a(L,{columns:B,data:T.value,pagination:{pageSize:10},loading:P.value,"row-key":"batchNo","row-selection":{type:"checkbox",selectedRowKeys:p.value,showCheckedAll:!0},onSelectionChange:E},{operations:t(({record:e})=>[a(m,{type:"text",size:"small",onClick:ee=>D(e)},{default:t(()=>[i("重跑")]),_:2},1032,["onClick"])]),_:1},8,["data","loading","row-selection"]),a(G,{visible:f.value,"onUpdate:visible":o[6]||(o[6]=e=>f.value=e),title:"确认终止",onOk:M,onCancel:o[7]||(o[7]=e=>f.value=!1)},{default:t(()=>[V("div",null,[V("p",null,"确定要终止以下 "+v(p.value.length)+" 条记录吗？",1),a(O,{size:"small",data:k.value.map(e=>e.batchNo+" - "+e.dataProduct)},null,8,["data"])])]),_:1},8,["visible"])]),_:1})]),_:1})]),_:1})}}},ae=W(Y,[["__scopeId","data-v-f41259f6"]]);export{ae as default};
