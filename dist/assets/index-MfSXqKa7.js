import{A as K,B as D,c as _,o as i,h as n,C as Q,n as X,D as Y,a as U,E as ee,r as h,p as te,f as e,w as t,e as c,j as u,i as g,z as ae,d as C,F as j,m as q,t as T,$ as oe,g as le,a1 as ne,M as y,s as se,v as ce,_ as ie}from"./index-CsgcdrY7.js";import{I as re}from"./index-CrAnsjHE.js";const de=D({name:"IconSend",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:o=>["butt","round","square"].includes(o)},strokeLinejoin:{type:String,default:"miter",validator:o=>["arcs","bevel","miter","miter-clip","round"].includes(o)},rotate:Number,spin:Boolean},emits:{click:o=>!0},setup(o,{emit:r}){const a=Y("icon"),f=U(()=>[a,`${a}-send`,{[`${a}-spin`]:o.spin}]),w=U(()=>{const d={};return o.size&&(d.fontSize=ee(o.size)?`${o.size}px`:o.size),o.rotate&&(d.transform=`rotate(${o.rotate}deg)`),d});return{cls:f,innerStyle:w,onClick:d=>{r("click",d)}}}}),ue=["stroke-width","stroke-linecap","stroke-linejoin"];function pe(o,r,a,f,w,N){return i(),_("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:X(o.cls),style:Q(o.innerStyle),"stroke-width":o.strokeWidth,"stroke-linecap":o.strokeLinecap,"stroke-linejoin":o.strokeLinejoin,onClick:r[0]||(r[0]=(...d)=>o.onClick&&o.onClick(...d))},r[1]||(r[1]=[n("path",{d:"m14 24-7-5V7l34 17L7 41V29l7-5Zm0 0h25","stroke-miterlimit":"3.864"},null,-1)]),14,ue)}var M=K(de,[["render",pe]]);const me=Object.assign(M,{install:(o,r)=>{var a;const f=(a=r==null?void 0:r.iconPrefix)!=null?a:"";o.component(f+M.name,M)}}),k=o=>(se("data-v-cb32aa51"),o=o(),ce(),o),_e={class:"manual-sms-container"},fe=k(()=>n("div",{class:"header-section"},[n("div",{class:"title-area"},[n("h2",{class:"page-title"},"短信手工下发"),n("p",{class:"page-description"},"支持手动输入或批量上传名单，选择短信模板进行下发")])],-1)),ve={class:"content-section"},ke={key:0,class:"manual-input-area"},ye={class:"input-tips"},be=k(()=>n("span",null,"每行一个手机号，最多支持100个号码",-1)),he={key:1,class:"upload-area"},ge={class:"upload-button"},we=k(()=>n("div",{class:"upload-text"},"点击或拖拽文件到此处上传",-1)),xe=k(()=>n("div",{class:"upload-hint"},"支持 .xlsx、.xls、.csv 格式文件",-1)),Ve={class:"upload-tips"},Se=k(()=>n("span",{class:"tip-text"},"文件中必须包含手机号码列",-1)),Ce={key:1,class:"create-template-form"},Te={class:"template-content-area"},Ne={class:"template-counter"},$e={class:"preview-content"},Ie={key:0,class:"preview-message"},ze={key:1,class:"preview-placeholder"},Le=k(()=>n("p",null,"请先选择或创建短信模板",-1)),Me={class:"params-list"},Ue=k(()=>n("div",{class:"params-hint"},"点击参数插入到模板内容中",-1)),Be=D({__name:"index",setup(o){const r=h(!1),a=te({inputType:"manual",manualNumbers:"",templateMode:"select",templateId:"",newTemplate:{name:"",content:""}}),f=h([{id:"1",name:"会员生日祝福",content:"尊敬的${name}，祝您生日快乐！感谢您一直以来对我们的支持。"},{id:"2",name:"活动邀请",content:"尊敬的会员，我们将于${date}举办${activity}活动，诚邀您的参与。"}]),w=h([{key:"customerName",label:"客户姓名"},{key:"idNumber",label:"身份证号"},{key:"riskLevel",label:"风险等级"},{key:"riskScore",label:"风险评分"},{key:"warningTime",label:"预警时间"},{key:"warningType",label:"预警类型"},{key:"accountStatus",label:"账户状态"}]),N=p=>{const s=document.querySelector(".create-template-form textarea");if(s){const m=s.selectionStart,b=a.newTemplate.content,x=b.slice(0,m)+"${"+p+"}"+b.slice(m);a.newTemplate.content=x,setTimeout(()=>{s.focus(),s.setSelectionRange(m+p.length+3,m+p.length+3)},0)}},d=U(()=>a.templateMode==="select"?f.value.find(p=>p.id===a.templateId):a.newTemplate),R=async p=>{try{y.success("文件上传成功")}catch{y.error("文件上传失败")}},E=async()=>{try{y.success("测试发送成功")}catch{y.error("测试发送失败")}},F=async()=>{try{y.success("短信下发成功")}catch{y.error("短信下发失败")}};return h([{key:"customerName",label:"客户姓名"},{key:"idNumber",label:"身份证号"},{key:"accountNo",label:"账号"},{key:"balance",label:"余额"},{key:"riskLevel",label:"风险等级"}]),h([{key:"bankName",label:"银行名称"},{key:"branchName",label:"支行名称"},{key:"servicePhone",label:"服务电话"},{key:"currentDate",label:"当前日期"}]),(p,s)=>{const m=c("a-radio"),b=c("a-radio-group"),x=c("a-textarea"),B=c("a-tag"),W=c("a-upload"),$=c("a-button"),A=c("a-divider"),V=c("a-space"),I=c("a-form-item"),O=c("a-option"),Z=c("a-select"),G=c("a-input"),H=c("a-form"),S=c("a-card"),v=c("a-col"),P=c("a-statistic"),z=c("a-row"),J=c("a-spin");return i(),_("div",_e,[e(J,{loading:r.value,class:"spin-container",tip:"加载中..."},{default:t(()=>[fe,n("div",ve,[e(z,{gutter:[24,24]},{default:t(()=>[e(v,{span:24,lg:16},{default:t(()=>[e(S,{class:"form-card",bordered:!1},{default:t(()=>[e(H,{model:a,layout:"vertical"},{default:t(()=>[e(I,{label:"接收人信息",required:""},{default:t(()=>[e(V,{direction:"vertical",size:16,fill:""},{default:t(()=>[e(b,{modelValue:a.inputType,"onUpdate:modelValue":s[0]||(s[0]=l=>a.inputType=l),type:"button"},{default:t(()=>[e(m,{value:"manual"},{default:t(()=>[u("手动输入")]),_:1}),e(m,{value:"upload"},{default:t(()=>[u("批量上传")]),_:1})]),_:1},8,["modelValue"]),a.inputType==="manual"?(i(),_("div",ke,[e(x,{modelValue:a.manualNumbers,"onUpdate:modelValue":s[1]||(s[1]=l=>a.manualNumbers=l),placeholder:"请输入手机号码，多个号码请用换行分隔","auto-size":{minRows:4,maxRows:8}},null,8,["modelValue"]),n("div",ye,[e(B,{color:"blue"},{default:t(()=>[u("提示")]),_:1}),be])])):(i(),_("div",he,[e(W,{"custom-request":R,"show-file-list":!0,limit:1,accept:".xlsx,.xls,.csv"},{"upload-button":t(()=>[n("div",ge,[e(g(ae)),we,xe])]),_:1}),n("div",Ve,[e(V,null,{default:t(()=>[e($,{type:"text",size:"small"},{icon:t(()=>[e(g(re))]),default:t(()=>[u(" 下载模板 ")]),_:1}),e(A,{direction:"vertical"}),Se]),_:1})])]))]),_:1})]),_:1}),e(I,{label:"短信模板",required:""},{default:t(()=>[e(V,{direction:"vertical",size:12,fill:""},{default:t(()=>[e(b,{modelValue:a.templateMode,"onUpdate:modelValue":s[2]||(s[2]=l=>a.templateMode=l),type:"button"},{default:t(()=>[e(m,{value:"select"},{default:t(()=>[u("选择已有模板")]),_:1}),e(m,{value:"create"},{default:t(()=>[u("新建模板")]),_:1})]),_:1},8,["modelValue"]),a.templateMode==="select"?(i(),C(Z,{key:0,modelValue:a.templateId,"onUpdate:modelValue":s[3]||(s[3]=l=>a.templateId=l),placeholder:"请选择短信模板","allow-search":""},{default:t(()=>[(i(!0),_(j,null,q(f.value,l=>(i(),C(O,{key:l.id,value:l.id},{default:t(()=>[u(T(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(i(),_("div",Ce,[e(G,{modelValue:a.newTemplate.name,"onUpdate:modelValue":s[4]||(s[4]=l=>a.newTemplate.name=l),placeholder:"请输入模板名称"},null,8,["modelValue"]),n("div",Te,[e(x,{modelValue:a.newTemplate.content,"onUpdate:modelValue":s[5]||(s[5]=l=>a.newTemplate.content=l),placeholder:"请输入模板内容","auto-size":{minRows:3,maxRows:6}},null,8,["modelValue"]),n("div",Ne,T(a.newTemplate.content.length)+"/500",1)])]))]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(V,null,{default:t(()=>[e($,{type:"primary",onClick:E},{icon:t(()=>[e(g(oe))]),default:t(()=>[u(" 测试发送 ")]),_:1}),e($,{type:"primary",status:"success",onClick:F},{icon:t(()=>[e(g(me))]),default:t(()=>[u(" 确认下发 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(v,{span:24,lg:8},{default:t(()=>[e(z,{gutter:[0,24]},{default:t(()=>[e(v,{span:24},{default:t(()=>[e(S,{class:"preview-card",title:"模板预览",bordered:!1},{default:t(()=>{var l,L;return[n("div",$e,[(l=d.value)!=null&&l.content?(i(),_("div",Ie,T((L=d.value)==null?void 0:L.content),1)):(i(),_("div",ze,[e(g(ne),{class:"placeholder-icon"}),Le]))])]}),_:1})]),_:1}),a.templateMode==="create"?(i(),C(v,{key:0,span:24},{default:t(()=>[e(S,{class:"params-card",title:"可用参数",bordered:!1},{default:t(()=>[n("div",Me,[(i(!0),_(j,null,q(w.value,l=>(i(),C(B,{key:l.key,class:"param-tag",onClick:L=>N(l.key)},{default:t(()=>[u(T(l.label),1)]),_:2},1032,["onClick"]))),128))]),Ue]),_:1})]),_:1})):le("",!0),e(v,{span:24},{default:t(()=>[e(S,{class:"stats-card",title:"发送统计",bordered:!1},{default:t(()=>[e(z,{gutter:[16,16]},{default:t(()=>[e(v,{span:12},{default:t(()=>[e(P,{title:"今日已发送",value:128})]),_:1}),e(v,{span:12},{default:t(()=>[e(P,{title:"本月已发送",value:1024})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1},8,["loading"])])}}}),qe=ie(Be,[["__scopeId","data-v-cb32aa51"]]);export{qe as default};
