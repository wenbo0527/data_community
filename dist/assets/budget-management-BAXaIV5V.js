import{g as S}from"./external-data-DD7PQhfO.js";import{B as z,r as c,b as I,c as R,f as e,w as a,M as C,e as d,o as A,h as w,j as o,i as M,z as D,t as u,_ as $}from"./index-CsgcdrY7.js";import{I as j}from"./index-CrAnsjHE.js";import"./mock-Oqb5mk1v.js";const O={class:"budget-management"},P={style:{display:"flex","justify-content":"space-between","align-items":"center"}},q={style:{display:"flex",gap:"16px"}},E=z({__name:"budget-management",setup(Q){const x=c([]),f=c(!1),b=c({total:0,current:1,pageSize:10}),y=t=>(t==null?void 0:t.toLocaleString("zh-CN",{style:"currency",currency:"CNY"}))||"-",v=t=>t?`${(t*100).toFixed(2)}%`:"-",T=t=>(C.success("上传弹窗已显示"),{abort:()=>{}}),G=()=>{window.open("/templates/budget-template.xlsx","_blank")},m=c(""),p=c(""),V=c([{label:"年",value:"年"},{label:"季",value:"季"},{label:"月",value:"月"}]),k=()=>{_()},L=()=>{m.value="",p.value="",_()},_=async()=>{f.value=!0;try{let t=S().map(n=>{const r=["年","季","月"][Math.floor(Math.random()*3)];let s="";return r==="年"?s="2025":r==="季"?s=`Q${Math.floor(Math.random()*3)+1}`:s=`2025-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}`,{...n,budgetGranularity:r,budgetTime:s}});t.sort((n,r)=>{const s={年:1,季:2,月:3};return s[n.budgetGranularity]!==s[r.budgetGranularity]?s[n.budgetGranularity]-s[r.budgetGranularity]:n.budgetTime.localeCompare(r.budgetTime)}),m.value&&(t=t.filter(n=>n.budgetGranularity===m.value)),p.value&&(t=t.filter(n=>n.budgetTime.includes(p.value))),x.value=t,b.value.total=t.length}catch(t){C.error(t.message||"获取数据失败")}finally{f.value=!1}},U=t=>{b.value.current=t,_()};return I(()=>{_()}),(t,n)=>{const r=d("a-select"),s=d("a-input"),g=d("a-button"),B=d("a-space"),F=d("a-upload"),h=d("a-card"),i=d("a-table-column"),N=d("a-table");return A(),R("div",O,[e(h,{class:"action-card"},{title:a(()=>[o("预算管理")]),default:a(()=>[w("div",P,[e(B,{size:16},{default:a(()=>[e(r,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=l=>m.value=l),options:V.value,placeholder:"预算粒度",style:{width:"160px"},"allow-clear":""},null,8,["modelValue","options"]),e(s,{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=l=>p.value=l),placeholder:"时间",style:{width:"160px"},"allow-clear":""},null,8,["modelValue"]),e(g,{type:"primary",onClick:k},{default:a(()=>[o("筛选")]),_:1}),e(g,{onClick:L},{default:a(()=>[o("重置")]),_:1})]),_:1}),w("div",q,[e(F,{"custom-request":T,"show-file-list":!1,accept:".xlsx,.xls"},{"upload-button":a(()=>[e(g,{type:"primary"},{icon:a(()=>[e(M(D))]),default:a(()=>[o(" 上传预算数据 ")]),_:1})]),_:1}),e(g,{type:"text",class:"download-template",onClick:G},{icon:a(()=>[e(M(j))]),default:a(()=>[o(" 下载模板 ")]),_:1})])])]),_:1}),e(h,{class:"table-card"},{title:a(()=>[o("预算数据列表")]),default:a(()=>[e(N,{data:x.value,loading:f.value,pagination:b.value,onPageChange:U},{columns:a(()=>[e(i,{title:"业务类型","data-index":"businessType"}),e(i,{title:"平台产品","data-index":"platform"}),e(i,{title:"目标贷余","data-index":"targetLoan"},{cell:a(({record:l})=>[o(u(y(l.targetLoan)),1)]),_:1}),e(i,{title:"预估放款","data-index":"estimatedLoan"},{cell:a(({record:l})=>[o(u(y(l.estimatedLoan)),1)]),_:1}),e(i,{title:"预估费用","data-index":"estimatedCost"},{cell:a(({record:l})=>[o(u(y(l.estimatedCost)),1)]),_:1}),e(i,{title:"年化数据成本","data-index":"estimatedAnnualCost"},{cell:a(({record:l})=>[o(u(v(l.estimatedAnnualCost)),1)]),_:1}),e(i,{title:"无风险收益","data-index":"estimatedRiskFreeReturn"},{cell:a(({record:l})=>[o(u(v(l.estimatedRiskFreeReturn)),1)]),_:1}),e(i,{title:"预算粒度","data-index":"budgetGranularity"},{cell:a(({record:l})=>[o(u(l.budgetGranularity),1)]),_:1}),e(i,{title:"对应时间","data-index":"budgetTime"},{cell:a(({record:l})=>[o(u(l.budgetTime),1)]),_:1})]),_:1},8,["data","loading","pagination"])]),_:1})])}}}),K=$(E,[["__scopeId","data-v-242abec3"]]);export{K as default};
