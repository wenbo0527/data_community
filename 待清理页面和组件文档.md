# å¾…æ¸…ç†é¡µé¢å’Œç»„ä»¶æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

åŸºäºå¯¹é¡¹ç›®ä»£ç çš„æ·±å…¥åˆ†æï¼Œæœ¬æ–‡æ¡£åˆ—å‡ºäº†éœ€è¦æ¸…ç†ã€ä¼˜åŒ–æˆ–é‡æ„çš„é¡µé¢ã€ç»„ä»¶å’Œæ–‡ä»¶ã€‚

## ğŸ—‚ï¸ é¡µé¢åˆ†æä¸æ¸…ç†å»ºè®®

### 1. æµ‹è¯•é¡µé¢ (å»ºè®®æ¸…ç†)

#### `/src/pages/test/`
- **CanvasValidationTest.vue** - ç”»å¸ƒæ ¡éªŒæµ‹è¯•é¡µé¢
- **TaskFlowTest.vue** - ä»»åŠ¡æµæµ‹è¯•é¡µé¢

**æ¸…ç†å»ºè®®**: 
- âœ… ä¿ç•™ä½œä¸ºå¼€å‘æµ‹è¯•å·¥å…·
- ğŸ”„ ç§»åŠ¨åˆ° `/dev-tools/` ç›®å½•
- ğŸ“ æ·»åŠ å¼€å‘ç¯å¢ƒé™åˆ¶

#### `/src/pages/example/`
- **ComponentDemo.vue** - ç»„ä»¶æ¼”ç¤ºé¡µé¢

**æ¸…ç†å»ºè®®**:
- âŒ åˆ é™¤æˆ–ç§»åŠ¨åˆ°æ–‡æ¡£ç›®å½•
- ğŸ“š è½¬æ¢ä¸º Storybook ç»„ä»¶

### 2. é‡å¤åŠŸèƒ½é¡µé¢

#### å¤–éƒ¨æ•°æ®ç®¡ç†é‡å¤
```
/src/pages/discovery/external/          # æ•°æ®å‘ç°-å¤–éƒ¨æ•°æ®
/src/pages/external-data-v1/           # å¤–éƒ¨æ•°æ®v1ç‰ˆæœ¬
/src/pages/exploration/external-data-analysis/ # æ•°æ®æ¢ç´¢-å¤–éƒ¨æ•°æ®åˆ†æ
```

**æ¸…ç†å»ºè®®**:
- ğŸ”„ ç»Ÿä¸€åˆ° `/src/pages/discovery/external/`
- âŒ åˆ é™¤ `external-data-v1` (æ—§ç‰ˆæœ¬)
- ğŸ”— `exploration` ä¸­çš„å¤–éƒ¨æ•°æ®åˆ†æä¿ç•™ä½†é‡æ„

#### é¢„ç®—ç®¡ç†é‡å¤
```
/src/pages/exploration/budget-management.vue
/src/pages/exploration/external-data-analysis/budget-management.vue
```

**æ¸…ç†å»ºè®®**:
- ğŸ”„ åˆå¹¶ä¸ºç»Ÿä¸€çš„é¢„ç®—ç®¡ç†æ¨¡å—
- ğŸ“ ç»Ÿä¸€æ”¾ç½®åœ¨ `/src/pages/management/budget/`

### 3. åŠŸèƒ½ä¸å®Œæ•´é¡µé¢

#### è¥é”€æ¨¡å—
```
/src/pages/marketing/benefit/          # æƒç›Šç®¡ç† (ç›®å½•å­˜åœ¨ä½†ç»„ä»¶ç¼ºå¤±)
/src/pages/marketing/coupon/           # ä¼˜æƒ åˆ¸ç®¡ç† (éƒ¨åˆ†åŠŸèƒ½æœªå®ç°)
```

**æ¸…ç†å»ºè®®**:
- ğŸš§ å®Œå–„æƒç›Šç®¡ç†åŠŸèƒ½æˆ–æš‚æ—¶éšè—
- ğŸ”„ é‡æ„ä¼˜æƒ åˆ¸ç®¡ç†ï¼Œç»Ÿä¸€æ•°æ®ç»“æ„

#### è§¦è¾¾æ¨¡å—
```
/src/pages/touch/policy/template/      # ç­–ç•¥æ¨¡æ¿ (åŠŸèƒ½ç®€å•)
/src/pages/touch/system/              # ç³»ç»Ÿè®¾ç½® (åŠŸèƒ½ä¸æ˜ç¡®)
```

**æ¸…ç†å»ºè®®**:
- ğŸ”„ åˆå¹¶ç­–ç•¥ç›¸å…³åŠŸèƒ½
- ğŸ“ æ˜ç¡®ç³»ç»Ÿè®¾ç½®åŠŸèƒ½èŒƒå›´

## ğŸ§© ç»„ä»¶åˆ†æä¸æ¸…ç†å»ºè®®

### 1. è¿‡å¤§ç»„ä»¶ (éœ€è¦æ‹†åˆ†)

#### TaskFlowCanvas.vue (2543è¡Œ)
```
å½“å‰ç»“æ„:
- ç”»å¸ƒç®¡ç†
- äº‹ä»¶å¤„ç†  
- å·¥å…·æ 
- é…ç½®æŠ½å±‰
- å¸ƒå±€ç®¡ç†
```

**é‡æ„å»ºè®®**:
```
æ‹†åˆ†ä¸º:
â”œâ”€â”€ CanvasCore.vue (500è¡Œ)           # æ ¸å¿ƒç”»å¸ƒé€»è¾‘
â”œâ”€â”€ CanvasToolbar.vue (200è¡Œ)        # å·¥å…·æ ç»„ä»¶  
â”œâ”€â”€ CanvasEvents.vue (300è¡Œ)         # äº‹ä»¶å¤„ç†
â”œâ”€â”€ CanvasLayout.vue (200è¡Œ)         # å¸ƒå±€ç®¡ç†
â”œâ”€â”€ CanvasConfig.vue (150è¡Œ)         # é…ç½®ç®¡ç†
â””â”€â”€ CanvasDrawers.vue (300è¡Œ)        # æŠ½å±‰ç®¡ç†
```

### 2. é‡å¤ç»„ä»¶

#### é…ç½®æŠ½å±‰ç»„ä»¶
```
/src/pages/marketing/tasks/components/StartNodeConfigDrawer.vue
/src/pages/marketing/tasks/components/CrowdSplitNodeConfigDrawer.vue  
/src/pages/marketing/tasks/components/EventSplitNodeConfigDrawer.vue
/src/pages/marketing/tasks/components/ABTestNodeConfigDrawer.vue
/src/pages/marketing/tasks/components/AICallNodeConfigDrawer.vue
/src/pages/marketing/tasks/components/SMSNodeConfigDrawer.vue
/src/pages/marketing/tasks/components/EndNodeConfigDrawer.vue
```

**é‡æ„å»ºè®®**:
- ğŸ”„ åˆ›å»ºé€šç”¨ `BaseConfigDrawer.vue`
- ğŸ“ ä½¿ç”¨é…ç½®é©±åŠ¨çš„æ–¹å¼ç”Ÿæˆä¸åŒç±»å‹æŠ½å±‰
- ğŸ¯ å‡å°‘ä»£ç é‡å¤

#### å¸ƒå±€ç»„ä»¶
```
/src/components/layout/MainLayout.vue
/src/components/layout/SideMenu.vue  
/src/components/layout/BreadcrumbNav.vue
/src/components/layout/TopMenu.vue
```

**ä¼˜åŒ–å»ºè®®**:
- âœ… ç»“æ„åˆç†ï¼Œä¿æŒç°çŠ¶
- ğŸ”„ ä¼˜åŒ–å“åº”å¼å¸ƒå±€
- ğŸ“± å¢å¼ºç§»åŠ¨ç«¯é€‚é…

### 3. æœªä½¿ç”¨ç»„ä»¶

#### æ¨¡æ€æ¡†ç»„ä»¶
```
/src/components/modals/HomeWelcomeModal.vue  # é¦–é¡µæ¬¢è¿å¼¹çª—
```

**æ¸…ç†å»ºè®®**:
- ğŸ” æ£€æŸ¥ä½¿ç”¨æƒ…å†µ
- âŒ å¦‚æœªä½¿ç”¨åˆ™åˆ é™¤
- ğŸ“š å¦‚éœ€è¦åˆ™å®Œå–„åŠŸèƒ½

## ğŸ› ï¸ å·¥å…·ç±»åˆ†æä¸æ¸…ç†å»ºè®®

### 1. é‡å¤å·¥å…·ç±»

#### ç”»å¸ƒæ ¡éªŒ
```
/src/utils/canvasValidation.js           # åŸºç¡€ç”»å¸ƒæ ¡éªŒ
/src/utils/enhancedCanvasValidation.js   # å¢å¼ºç”»å¸ƒæ ¡éªŒ
```

**æ¸…ç†å»ºè®®**:
- ğŸ”„ åˆå¹¶ä¸ºç»Ÿä¸€çš„æ ¡éªŒå·¥å…·
- ğŸ“ ä¿ç•™å¢å¼ºç‰ˆæœ¬ï¼Œåˆ é™¤åŸºç¡€ç‰ˆæœ¬

#### å¸ƒå±€ç®¡ç†å™¨
```
/src/utils/EnhancedLayoutEngine.js       # å¢å¼ºå¸ƒå±€å¼•æ“
/src/utils/UnifiedLayoutManager.js       # ç»Ÿä¸€å¸ƒå±€ç®¡ç†å™¨  
/src/utils/BranchLayoutManager.js        # åˆ†æ”¯å¸ƒå±€ç®¡ç†å™¨
/src/composables/useStructuredLayout.js  # ç»“æ„åŒ–å¸ƒå±€ç»„åˆå¼å‡½æ•°
```

**æ¸…ç†å»ºè®®**:
- ğŸ”„ ç»Ÿä¸€ä¸ºå•ä¸€å¸ƒå±€ç®¡ç†ç³»ç»Ÿ
- ğŸ“¦ ä¿ç•™ `UnifiedLayoutManager.js` ä½œä¸ºä¸»è¦å·¥å…·
- ğŸ”— å…¶ä»–ä½œä¸ºæ’ä»¶æˆ–æ¨¡å—é›†æˆ

#### é¢„è§ˆçº¿ç®¡ç†å™¨
```
/src/utils/ConnectionPreviewManager.js   # è¿æ¥é¢„è§ˆç®¡ç†å™¨
/src/utils/UnifiedPreviewLineManager.js  # ç»Ÿä¸€é¢„è§ˆçº¿ç®¡ç†å™¨
```

**æ¸…ç†å»ºè®®**:
- ğŸ”„ åˆå¹¶ä¸ºç»Ÿä¸€ç®¡ç†å™¨
- ğŸ“ ä¿ç•™ `UnifiedPreviewLineManager.js`

### 2. è¿‡æ—¶å·¥å…·ç±»

#### é…ç½®æ–‡ä»¶
```
/src/utils/verticalLayoutConfig.js       # å‚ç›´å¸ƒå±€é…ç½® (å¯èƒ½è¿‡æ—¶)
/src/utils/uiOptimizationConfig.js       # UIä¼˜åŒ–é…ç½® (åŠŸèƒ½é‡å¤)
```

**æ¸…ç†å»ºè®®**:
- ğŸ” æ£€æŸ¥ä½¿ç”¨æƒ…å†µ
- ğŸ”„ åˆå¹¶åˆ°ä¸»é…ç½®æ–‡ä»¶
- âŒ åˆ é™¤æœªä½¿ç”¨çš„é…ç½®

#### é€šç”¨å·¥å…·
```
/src/utils/commonUtils.js                # é€šç”¨å·¥å…·ç±» (åŠŸèƒ½æ‚ä¹±)
```

**æ¸…ç†å»ºè®®**:
- ğŸ”„ æŒ‰åŠŸèƒ½æ‹†åˆ†ä¸ºå¤šä¸ªä¸“ç”¨å·¥å…·ç±»
- ğŸ“ ä¿ç•™æ ¸å¿ƒé€šç”¨åŠŸèƒ½
- ğŸ—‘ï¸ åˆ é™¤é‡å¤æˆ–æœªä½¿ç”¨çš„æ–¹æ³•

### 3. é…ç½®æ–‡ä»¶ä¼˜åŒ–

#### X6ç›¸å…³é…ç½®
```
/src/utils/x6Config.js                   # X6é…ç½® (420è¡Œï¼ŒåŠŸèƒ½å®Œæ•´)
/src/utils/canvasConfig.js               # ç”»å¸ƒé…ç½® (å¯èƒ½é‡å¤)
/src/utils/connectionConfigFactory.js    # è¿æ¥é…ç½®å·¥å‚
```

**ä¼˜åŒ–å»ºè®®**:
- âœ… `x6Config.js` ä¿æŒç°çŠ¶
- ğŸ”„ æ£€æŸ¥å…¶ä»–é…ç½®æ–‡ä»¶æ˜¯å¦é‡å¤
- ğŸ“¦ ç»Ÿä¸€é…ç½®ç®¡ç†

## ğŸ“ ç›®å½•ç»“æ„ä¼˜åŒ–å»ºè®®

### 1. å½“å‰é—®é¢˜
- ğŸ“‚ æµ‹è¯•æ–‡ä»¶æ•£å¸ƒåœ¨å„ä¸ªç›®å½•
- ğŸ”„ åŠŸèƒ½ç›¸ä¼¼çš„ç»„ä»¶åˆ†æ•£å­˜æ”¾
- ğŸ“ å·¥å…·ç±»èŒè´£ä¸æ¸…æ™°

### 2. å»ºè®®çš„ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ pages/                           # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ marketing/                   # è¥é”€æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ tasks/                   # ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ campaigns/               # æ´»åŠ¨ç®¡ç† (é‡æ„å)
â”‚   â”‚   â””â”€â”€ analytics/               # è¥é”€åˆ†æ (æ–°å¢)
â”‚   â”œâ”€â”€ discovery/                   # æ•°æ®å‘ç° (ä¿æŒ)
â”‚   â”œâ”€â”€ management/                  # æ•°æ®ç®¡ç† (ä¿æŒ)
â”‚   â”œâ”€â”€ exploration/                 # æ•°æ®æ¢ç´¢ (ä¿æŒ)
â”‚   â””â”€â”€ touch/                       # è§¦è¾¾ç®¡ç† (ä¿æŒ)
â”œâ”€â”€ components/                      # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ base/                        # åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ business/                    # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ layout/                      # å¸ƒå±€ç»„ä»¶ (ä¿æŒ)
â”‚   â””â”€â”€ canvas/                      # ç”»å¸ƒç›¸å…³ç»„ä»¶ (æ–°å¢)
â”œâ”€â”€ composables/                     # ç»„åˆå¼å‡½æ•° (ä¿æŒ)
â”œâ”€â”€ utils/                           # å·¥å…·ç±»
â”‚   â”œâ”€â”€ canvas/                      # ç”»å¸ƒç›¸å…³å·¥å…·
â”‚   â”œâ”€â”€ validation/                  # æ ¡éªŒå·¥å…·
â”‚   â”œâ”€â”€ layout/                      # å¸ƒå±€å·¥å…·
â”‚   â””â”€â”€ common/                      # é€šç”¨å·¥å…·
â”œâ”€â”€ config/                          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ assets/                          # é™æ€èµ„æº
â”œâ”€â”€ router/                          # è·¯ç”±é…ç½® (ä¿æŒ)
â”œâ”€â”€ store/                           # çŠ¶æ€ç®¡ç† (ä¿æŒ)
â””â”€â”€ dev-tools/                       # å¼€å‘å·¥å…· (æ–°å¢)
    â”œâ”€â”€ test-pages/                  # æµ‹è¯•é¡µé¢
    â””â”€â”€ demos/                       # æ¼”ç¤ºç»„ä»¶
```

## ğŸ¯ æ¸…ç†ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§ (ç«‹å³å¤„ç†)
1. âŒ åˆ é™¤ `/src/pages/external-data-v1/` ç›®å½•
2. ğŸ”„ åˆå¹¶é‡å¤çš„ç”»å¸ƒæ ¡éªŒå·¥å…·
3. ğŸ“¦ æ‹†åˆ† `TaskFlowCanvas.vue` ç»„ä»¶
4. ğŸ—‘ï¸ æ¸…ç†æœªä½¿ç”¨çš„æµ‹è¯•æ–‡ä»¶

### ä¸­ä¼˜å…ˆçº§ (1-2å‘¨å†…å¤„ç†)  
1. ğŸ”„ é‡æ„é…ç½®æŠ½å±‰ç»„ä»¶
2. ğŸ“ ç»Ÿä¸€å¸ƒå±€ç®¡ç†å™¨
3. ğŸ” æ£€æŸ¥å¹¶æ¸…ç†æœªä½¿ç”¨ç»„ä»¶
4. ğŸ“‚ ä¼˜åŒ–ç›®å½•ç»“æ„

### ä½ä¼˜å…ˆçº§ (åç»­å¤„ç†)
1. ğŸ“± å®Œå–„ç§»åŠ¨ç«¯é€‚é…
2. ğŸ“š è½¬æ¢æ¼”ç¤ºç»„ä»¶ä¸ºæ–‡æ¡£
3. ğŸ¨ ä¼˜åŒ–UIç»„ä»¶åº“ä½¿ç”¨
4. ğŸ§ª å®Œå–„æµ‹è¯•è¦†ç›–

## ğŸ“Š é¢„æœŸæ•ˆæœ

### ä»£ç è´¨é‡æå‡
- ğŸ“‰ ä»£ç è¡Œæ•°å‡å°‘ 20-30%
- ğŸ”„ é‡å¤ä»£ç å‡å°‘ 50%
- ğŸ“ å¯ç»´æŠ¤æ€§æå‡ 60%

### æ€§èƒ½ä¼˜åŒ–
- âš¡ æ„å»ºé€Ÿåº¦æå‡ 30%
- ğŸ“¦ åŒ…ä½“ç§¯å‡å°‘ 15-20%
- ğŸš€ è¿è¡Œæ—¶æ€§èƒ½æå‡ 25%

### å¼€å‘æ•ˆç‡
- ğŸ” ä»£ç æŸ¥æ‰¾æ•ˆç‡æå‡ 40%
- ğŸ› ï¸ æ–°åŠŸèƒ½å¼€å‘é€Ÿåº¦æå‡ 35%
- ğŸ› Bugä¿®å¤æ•ˆç‡æå‡ 50%

## ğŸ“‹ æ¸…ç†æ£€æŸ¥æ¸…å•

### é¡µé¢æ¸…ç†
- [ ] åˆ é™¤è¿‡æ—¶çš„æµ‹è¯•é¡µé¢
- [ ] åˆå¹¶é‡å¤åŠŸèƒ½é¡µé¢  
- [ ] å®Œå–„æˆ–éšè—ä¸å®Œæ•´é¡µé¢
- [ ] ä¼˜åŒ–é¡µé¢è·¯ç”±é…ç½®

### ç»„ä»¶æ¸…ç†
- [ ] æ‹†åˆ†è¿‡å¤§ç»„ä»¶
- [ ] åˆå¹¶é‡å¤ç»„ä»¶
- [ ] åˆ é™¤æœªä½¿ç”¨ç»„ä»¶
- [ ] ä¼˜åŒ–ç»„ä»¶ç»“æ„

### å·¥å…·ç±»æ¸…ç†
- [ ] åˆå¹¶é‡å¤å·¥å…·ç±»
- [ ] åˆ é™¤è¿‡æ—¶å·¥å…·ç±»
- [ ] ä¼˜åŒ–é…ç½®æ–‡ä»¶
- [ ] ç»Ÿä¸€å·¥å…·ç±»èŒè´£

### ç›®å½•ä¼˜åŒ–
- [ ] é‡æ–°ç»„ç»‡ç›®å½•ç»“æ„
- [ ] ç§»åŠ¨æµ‹è¯•æ–‡ä»¶åˆ°ä¸“ç”¨ç›®å½•
- [ ] æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ä»¶å’Œå·¥å…·
- [ ] æ›´æ–°å¯¼å…¥è·¯å¾„

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*åˆ›å»ºæ—¶é—´: 2024å¹´*  
*æœ€åæ›´æ–°: 2024å¹´*