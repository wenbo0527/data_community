<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–¹æ¡ˆDæµ‹è¯• - Yåæ ‡é—®é¢˜ä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .status {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .status-item {
            flex: 1;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }
        .status-success {
            background-color: #f0f9ff;
            border: 1px solid #0ea5e9;
            color: #0c4a6e;
        }
        .status-warning {
            background-color: #fffbeb;
            border: 1px solid #f59e0b;
            color: #92400e;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
        }
        .test-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #374151;
        }
        .test-result {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            background: #f9fafb;
            padding: 10px;
            border-radius: 4px;
            white-space: pre-wrap;
        }
        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background: #2563eb;
        }
        .btn-success {
            background: #10b981;
        }
        .btn-success:hover {
            background: #059669;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ æ–¹æ¡ˆDæ‰§è¡ŒéªŒè¯</h1>
            <p>ä¼˜åŒ–é¢„è§ˆçº¿ç®¡ç†å™¨åˆå§‹åŒ–æ—¶åº - Yåæ ‡é—®é¢˜ä¿®å¤</p>
        </div>

        <div class="status">
            <div class="status-item status-success">
                <h3>âœ… ä¿®æ”¹å®Œæˆ</h3>
                <p>å·²ç§»é™¤è¿‡æ—©çš„é¢„è§ˆçº¿ç®¡ç†å™¨è®¿é—®</p>
            </div>
            <div class="status-item status-success">
                <h3>ğŸ¯ æ—¶åºä¼˜åŒ–</h3>
                <p>é¢„è§ˆçº¿ç®¡ç†å™¨å°†åœ¨æ•°æ®åŠ è½½ååˆå§‹åŒ–</p>
            </div>
            <div class="status-item status-warning">
                <h3>ğŸ§ª å¾…éªŒè¯</h3>
                <p>éœ€è¦æµ‹è¯•å®é™…æ•ˆæœ</p>
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">ğŸ“‹ ä¿®æ”¹å†…å®¹æ€»ç»“</div>
            <div class="test-result">
âœ… æ–‡ä»¶ï¼šTaskFlowCanvas.vue
âœ… ä½ç½®ï¼šç¬¬918-933è¡Œ
âœ… æ“ä½œï¼šç§»é™¤è¿‡æ—©çš„é¢„è§ˆçº¿ç®¡ç†å™¨è®¿é—®ä»£ç 

ä¿®æ”¹å‰ï¼š
- åœ¨initCanvasæ–¹æ³•ä¸­è¿‡æ—©å°è¯•è·å–unifiedPreviewManager
- å¯¼è‡´"æ— æ³•è·å–ç»Ÿä¸€é¢„è§ˆçº¿ç®¡ç†å™¨"é”™è¯¯
- å½±å“Yåæ ‡è®¡ç®—çš„æ—¶åº

ä¿®æ”¹åï¼š
- ç§»é™¤è¿‡æ—©è®¿é—®ä»£ç 
- æ·»åŠ æ¸…æ™°çš„æ—¥å¿—è¯´æ˜
- ä¿æŒinitializeLayoutEngineAfterDataLoadæ–¹æ³•ä¸å˜
- ç¡®ä¿é¢„è§ˆçº¿ç®¡ç†å™¨åœ¨æ­£ç¡®æ—¶æœºåˆå§‹åŒ–
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">ğŸ¯ é¢„æœŸæ•ˆæœ</div>
            <div class="test-result">
1. âœ… æ¶ˆé™¤åˆå§‹åŒ–é”™è¯¯æ—¥å¿—
   - ä¸å†çœ‹åˆ°ï¼š"[TaskFlowCanvas] æ— æ³•è·å–ç»Ÿä¸€é¢„è§ˆçº¿ç®¡ç†å™¨"
   
2. âœ… æ­£ç¡®çš„åˆå§‹åŒ–æ—¶åº
   - é¢„è§ˆçº¿ç®¡ç†å™¨åœ¨æ•°æ®åŠ è½½ååˆå§‹åŒ–
   - å¸ƒå±€å¼•æ“æœ‰æ­£ç¡®çš„èŠ‚ç‚¹ä¿¡æ¯
   
3. âœ… Yåæ ‡è®¡ç®—å‡†ç¡®
   - é¢„è§ˆçº¿ä½¿ç”¨æ­£ç¡®çš„å±‚çº§Yåæ ‡
   - ä¸å†ä½¿ç”¨å›ºå®šåç§»é‡
   
4. âœ… æ¶æ„ä¿æŒç¨³å®š
   - ä¸å½±å“ç°æœ‰åŠŸèƒ½
   - é£é™©æä½
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">ğŸ” éªŒè¯æ–¹æ³•</div>
            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="openTaskFlow()">æ‰“å¼€ä»»åŠ¡æµç”»å¸ƒ</button>
                <button class="btn btn-success" onclick="checkConsole()">æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—</button>
            </div>
            <div class="test-result" id="verification-result">
ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹éªŒè¯...

éªŒè¯æ­¥éª¤ï¼š
1. æ‰“å¼€ä»»åŠ¡æµç”»å¸ƒé¡µé¢
2. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦è¿˜æœ‰"æ— æ³•è·å–ç»Ÿä¸€é¢„è§ˆçº¿ç®¡ç†å™¨"é”™è¯¯
3. æ·»åŠ å‡ ä¸ªèŠ‚ç‚¹ï¼Œè§‚å¯Ÿé¢„è§ˆçº¿Yåæ ‡æ˜¯å¦æ­£ç¡®
4. ç¡®è®¤é¢„è§ˆçº¿ç®¡ç†å™¨åœ¨æ•°æ®åŠ è½½åæ­£ç¡®åˆå§‹åŒ–
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">ğŸ“Š æŠ€æœ¯ç»†èŠ‚</div>
            <div class="test-result">
æ ¸å¿ƒé—®é¢˜ï¼šæ—¶åºé”™è¯¯
- åŸå› ï¼šåœ¨initCanvasä¸­è¿‡æ—©è®¿é—®configDrawers.value?.structuredLayout.unifiedPreviewManager
- æ—¶æœºï¼šæ­¤æ—¶structuredLayoutè¿˜æœªå®Œå…¨åˆå§‹åŒ–
- ç»“æœï¼šè·å–åˆ°nullï¼Œå¯¼è‡´åç»­Yåæ ‡è®¡ç®—ä½¿ç”¨å›ºå®šåç§»

è§£å†³æ–¹æ¡ˆï¼šå»¶è¿Ÿåˆå§‹åŒ–
- ç§»é™¤ï¼šè¿‡æ—©çš„é¢„è§ˆçº¿ç®¡ç†å™¨è®¿é—®ä»£ç 
- ä¿æŒï¼šinitializeLayoutEngineAfterDataLoadæ–¹æ³•
- ç¡®ä¿ï¼šé¢„è§ˆçº¿ç®¡ç†å™¨åœ¨æœ‰èŠ‚ç‚¹æ•°æ®æ—¶æ‰åˆå§‹åŒ–
- æ•ˆæœï¼šYåæ ‡è®¡ç®—ä½¿ç”¨æ­£ç¡®çš„å¸ƒå±€å¼•æ“å±‚çº§ä¿¡æ¯
            </div>
        </div>
    </div>

    <script>
        function openTaskFlow() {
            const result = document.getElementById('verification-result');
            result.textContent = 'æ­£åœ¨æ‰“å¼€ä»»åŠ¡æµç”»å¸ƒé¡µé¢...\n\nè¯·åœ¨æ–°çª—å£ä¸­ï¼š\n1. è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—\n2. æ·»åŠ èŠ‚ç‚¹æµ‹è¯•é¢„è§ˆçº¿\n3. æ£€æŸ¥Yåæ ‡æ˜¯å¦æ­£ç¡®';
            
            // æ‰“å¼€ä»»åŠ¡æµé¡µé¢
            window.open('http://localhost:5173/marketing/tasks', '_blank');
        }

        function checkConsole() {
            const result = document.getElementById('verification-result');
            result.textContent = `éªŒè¯æ£€æŸ¥æ¸…å•ï¼š

âœ… åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—ï¼š
- "[TaskFlowCanvas] è·³è¿‡é¢„è§ˆçº¿ç®¡ç†å™¨çš„è¿‡æ—©è®¿é—®ï¼Œå°†åœ¨æ•°æ®åŠ è½½ååˆå§‹åŒ–"
- "[TaskFlowCanvas] å¸ƒå±€å¼•æ“åˆå§‹åŒ–å®Œæˆ"
- "[TaskFlowCanvas] ç»Ÿä¸€é¢„è§ˆçº¿ç®¡ç†å™¨å·²æˆåŠŸåˆå§‹åŒ–å¹¶ç»‘å®šäº‹ä»¶ç›‘å¬å™¨"

âŒ ä¸åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—ï¼š
- "[TaskFlowCanvas] æ— æ³•è·å–ç»Ÿä¸€é¢„è§ˆçº¿ç®¡ç†å™¨"
- "[TaskFlowCanvas] StructuredLayout ä¸å­˜åœ¨ï¼Œæ— æ³•è·å–ç»Ÿä¸€é¢„è§ˆçº¿ç®¡ç†å™¨"

ğŸ¯ Yåæ ‡éªŒè¯ï¼š
- æ·»åŠ å¤šä¸ªèŠ‚ç‚¹åï¼Œé¢„è§ˆçº¿åº”è¯¥ä½¿ç”¨æ­£ç¡®çš„å±‚çº§Yåæ ‡
- ä¸å†ä½¿ç”¨å›ºå®šçš„ nodePosition.y + nodeSize.height + 100 åç§»é‡
- é¢„è§ˆçº¿ç»ˆç‚¹åº”è¯¥å¯¹é½åˆ°ä¸‹ä¸€å±‚çš„æ­£ç¡®ä½ç½®

å½“å‰æ—¶é—´ï¼š${new Date().toLocaleString()}`;
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºå½“å‰çŠ¶æ€
        window.onload = function() {
            const result = document.getElementById('verification-result');
            result.textContent = `æ–¹æ¡ˆDå·²æˆåŠŸæ‰§è¡Œï¼

ä¿®æ”¹å†…å®¹ï¼š
âœ… ç§»é™¤äº†TaskFlowCanvas.vueç¬¬918-933è¡Œçš„è¿‡æ—©é¢„è§ˆçº¿ç®¡ç†å™¨è®¿é—®
âœ… æ·»åŠ äº†æ¸…æ™°çš„å»¶è¿Ÿåˆå§‹åŒ–æ—¥å¿—è¯´æ˜
âœ… ä¿æŒäº†ç°æœ‰çš„initializeLayoutEngineAfterDataLoadæ–¹æ³•

ä¸‹ä¸€æ­¥ï¼šç‚¹å‡»ä¸Šæ–¹æŒ‰é’®è¿›è¡ŒéªŒè¯æµ‹è¯•`;
        };
    </script>
</body>
</html>