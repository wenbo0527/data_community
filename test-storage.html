<!DOCTYPE html>
<html>
<head>
    <title>本地存储测试</title>
</head>
<body>
    <h1>本地存储数据查看器</h1>
    <div id="output"></div>
    <button onclick="loadStorage()">刷新数据</button>
    <button onclick="clearStorage()">清空存储</button>
    
    <script>
        function loadStorage() {
            const output = document.getElementById('output');
            
            try {
                // 获取所有任务
                const tasks = localStorage.getItem('marketing_tasks');
                const stats = localStorage.getItem('marketing_tasks_stats');
                
                let html = '<h2>任务数据:</h2>';
                if (tasks) {
                    const taskList = JSON.parse(tasks);
                    html += `<p>找到 ${taskList.length} 个任务</p>`;
                    html += '<pre>' + JSON.stringify(taskList, null, 2) + '</pre>';
                } else {
                    html += '<p>没有找到任务数据</p>';
                }
                
                html += '<h2>统计信息:</h2>';
                if (stats) {
                    html += '<pre>' + JSON.stringify(JSON.parse(stats), null, 2) + '</pre>';
                } else {
                    html += '<p>没有找到统计信息</p>';
                }
                
                output.innerHTML = html;
            } catch (error) {
                output.innerHTML = '<p style="color: red;">错误: ' + error.message + '</p>';
            }
        }
        
        function clearStorage() {
            if (confirm('确定要清空所有任务数据吗？')) {
                localStorage.removeItem('marketing_tasks');
                localStorage.removeItem('marketing_tasks_stats');
                loadStorage();
                alert('存储已清空');
            }
        }
        
        // 页面加载时自动显示数据
        loadStorage();
    </script>
</body>
</html>