{"numTotalTestSuites":15,"numPassedTestSuites":15,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":31,"numPassedTests":19,"numFailedTests":12,"numPendingTests":0,"numTodoTests":0,"startTime":1761712568364,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","start-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 start-node 节点测试 应该正确处理正常的 start 节点","status":"passed","title":"应该正确处理正常的 start 节点","duration":3,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","start-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 start-node 节点测试 应该处理 start 节点数据获取异常","status":"failed","title":"应该处理 start 节点数据获取异常","duration":11,"failureMessages":["expected '检查异常: 数据获取失败' to contain 'start节点需要预览线'"],"location":{"line":80,"column":29}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","start-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 start-node 节点测试 应该处理没有 getData 方法的 start 节点","status":"passed","title":"应该处理没有 getData 方法的 start 节点","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","audience-split-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 audience-split-node 节点测试 应该正确处理正常的 audience-split 节点","status":"passed","title":"应该正确处理正常的 audience-split 节点","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","audience-split-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 audience-split-node 节点测试 应该处理 audience-split 节点缺少 audiences 配置","status":"failed","title":"应该处理 audience-split 节点缺少 audiences 配置","duration":1,"failureMessages":["expected '分支配置无效: 分支配置分析异常: depth is not defined' to contain 'audience-split节点缺少有效的audiences配置'"],"location":{"line":136,"column":29}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","audience-split-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 audience-split-node 节点测试 应该处理 audience-split 节点数据获取异常","status":"failed","title":"应该处理 audience-split 节点数据获取异常","duration":0,"failureMessages":["expected true to be false // Object.is equality"],"location":{"line":152,"column":36}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","manual-call-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 manual-call-node 节点测试 应该正确处理已配置的 manual-call 节点","status":"failed","title":"应该正确处理已配置的 manual-call 节点","duration":1,"failureMessages":["expected '需要创建单一预览线' to contain 'manual-call节点已配置，需要预览线'"],"location":{"line":174,"column":29}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","manual-call-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 manual-call-node 节点测试 应该处理 manual-call 节点数据获取异常","status":"failed","title":"应该处理 manual-call 节点数据获取异常","duration":0,"failureMessages":["expected '检查异常: 数据获取失败' to contain 'manual-call节点数据获取异常，默认需要预览线'"],"location":{"line":191,"column":29}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","manual-call-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 manual-call-node 节点测试 应该处理未配置的 manual-call 节点","status":"passed","title":"应该处理未配置的 manual-call 节点","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","sms-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 sms-node 节点测试 应该正确处理已配置的 sms 节点","status":"failed","title":"应该正确处理已配置的 sms 节点","duration":1,"failureMessages":["expected '需要创建单一预览线' to contain 'sms节点已配置，需要预览线'"],"location":{"line":228,"column":29}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","sms-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 sms-node 节点测试 应该处理 sms 节点数据获取异常","status":"failed","title":"应该处理 sms 节点数据获取异常","duration":1,"failureMessages":["expected '检查异常: 数据获取失败' to contain 'sms节点数据获取异常，默认需要预览线'"],"location":{"line":245,"column":29}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","sms-node 节点测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 sms-node 节点测试 应该处理未配置的 sms 节点","status":"passed","title":"应该处理未配置的 sms 节点","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","isBranchNode 方法容错测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 isBranchNode 方法容错测试 应该正确识别非分支节点类型","status":"failed","title":"应该正确识别非分支节点类型","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ 'debug', StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m"],"location":{"line":278,"column":31}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","isBranchNode 方法容错测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 isBranchNode 方法容错测试 应该正确识别分支节点类型","status":"failed","title":"应该正确识别分支节点类型","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ 'debug', StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m"],"location":{"line":291,"column":31}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","isBranchNode 方法容错测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 isBranchNode 方法容错测试 应该处理节点数据获取异常","status":"failed","title":"应该处理节点数据获取异常","duration":0,"failureMessages":["数据获取失败"],"location":{"line":300,"column":17}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","isBranchNode 方法容错测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 isBranchNode 方法容错测试 应该处理空节点","status":"passed","title":"应该处理空节点","duration":0,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","isBranchNode 方法容错测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 isBranchNode 方法容错测试 应该处理没有数据的节点","status":"failed","title":"应该处理没有数据的节点","duration":1,"failureMessages":["expected \"spy\" to be called with arguments: [ 'debug', StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m"],"location":{"line":324,"column":29}},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","异常场景综合测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 异常场景综合测试 应该处理完全无效的节点对象","status":"passed","title":"应该处理完全无效的节点对象","duration":0,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","异常场景综合测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 异常场景综合测试 应该处理节点类型不匹配的情况","status":"passed","title":"应该处理节点类型不匹配的情况","duration":0,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","异常场景综合测试"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 异常场景综合测试 应该处理循环引用的节点数据","status":"passed","title":"应该处理循环引用的节点数据","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","日志记录验证"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 日志记录验证 应该记录适当级别的日志","status":"passed","title":"应该记录适当级别的日志","duration":0,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator - 4种节点类型容错测试","日志记录验证"],"fullName":" PreviewLineValidator - 4种节点类型容错测试 日志记录验证 应该在异常情况下记录警告日志而不是错误日志","status":"failed","title":"应该在异常情况下记录警告日志而不是错误日志","duration":5,"failureMessages":["expected \"spy\" to be called with arguments: [ 'error', …(1) ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st spy call:\n\n\u001b[22m\u001b[2m  Array [\u001b[22m\n\u001b[32m-   \"error\",\u001b[90m\n\u001b[32m-   StringContaining \"预览线需求检查异常\",\u001b[90m\n\u001b[31m+   \"warn\",\u001b[90m\n\u001b[31m+   \"getData() 调用失败\",\u001b[90m\n\u001b[31m+   Object {\u001b[90m\n\u001b[31m+     \"error\": \"测试异常\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\n\u001b[1m  2nd spy call:\n\n\u001b[22m\u001b[2m  Array [\u001b[22m\n\u001b[32m-   \"error\",\u001b[90m\n\u001b[32m-   StringContaining \"预览线需求检查异常\",\u001b[90m\n\u001b[31m+   \"debug\",\u001b[90m\n\u001b[31m+   \"节点类型获取: manual-call (来源: node.type/nodeType)\",\u001b[90m\n\u001b[31m+   Object {\u001b[90m\n\u001b[31m+     \"nodeId\": \"problem-1\",\u001b[90m\n\u001b[31m+     \"nodeType\": \"manual-call\",\u001b[90m\n\u001b[31m+     \"source\": \"node.type/nodeType\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\n\u001b[1m  3rd spy call:\n\n\u001b[22m\u001b[2m  Array [\u001b[22m\n\u001b[32m-   \"error\",\u001b[90m\n\u001b[32m-   StringContaining \"预览线需求检查异常\",\u001b[90m\n\u001b[31m+   \"debug\",\u001b[90m\n\u001b[31m+   \"[PreviewLineValidator] 节点类型检查: problem-1\",\u001b[90m\n\u001b[31m+   Object {\u001b[90m\n\u001b[31m+     \"isValidType\": true,\u001b[90m\n\u001b[31m+     \"nodeConstructor\": \"Object\",\u001b[90m\n\u001b[31m+     \"nodeType\": \"manual-call\",\u001b[90m\n\u001b[31m+     \"nodeTypeSource\": \"node.type/nodeType\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\n\u001b[1m  4th spy call:\n\n\u001b[22m\u001b[2m  Array [\u001b[22m\n\u001b[2m    \"error\",\u001b[22m\n\u001b[32m-   StringContaining \"预览线需求检查异常\",\u001b[90m\n\u001b[31m+   \"预览线需求检查异常: problem-1\",\u001b[90m\n\u001b[31m+   Object {\u001b[90m\n\u001b[31m+     \"error\": \"测试异常\",\u001b[90m\n\u001b[31m+     \"forceUpdate\": false,\u001b[90m\n\u001b[31m+     \"nodeId\": \"problem-1\",\u001b[90m\n\u001b[31m+     \"requestedState\": \"active\",\u001b[90m\n\u001b[31m+     \"stack\": \"Error: 测试异常\u001b[90m\n\u001b[31m+     at Object.<anonymous> (/Users/mac/nis_mock/data_comunity/data_comunity/src/tests/unit/PreviewLineValidator.test.js:395:17)\u001b[90m\n\u001b[31m+     at Object.mockCall (file:///Users/mac/nis_mock/data_comunity/data_comunity/node_modules/@vitest/spy/dist/index.js:50:17)\u001b[90m\n\u001b[31m+     at Object.spy [as getData] (file:///Users/mac/nis_mock/data_comunity/data_comunity/node_modules/tinyspy/dist/index.js:42:80)\u001b[90m\n\u001b[31m+     at PreviewLineValidator.isBranchNode (/Users/mac/nis_mock/data_comunity/data_comunity/src/utils/preview-line/core/PreviewLineValidator.js:769:23)\u001b[90m\n\u001b[31m+     at PreviewLineValidator.checkPreviewLineRequirement (/Users/mac/nis_mock/data_comunity/data_comunity/src/utils/preview-line/core/PreviewLineValidator.js:328:29)\u001b[90m\n\u001b[31m+     at /Users/mac/nis_mock/data_comunity/data_comunity/src/tests/unit/PreviewLineValidator.test.js:399:23\u001b[90m\n\u001b[31m+     at file:///Users/mac/nis_mock/data_comunity/data_comunity/node_modules/@vitest/runner/dist/index.js:135:14\u001b[90m\n\u001b[31m+     at file:///Users/mac/nis_mock/data_comunity/data_comunity/node_modules/@vitest/runner/dist/index.js:60:26\u001b[90m\n\u001b[31m+     at runTest (file:///Users/mac/nis_mock/data_comunity/data_comunity/node_modules/@vitest/runner/dist/index.js:781:17)\u001b[90m\n\u001b[31m+     at runSuite (file:///Users/mac/nis_mock/data_comunity/data_comunity/node_modules/@vitest/runner/dist/index.js:909:15)\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m4\u001b[22m\n\u001b[39m"],"location":{"line":402,"column":31}}],"startTime":1761712569011,"endTime":1761712569042,"status":"failed","message":"","name":"/Users/mac/nis_mock/data_comunity/data_comunity/src/tests/unit/PreviewLineValidator.test.js"},{"assertionResults":[{"ancestorTitles":["","PreviewLineValidator 修复测试","start-node 类型识别修复"],"fullName":" PreviewLineValidator 修复测试 start-node 类型识别修复 应该正确识别 start 节点类型","status":"passed","title":"应该正确识别 start 节点类型","duration":2,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator 修复测试","start-node 类型识别修复"],"fullName":" PreviewLineValidator 修复测试 start-node 类型识别修复 应该在错误日志中显示正确的节点类型而不是 \"object\"","status":"passed","title":"应该在错误日志中显示正确的节点类型而不是 \"object\"","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator 修复测试","start-node 类型识别修复"],"fullName":" PreviewLineValidator 修复测试 start-node 类型识别修复 应该正确处理节点类型的多种获取方式","status":"passed","title":"应该正确处理节点类型的多种获取方式","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator 修复测试","错误处理改进"],"fullName":" PreviewLineValidator 修复测试 错误处理改进 应该提供详细的错误上下文信息","status":"passed","title":"应该提供详细的错误上下文信息","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator 修复测试","错误处理改进"],"fullName":" PreviewLineValidator 修复测试 错误处理改进 应该安全处理空节点或无效节点","status":"passed","title":"应该安全处理空节点或无效节点","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator 修复测试","start 节点特殊处理"],"fullName":" PreviewLineValidator 修复测试 start 节点特殊处理 应该正确识别 start 节点并应用特殊逻辑","status":"passed","title":"应该正确识别 start 节点并应用特殊逻辑","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator 修复测试","start 节点特殊处理"],"fullName":" PreviewLineValidator 修复测试 start 节点特殊处理 应该正确验证 start 节点的配置状态","status":"passed","title":"应该正确验证 start 节点的配置状态","duration":0,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator 修复测试","性能和稳定性"],"fullName":" PreviewLineValidator 修复测试 性能和稳定性 应该在合理时间内完成验证","status":"passed","title":"应该在合理时间内完成验证","duration":1,"failureMessages":[]},{"ancestorTitles":["","PreviewLineValidator 修复测试","性能和稳定性"],"fullName":" PreviewLineValidator 修复测试 性能和稳定性 应该能够处理大量节点而不崩溃","status":"passed","title":"应该能够处理大量节点而不崩溃","duration":5,"failureMessages":[]}],"startTime":1761712569011,"endTime":1761712569024,"status":"passed","message":"","name":"/Users/mac/nis_mock/data_comunity/data_comunity/src/tests/unit/PreviewLineValidatorFix.test.js"}]}