<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººç¾¤åˆ†æµèŠ‚ç‚¹é¢„è§ˆçº¿æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        .info { color: blue; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ğŸ¯ äººç¾¤åˆ†æµèŠ‚ç‚¹é¢„è§ˆçº¿ç”Ÿæˆæµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•æ§åˆ¶</h2>
        <button onclick="runFullTest()">ğŸš€ è¿è¡Œå®Œæ•´æµ‹è¯•</button>
        <button onclick="testGraphInstance()">ğŸ” æµ‹è¯•å›¾å®ä¾‹</button>
        <button onclick="testPreviewManager()">ğŸ”§ æµ‹è¯•é¢„è§ˆçº¿ç®¡ç†å™¨</button>
        <button onclick="testAudienceSplitNodes()">ğŸŒ¿ æµ‹è¯•äººç¾¤åˆ†æµèŠ‚ç‚¹</button>
        <button onclick="testAudienceSplitPreviewLineFix()">ğŸ”§ æµ‹è¯•é¢„è§ˆçº¿ä¿®å¤å‡½æ•°</button>
        <button onclick="checkScriptStatus()">ğŸ“‹ æ£€æŸ¥è„šæœ¬åŠ è½½çŠ¶æ€</button>
        <button onclick="clearResults()">ğŸ§¹ æ¸…ç©ºç»“æœ</button>
        <button onclick="forceReloadScript()">ğŸ”„ å¼ºåˆ¶é‡æ–°åŠ è½½è„šæœ¬</button>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•ç»“æœ</h2>
        <div id="test-results"></div>
    </div>
    
    <script>
        // æ—¥å¿—è¾“å‡ºå‡½æ•°
        function log(message, type = 'info') {
            const resultsDiv = document.getElementById('test-results');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = type;
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            resultsDiv.appendChild(logEntry);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
            
            // åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°
            console.log(`[${type.toUpperCase()}] ${message}`);
        }
        
        function clearResults() {
            document.getElementById('test-results').innerHTML = '';
        }
        
        // è·å–å›¾å®ä¾‹
        function getGraphInstance() {
            log('ğŸ” å¼€å§‹æœç´¢å›¾å®ä¾‹...');
            
            const searchPaths = [
                () => window.graph,
                () => window.app?.$refs?.graph?.graph,
                () => window.app?.$children?.[0]?.graph,
                () => document.querySelector('.x6-graph')?.graph,
                () => window.Vue?.prototype?.$graph,
                () => window.__VUE_APP__?.graph,
                () => window.vueApp?.config?.globalProperties?.$graph
            ];
            
            for (let i = 0; i < searchPaths.length; i++) {
                try {
                    const graph = searchPaths[i]();
                    if (graph && typeof graph.getCells === 'function') {
                        log(`âœ… åœ¨è·¯å¾„ ${i + 1} æ‰¾åˆ°å›¾å®ä¾‹`, 'success');
                        return graph;
                    }
                } catch (error) {
                    log(`âŒ è·¯å¾„ ${i + 1} æœç´¢å¤±è´¥: ${error.message}`, 'error');
                }
            }
            
            log('âŒ æœªæ‰¾åˆ°æœ‰æ•ˆçš„å›¾å®ä¾‹', 'error');
            return null;
        }
        
        // è·å–é¢„è§ˆçº¿ç®¡ç†å™¨
        function getPreviewLineManager() {
            log('ğŸ” æœç´¢é¢„è§ˆçº¿ç®¡ç†å™¨å®ä¾‹...');
            
            const searchPaths = [
                () => window.previewLineManager,
                () => window.app?.$refs?.previewLineManager,
                () => window.UnifiedPreviewLineManager,
                () => window.app?.$children?.[0]?.previewLineManager,
                () => window.vueApp?.config?.globalProperties?.$previewLineManager
            ];
            
            for (let i = 0; i < searchPaths.length; i++) {
                try {
                    const manager = searchPaths[i]();
                    if (manager && typeof manager.shouldCreatePreviewLine === 'function') {
                        log(`âœ… åœ¨è·¯å¾„ ${i + 1} æ‰¾åˆ°é¢„è§ˆçº¿ç®¡ç†å™¨`, 'success');
                        return manager;
                    }
                } catch (error) {
                    log(`âŒ è·¯å¾„ ${i + 1} æœç´¢å¤±è´¥: ${error.message}`, 'error');
                }
            }
            
            log('âŒ æœªæ‰¾åˆ°é¢„è§ˆçº¿ç®¡ç†å™¨å®ä¾‹', 'error');
            return null;
        }
        
        // æµ‹è¯•å›¾å®ä¾‹
        function testGraphInstance() {
            log('='.repeat(50));
            log('ğŸ” æµ‹è¯•å›¾å®ä¾‹è·å–');
            
            const graph = getGraphInstance();
            if (graph) {
                const cells = graph.getCells();
                const nodes = graph.getNodes();
                const edges = graph.getEdges();
                
                log(`ğŸ“Š å›¾å®ä¾‹ä¿¡æ¯:`, 'info');
                log(`  - æ€»å•å…ƒæ ¼æ•°: ${cells.length}`);
                log(`  - èŠ‚ç‚¹æ•°: ${nodes.length}`);
                log(`  - è¾¹æ•°: ${edges.length}`);
                
                // ç»Ÿè®¡èŠ‚ç‚¹ç±»å‹
                const nodeTypes = {};
                nodes.forEach(node => {
                    const nodeData = node.getData() || {};
                    const nodeType = nodeData.nodeType || nodeData.type || 'unknown';
                    nodeTypes[nodeType] = (nodeTypes[nodeType] || 0) + 1;
                });
                
                log('ğŸ“‹ èŠ‚ç‚¹ç±»å‹ç»Ÿè®¡:', 'info');
                Object.entries(nodeTypes).forEach(([type, count]) => {
                    log(`  - ${type}: ${count}ä¸ª`);
                });
                
                return true;
            }
            return false;
        }
        
        // æµ‹è¯•é¢„è§ˆçº¿ç®¡ç†å™¨
        function testPreviewManager() {
            log('='.repeat(50));
            log('ğŸ”§ æµ‹è¯•é¢„è§ˆçº¿ç®¡ç†å™¨');
            
            const manager = getPreviewLineManager();
            if (manager) {
                log('âœ… é¢„è§ˆçº¿ç®¡ç†å™¨å¯ç”¨', 'success');
                
                // æ£€æŸ¥å…³é”®æ–¹æ³•
                const methods = [
                    'shouldCreatePreviewLine',
                    'shouldNodeBeConfigured',
                    'calculateBranchPreviewPosition',
                    'createBranchPreviewLines',
                    'generateBranchesByType'
                ];
                
                methods.forEach(method => {
                    if (typeof manager[method] === 'function') {
                        log(`âœ… æ–¹æ³• ${method} å¯ç”¨`, 'success');
                    } else {
                        log(`âŒ æ–¹æ³• ${method} ä¸å¯ç”¨`, 'error');
                    }
                });
                
                return true;
            }
            return false;
        }
        
        // æµ‹è¯•audience-splitèŠ‚ç‚¹
        function testAudienceSplitNodes() {
            log('='.repeat(50));
            log('ğŸŒ¿ æµ‹è¯•äººç¾¤åˆ†æµèŠ‚ç‚¹');
            
            const graph = getGraphInstance();
            const manager = getPreviewLineManager();
            
            if (!graph || !manager) {
                log('âŒ ç¼ºå°‘å¿…è¦çš„å®ä¾‹ï¼Œæµ‹è¯•ç»ˆæ­¢', 'error');
                return false;
            }
            
            // æŸ¥æ‰¾audience-splitèŠ‚ç‚¹
            const nodes = graph.getNodes();
            const audienceSplitNodes = nodes.filter(node => {
                const nodeData = node.getData() || {};
                const nodeType = nodeData.nodeType || nodeData.type;
                return nodeType === 'audience-split';
            });
            
            log(`ğŸ“Š æ‰¾åˆ° ${audienceSplitNodes.length} ä¸ªäººç¾¤åˆ†æµèŠ‚ç‚¹`);
            
            if (audienceSplitNodes.length === 0) {
                log('âš ï¸ æœªæ‰¾åˆ°äººç¾¤åˆ†æµèŠ‚ç‚¹ï¼Œåˆ›å»ºæµ‹è¯•èŠ‚ç‚¹...', 'warning');
                return createTestAudienceSplitNode(graph, manager);
            }
            
            // æµ‹è¯•æ¯ä¸ªaudience-splitèŠ‚ç‚¹
            let allTestsPassed = true;
            audienceSplitNodes.forEach((node, index) => {
                log(`\nğŸ” æµ‹è¯•ç¬¬ ${index + 1} ä¸ªäººç¾¤åˆ†æµèŠ‚ç‚¹: ${node.id}`);
                const testResult = testSingleAudienceSplitNode(node, manager, graph);
                if (!testResult) {
                    allTestsPassed = false;
                }
            });
            
            return allTestsPassed;
        }
        
        // æµ‹è¯•å•ä¸ªaudience-splitèŠ‚ç‚¹
        function testSingleAudienceSplitNode(node, manager, graph) {
            log(`\nğŸ“‹ æµ‹è¯•èŠ‚ç‚¹ ${node.id} çš„è¯¦ç»†ä¿¡æ¯:`);
            
            // 1. æ£€æŸ¥èŠ‚ç‚¹åŸºæœ¬ä¿¡æ¯
            const nodeData = node.getData() || {};
            const nodeType = nodeData.nodeType || nodeData.type;
            log(`èŠ‚ç‚¹ç±»å‹: ${nodeType}`);
            log(`èŠ‚ç‚¹æ•°æ®: ${JSON.stringify(nodeData, null, 2)}`);
            
            // 2. æ£€æŸ¥isConfiguredçŠ¶æ€
            const isConfigured = nodeData.isConfigured;
            log(`é…ç½®çŠ¶æ€ (isConfigured): ${isConfigured}`);
            
            // 3. æ£€æŸ¥åˆ†æ”¯ä¿¡æ¯
            const branches = nodeData.branches || [];
            log(`åˆ†æ”¯ä¿¡æ¯: ${JSON.stringify(branches, null, 2)}`);
            log(`åˆ†æ”¯æ•°é‡: ${branches.length}`);
            
            // 4. æ£€æŸ¥é…ç½®ä¿¡æ¯
            const config = nodeData.config || {};
            log(`é…ç½®ä¿¡æ¯: ${JSON.stringify(config, null, 2)}`);
            
            // 5. æµ‹è¯•shouldNodeBeConfiguredæ–¹æ³•
            let shouldBeConfigured = false;
            try {
                shouldBeConfigured = manager.shouldNodeBeConfigured(nodeData, nodeType);
                log(`shouldNodeBeConfigured ç»“æœ: ${shouldBeConfigured}`, shouldBeConfigured ? 'success' : 'warning');
            } catch (error) {
                log(`âŒ shouldNodeBeConfigured æ–¹æ³•è°ƒç”¨å¤±è´¥: ${error.message}`, 'error');
            }
            
            // 6. æµ‹è¯•shouldCreatePreviewLineæ–¹æ³•
            let shouldCreatePreview = false;
            try {
                shouldCreatePreview = manager.shouldCreatePreviewLine(node);
                log(`shouldCreatePreviewLine ç»“æœ: ${shouldCreatePreview}`, shouldCreatePreview ? 'success' : 'warning');
            } catch (error) {
                log(`âŒ shouldCreatePreviewLine æ–¹æ³•è°ƒç”¨å¤±è´¥: ${error.message}`, 'error');
            }
            
            // 7. æ£€æŸ¥ç°æœ‰è¿æ¥
            const outgoingEdges = graph.getOutgoingEdges(node) || [];
            const incomingEdges = graph.getIncomingEdges(node) || [];
            log(`å‡ºè¾¹æ•°é‡: ${outgoingEdges.length}`);
            log(`å…¥è¾¹æ•°é‡: ${incomingEdges.length}`);
            
            // 8. æµ‹è¯•åˆ†æ”¯ç”Ÿæˆ
            try {
                const generatedBranches = manager.generateBranchesByType(nodeType, config, node.id);
                log(`ç”Ÿæˆçš„åˆ†æ”¯: ${JSON.stringify(generatedBranches, null, 2)}`);
                log(`ç”Ÿæˆçš„åˆ†æ”¯æ•°é‡: ${generatedBranches.length}`);
            } catch (error) {
                log(`âŒ generateBranchesByType æ–¹æ³•è°ƒç”¨å¤±è´¥: ${error.message}`, 'error');
            }
            
            // 9. åˆ†æé—®é¢˜
            log('\nğŸ” é—®é¢˜åˆ†æ:');
            if (!isConfigured) {
                log('âš ï¸ èŠ‚ç‚¹æœªé…ç½® (isConfigured = false)', 'warning');
            }
            if (branches.length === 0 && Object.keys(config).length === 0) {
                log('âš ï¸ èŠ‚ç‚¹æ²¡æœ‰åˆ†æ”¯ä¿¡æ¯å’Œé…ç½®ä¿¡æ¯', 'warning');
            }
            if (!shouldBeConfigured) {
                log('âš ï¸ shouldNodeBeConfigured è¿”å› false', 'warning');
            }
            if (!shouldCreatePreview) {
                log('âš ï¸ shouldCreatePreviewLine è¿”å› false', 'warning');
            }
            
            return shouldCreatePreview;
        }
        
        // åˆ›å»ºæµ‹è¯•ç”¨çš„audience-splitèŠ‚ç‚¹
        function createTestAudienceSplitNode(graph, manager) {
            log('\nğŸ—ï¸ åˆ›å»ºæµ‹è¯•ç”¨çš„äººç¾¤åˆ†æµèŠ‚ç‚¹...');
            
            try {
                const testNode = graph.addNode({
                    id: 'test-audience-split-' + Date.now(),
                    x: 100,
                    y: 100,
                    width: 120,
                    height: 60,
                    shape: 'rect',
                    data: {
                        nodeType: 'audience-split',
                        type: 'audience-split',
                        isConfigured: true,
                        branches: [
                            { id: 'branch-1', label: 'åˆ†æ”¯1', crowdName: 'äººç¾¤1' },
                            { id: 'branch-2', label: 'åˆ†æ”¯2', crowdName: 'äººç¾¤2' }
                        ],
                        config: {
                            crowdLayers: [
                                { id: 'crowd-1', crowdName: 'äººç¾¤1', crowdId: 'c1' },
                                { id: 'crowd-2', crowdName: 'äººç¾¤2', crowdId: 'c2' }
                            ],
                            unmatchBranch: {
                                id: 'unmatch',
                                name: 'æœªå‘½ä¸­äººç¾¤',
                                crowdName: 'æœªå‘½ä¸­äººç¾¤'
                            }
                        }
                    }
                });
                
                log(`âœ… æµ‹è¯•èŠ‚ç‚¹åˆ›å»ºæˆåŠŸ: ${testNode.id}`, 'success');
                
                // æµ‹è¯•æ–°åˆ›å»ºçš„èŠ‚ç‚¹
                return testSingleAudienceSplitNode(testNode, manager, graph);
            } catch (error) {
                log(`âŒ åˆ›å»ºæµ‹è¯•èŠ‚ç‚¹å¤±è´¥: ${error.message}`, 'error');
                return false;
            }
        }
        
        // è¿è¡Œå®Œæ•´æµ‹è¯•
        function runFullTest() {
            clearResults();
            log('ğŸ¯ äººç¾¤åˆ†æµèŠ‚ç‚¹é¢„è§ˆçº¿ç”Ÿæˆæµ‹è¯•å¼€å§‹');
            log('='.repeat(50));
            
            const graphTest = testGraphInstance();
            const managerTest = testPreviewManager();
            const nodeTest = testAudienceSplitNodes();
            
            log('\n' + '='.repeat(50));
            if (graphTest && managerTest && nodeTest) {
                log('âœ… æµ‹è¯•å®Œæˆï¼Œé¢„è§ˆçº¿ç”Ÿæˆæ­£å¸¸', 'success');
            } else {
                log('âŒ æµ‹è¯•å‘ç°é—®é¢˜ï¼Œé¢„è§ˆçº¿ç”Ÿæˆå¼‚å¸¸', 'error');
                provideFixSuggestions();
            }
        }
        
        // æä¾›ä¿®å¤å»ºè®®
        function provideFixSuggestions() {
            log('\nğŸ’¡ ä¿®å¤å»ºè®®:', 'info');
            log('1. ç¡®ä¿audience-splitèŠ‚ç‚¹çš„isConfiguredå­—æ®µæ­£ç¡®è®¾ç½®ä¸ºtrue');
            log('2. æ£€æŸ¥èŠ‚ç‚¹çš„config.crowdLayersæ•°ç»„æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„äººç¾¤é…ç½®');
            log('3. éªŒè¯shouldNodeBeConfiguredæ–¹æ³•å¯¹audience-splitèŠ‚ç‚¹çš„å¤„ç†é€»è¾‘');
            log('4. æ£€æŸ¥generateBranchesByTypeæ–¹æ³•æ˜¯å¦æ­£ç¡®ç”Ÿæˆåˆ†æ”¯ä¿¡æ¯');
            log('5. ç¡®ä¿é¢„è§ˆçº¿ç®¡ç†å™¨æ­£ç¡®è¯†åˆ«audience-splitä¸ºåˆ†æ”¯èŠ‚ç‚¹ç±»å‹');
            log('6. æ£€æŸ¥èŠ‚ç‚¹åœ¨å›¾ä¸­çš„ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯æ˜¯å¦æ­£ç¡®');
            log('7. éªŒè¯åˆ†æ”¯é¢„è§ˆçº¿åˆ›å»ºæµç¨‹ä¸­çš„ä½ç½®è®¡ç®—é€»è¾‘');
        }
        
        // æ£€æŸ¥è„šæœ¬åŠ è½½çŠ¶æ€
        function checkScriptStatus() {
            log('='.repeat(50));
            log('ğŸ“‹ æ£€æŸ¥è„šæœ¬åŠ è½½çŠ¶æ€');
            
            // æ£€æŸ¥å‡½æ•°æ˜¯å¦å­˜åœ¨
            const functions = [
                'testAudienceSplitPreviewLineFix',
                'runAudienceSplitPreviewTest',
                'testAudienceSplitPreviewLine'
            ];
            
            functions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    log(`âœ… å‡½æ•° ${funcName} å·²åŠ è½½`, 'success');
                } else {
                    log(`âŒ å‡½æ•° ${funcName} æœªæ‰¾åˆ°`, 'error');
                }
            });
            
            // æ£€æŸ¥è„šæœ¬æ ‡ç­¾
            const scripts = document.querySelectorAll('script[src*="test-audience-split-preview-fix"]');
            log(`ğŸ“„ æ‰¾åˆ° ${scripts.length} ä¸ªç›¸å…³è„šæœ¬æ ‡ç­¾`);
            
            scripts.forEach((script, index) => {
                log(`è„šæœ¬ ${index + 1}: ${script.src}`);
                log(`åŠ è½½çŠ¶æ€: ${script.readyState || 'æœªçŸ¥'}`);
            });
        }
        
        // å¼ºåˆ¶é‡æ–°åŠ è½½è„šæœ¬
        function forceReloadScript() {
            log('ğŸ”„ å¼ºåˆ¶é‡æ–°åŠ è½½è„šæœ¬...');
            
            // ç§»é™¤ç°æœ‰è„šæœ¬
            const existingScripts = document.querySelectorAll('script[src*="test-audience-split-preview-fix"]');
            existingScripts.forEach(script => {
                script.remove();
                log('ğŸ—‘ï¸ ç§»é™¤ç°æœ‰è„šæœ¬æ ‡ç­¾');
            });
            
            // åˆ›å»ºæ–°çš„è„šæœ¬æ ‡ç­¾
            const newScript = document.createElement('script');
            newScript.src = './test-audience-split-preview-fix.js?t=' + Date.now(); // æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜
            
            newScript.onload = function() {
                log('âœ… è„šæœ¬é‡æ–°åŠ è½½æˆåŠŸ', 'success');
                checkScriptStatus();
            };
            
            newScript.onerror = function() {
                log('âŒ è„šæœ¬é‡æ–°åŠ è½½å¤±è´¥', 'error');
            };
            
            document.body.appendChild(newScript);
            log('ğŸ“„ æ·»åŠ æ–°çš„è„šæœ¬æ ‡ç­¾');
        }
        
        // æµ‹è¯•é¢„è§ˆçº¿ä¿®å¤å‡½æ•°
        function testAudienceSplitPreviewLineFix() {
            log('='.repeat(50));
            log('ğŸ”§ æµ‹è¯•é¢„è§ˆçº¿ä¿®å¤å‡½æ•°');
            
            try {
                if (typeof testAudienceSplitPreviewLineFix === 'function') {
                    log('âœ… testAudienceSplitPreviewLineFix å‡½æ•°å­˜åœ¨', 'success');
                    
                    // å°è¯•è°ƒç”¨å‡½æ•°
                    const result = testAudienceSplitPreviewLineFix();
                    log('âœ… å‡½æ•°è°ƒç”¨æˆåŠŸ', 'success');
                    log(`è¿”å›ç»“æœ: ${JSON.stringify(result, null, 2)}`);
                } else {
                    log('âŒ testAudienceSplitPreviewLineFix å‡½æ•°ä¸å­˜åœ¨', 'error');
                    log('ğŸ’¡ å°è¯•æ£€æŸ¥å…¶ä»–å¯èƒ½çš„å‡½æ•°å...');
                    
                    // æ£€æŸ¥å…¶ä»–å¯èƒ½çš„å‡½æ•°
                    if (typeof runAudienceSplitPreviewTest === 'function') {
                        log('âœ… æ‰¾åˆ° runAudienceSplitPreviewTest å‡½æ•°', 'success');
                        const result = runAudienceSplitPreviewTest();
                        log('âœ… runAudienceSplitPreviewTest è°ƒç”¨æˆåŠŸ', 'success');
                        log(`è¿”å›ç»“æœ: ${JSON.stringify(result, null, 2)}`);
                    } else {
                        log('âŒ runAudienceSplitPreviewTest å‡½æ•°ä¹Ÿä¸å­˜åœ¨', 'error');
                    }
                }
            } catch (error) {
                log(`âŒ å‡½æ•°è°ƒç”¨å‡ºé”™: ${error.message}`, 'error');
                log(`é”™è¯¯å †æ ˆ: ${error.stack}`, 'error');
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('load', function() {
            log('ğŸ“ äººç¾¤åˆ†æµèŠ‚ç‚¹é¢„è§ˆçº¿æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ', 'success');
            log('ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•ï¼Œæˆ–ç›´æ¥è¿è¡Œå®Œæ•´æµ‹è¯•');
            
            // å»¶è¿Ÿæ£€æŸ¥è„šæœ¬çŠ¶æ€
            setTimeout(() => {
                log('\nğŸ” è‡ªåŠ¨æ£€æŸ¥è„šæœ¬åŠ è½½çŠ¶æ€...');
                checkScriptStatus();
            }, 1000);
        });
    </script>
    
    <!-- å¼•å…¥äººç¾¤åˆ†æµèŠ‚ç‚¹é¢„è§ˆçº¿æµ‹è¯•è„šæœ¬ -->
    <script src="./test-audience-split-preview-fix.js"></script>
</body>
</html>