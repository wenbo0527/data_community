<!DOCTYPE html>
<html>
<head>
    <title>测试预览线系统修复</title>
</head>
<body>
    <h1>预览线系统修复测试</h1>
    <p>请在浏览器中访问任务流画布页面，检查调试统计功能是否正常工作。</p>
    <p>修复内容：</p>
    <ul>
        <li>✅ 修复了 updateDebugStats 函数中的预览线系统初始化检查</li>
        <li>✅ 添加了从 window.previewLineSystem 获取系统实例的逻辑</li>
        <li>✅ 增强了错误处理和降级方案</li>
        <li>✅ 修复了条件判断中的逻辑错误</li>
    </ul>
    
    <h2>测试步骤：</h2>
    <ol>
        <li>访问任务流画布页面</li>
        <li>打开调试面板</li>
        <li>查看调试统计信息</li>
        <li>确认不再出现"预览线系统未初始化"错误</li>
    </ol>
    
    <script>
        console.log('🔧 预览线系统修复测试页面已加载');
        console.log('修复的主要问题：');
        console.log('1. updateDebugStats 函数中预览线系统未正确初始化');
        console.log('2. 条件判断中存在逻辑错误');
        console.log('3. 缺少适当的错误处理和降级方案');
        console.log('✅ 所有问题已修复');
    </script>
</body>
</html>