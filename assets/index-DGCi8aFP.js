import{B as J,r,p as T,b as W,c as X,h as y,f as e,w as a,e as d,s as Y,v as Z,o as ee,j as s,i as ae,x as te,t as le,M as q,_ as oe}from"./index-CsgcdrY7.js";const se=p=>(Y("data-v-f837ec83"),p=p(),Z(),p),ne={class:"table-management"},de={class:"page-header"},ue=se(()=>y("h2",null,"表管理",-1)),re={class:"search-section"},ie=J({__name:"index",setup(p){const b=r(!1),V=r(""),x=r(""),C=r(""),i=r(!1),_=r(null),w=r(),M=[{title:"表名",dataIndex:"tableName",width:200},{title:"数据库",dataIndex:"database",width:120},{title:"描述",dataIndex:"description",ellipsis:!0,tooltip:!0},{title:"业务分类",dataIndex:"category",width:120},{title:"负责人",dataIndex:"owner",width:120},{title:"状态",dataIndex:"status",slotName:"status",width:100},{title:"创建时间",dataIndex:"createTime",width:180},{title:"操作",slotName:"actions",width:180,fixed:"right"}],U=r([{id:1,tableName:"user_profile",database:"mysql",description:"用户基础信息表，包含用户的基本属性和画像数据",category:"用户数据",owner:"张三",status:"active",createTime:"2024-01-15 10:30:00"},{id:2,tableName:"transaction_records",database:"postgresql",description:"交易记录表，存储所有用户的交易明细",category:"交易数据",owner:"李四",status:"active",createTime:"2024-01-10 14:20:00"},{id:3,tableName:"product_catalog",database:"mysql",description:"产品目录表，包含所有产品的详细信息",category:"产品数据",owner:"王五",status:"inactive",createTime:"2024-01-05 09:15:00"}]),f=T({current:1,pageSize:10,total:3,showTotal:!0,showPageSize:!0}),n=T({tableName:"",database:"",description:"",category:"",owner:""}),z={tableName:[{required:!0,message:"请输入表名"}],database:[{required:!0,message:"请选择数据库"}],category:[{required:!0,message:"请选择业务分类"}],owner:[{required:!0,message:"请输入负责人"}]},h=()=>{b.value=!0,setTimeout(()=>{b.value=!1},500)},P=o=>{f.current=o},O=o=>{f.pageSize=o,f.current=1},B=o=>({active:"green",inactive:"orange",archived:"red"})[o]||"gray",D=o=>({active:"活跃",inactive:"非活跃",archived:"已归档"})[o]||"未知",L=o=>{console.log("查看表:",o)},Q=o=>{_.value=o,Object.assign(n,o),i.value=!0},$=o=>{console.log("删除表:",o),q.success("删除成功")},j=async()=>{var o;try{await((o=w.value)==null?void 0:o.validate())&&(console.log("提交表单:",n),q.success(_.value?"编辑成功":"创建成功"),i.value=!1,S())}catch(t){console.error("表单验证失败:",t)}},S=()=>{var o;_.value=null,Object.assign(n,{tableName:"",database:"",description:"",category:"",owner:""}),(o=w.value)==null||o.resetFields()};return W(()=>{}),(o,t)=>{const v=d("a-button"),R=d("a-input-search"),c=d("a-col"),u=d("a-option"),g=d("a-select"),N=d("a-row"),F=d("a-tag"),E=d("a-space"),K=d("a-table"),k=d("a-input"),m=d("a-form-item"),A=d("a-textarea"),G=d("a-form"),H=d("a-modal");return ee(),X("div",ne,[y("div",de,[ue,e(v,{type:"primary",onClick:t[0]||(t[0]=l=>i.value=!0)},{icon:a(()=>[e(ae(te))]),default:a(()=>[s(" 新建表 ")]),_:1})]),y("div",re,[e(N,{gutter:16},{default:a(()=>[e(c,{span:8},{default:a(()=>[e(R,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=l=>V.value=l),placeholder:"搜索表名、描述",onSearch:h},null,8,["modelValue"])]),_:1}),e(c,{span:4},{default:a(()=>[e(g,{modelValue:x.value,"onUpdate:modelValue":t[2]||(t[2]=l=>x.value=l),placeholder:"选择数据库","allow-clear":"",onChange:h},{default:a(()=>[e(u,{value:"mysql"},{default:a(()=>[s("MySQL")]),_:1}),e(u,{value:"postgresql"},{default:a(()=>[s("PostgreSQL")]),_:1}),e(u,{value:"oracle"},{default:a(()=>[s("Oracle")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{span:4},{default:a(()=>[e(g,{modelValue:C.value,"onUpdate:modelValue":t[3]||(t[3]=l=>C.value=l),placeholder:"状态","allow-clear":"",onChange:h},{default:a(()=>[e(u,{value:"active"},{default:a(()=>[s("活跃")]),_:1}),e(u,{value:"inactive"},{default:a(()=>[s("非活跃")]),_:1}),e(u,{value:"archived"},{default:a(()=>[s("已归档")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),e(K,{columns:M,data:U.value,loading:b.value,pagination:f,onPageChange:P,onPageSizeChange:O},{status:a(({record:l})=>[e(F,{color:B(l.status)},{default:a(()=>[s(le(D(l.status)),1)]),_:2},1032,["color"])]),actions:a(({record:l})=>[e(E,null,{default:a(()=>[e(v,{type:"text",size:"small",onClick:I=>L(l)},{default:a(()=>[s(" 查看 ")]),_:2},1032,["onClick"]),e(v,{type:"text",size:"small",onClick:I=>Q(l)},{default:a(()=>[s(" 编辑 ")]),_:2},1032,["onClick"]),e(v,{type:"text",size:"small",status:"danger",onClick:I=>$(l)},{default:a(()=>[s(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","loading","pagination"]),e(H,{visible:i.value,"onUpdate:visible":t[9]||(t[9]=l=>i.value=l),title:_.value?"编辑表":"新建表",width:"800px",onOk:j,onCancel:S},{default:a(()=>[e(G,{ref_key:"formRef",ref:w,model:n,rules:z,layout:"vertical"},{default:a(()=>[e(N,{gutter:16},{default:a(()=>[e(c,{span:12},{default:a(()=>[e(m,{label:"表名",field:"tableName"},{default:a(()=>[e(k,{modelValue:n.tableName,"onUpdate:modelValue":t[4]||(t[4]=l=>n.tableName=l),placeholder:"请输入表名"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:a(()=>[e(m,{label:"数据库",field:"database"},{default:a(()=>[e(g,{modelValue:n.database,"onUpdate:modelValue":t[5]||(t[5]=l=>n.database=l),placeholder:"选择数据库"},{default:a(()=>[e(u,{value:"mysql"},{default:a(()=>[s("MySQL")]),_:1}),e(u,{value:"postgresql"},{default:a(()=>[s("PostgreSQL")]),_:1}),e(u,{value:"oracle"},{default:a(()=>[s("Oracle")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{label:"表描述",field:"description"},{default:a(()=>[e(A,{modelValue:n.description,"onUpdate:modelValue":t[6]||(t[6]=l=>n.description=l),placeholder:"请输入表描述",rows:3},null,8,["modelValue"])]),_:1}),e(m,{label:"业务分类",field:"category"},{default:a(()=>[e(g,{modelValue:n.category,"onUpdate:modelValue":t[7]||(t[7]=l=>n.category=l),placeholder:"选择业务分类"},{default:a(()=>[e(u,{value:"user"},{default:a(()=>[s("用户数据")]),_:1}),e(u,{value:"transaction"},{default:a(()=>[s("交易数据")]),_:1}),e(u,{value:"product"},{default:a(()=>[s("产品数据")]),_:1}),e(u,{value:"marketing"},{default:a(()=>[s("营销数据")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"负责人",field:"owner"},{default:a(()=>[e(k,{modelValue:n.owner,"onUpdate:modelValue":t[8]||(t[8]=l=>n.owner=l),placeholder:"请输入负责人"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}}),me=oe(ie,[["__scopeId","data-v-f837ec83"]]);export{me as default};
