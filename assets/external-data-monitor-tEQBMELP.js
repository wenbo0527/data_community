import{i as le}from"./index-CeY0obGP.js";import{al as re,B as M,r as T,J as ie,c as q,o as C,h as i,f as t,e as u,w as a,j as r,n as N,t as p,i as g,_ as E,g as P,F as K,d as F,b as ue,K as he,p as fe,ad as ye,m as se}from"./index-CsgcdrY7.js";import{a as I}from"./index-t--hEgTQ.js";import{f as O,d as L,e as Q}from"./calculations-CX3sW4IW.js";import{I as oe,a as ve}from"./index-BrBaLzo0.js";const be=re("budget",{state:()=>({budgetList:[],loading:!1,error:null}),actions:{async fetchBudgetList(l){this.loading=!0;try{return(await I.get("/api/budget/list",{params:l})).data.data}catch(o){throw this.error={message:o.message},o}finally{this.loading=!1}},async uploadBudget(l){const o=new FormData;o.append("file",l);try{return(await I.post("/api/budget/upload",o,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw this.error={message:s.message},s}},async deleteBudget(l){try{return(await I.delete(`/api/budget/${l}`)).data}catch(o){throw this.error={message:o.message},o}},clearError(){this.error=null}}}),we=re("externalData",{state:()=>({burndownData:[],warningData:[],targetLoanOptions:[],loading:!1,error:null}),actions:{async fetchBurndownData(l={}){this.loading=!0;try{const s=(await I.get("/api/external-data/burndown",{params:l})).data;this.burndownData=s.data}catch(o){this.error={message:o.message}}finally{this.loading=!1}},async fetchWarningData(l={}){this.loading=!0;try{const s=(await I.get("/api/external-data/warning",{params:l})).data;this.warningData=s.data}catch(o){this.error={message:o.message}}finally{this.loading=!1}},async fetchTargetLoanOptions(){try{const l=be(),{data:o}=await l.fetchBudgetList({page:1,pageSize:100});this.targetLoanOptions=[...new Set(o.map(s=>s.targetLoan))].sort((s,f)=>s-f)}catch(l){this.error={message:l.message}}},clearError(){this.error=null}}}),Ce={class:"budget-consumption-tab"},Re={class:"time-range-selector"},xe=["onClick"],Te={class:"comparison-cell"},Se={class:"comparison-cell"},Ae=M({__name:"BudgetConsumptionTab",props:{platform:{type:String,required:!0},businessType:{type:String,required:!0},timeRange:{type:String,required:!0}},emits:["time-range-change"],setup(l,{emit:o}){const s=l,f=ie(),b=T([{name:"实际费用",current:12e4,change:2e4,type:"amount"},{name:"征信调用量",current:1500,change:200,type:"number"},{name:"征信单笔成本",current:80,change:5,type:"amount"},{name:"外部数据使用量",current:1e3,change:150,type:"number",onClick:()=>{f.push({path:"/exploration/external-data-evaluation",query:{platform:s.platform}})}},{name:"外部数据调用量",current:500,change:50,type:"number"},{name:"外部数据平均单价",current:240,change:20,type:"amount"}]),y=()=>{o("time-range-change",s.timeRange)},m=h=>h>0?"warning-text":"success-text";return(h,S)=>{const R=u("a-radio"),k=u("a-radio-group"),v=u("a-table-column"),w=u("a-table");return C(),q("div",Ce,[i("div",Re,[t(k,{value:l.timeRange,type:"button",onChange:y},{default:a(()=>[t(R,{value:"month"},{default:a(()=>[r("月度比对")]),_:1}),t(R,{value:"quarter"},{default:a(()=>[r("季度比对")]),_:1})]),_:1},8,["value"])]),t(w,{data:b.value,pagination:!1,bordered:{wrapper:!0,cell:!0},class:"budget-table"},{columns:a(()=>[t(v,{title:"关键指标","data-index":"name",width:120},{cell:a(({record:n})=>[i("div",{onClick:n.onClick,class:N({clickable:n.onClick})},p(n.name),11,xe)]),_:1}),t(v,{title:"当期数据","data-index":"current",width:150},{cell:a(({record:n})=>[i("div",Te,p(n.type==="amount"?g(O)(n.current):n.current),1)]),_:1}),t(v,{title:"环比","data-index":"change",width:150},{cell:a(({record:n})=>[i("div",Se,[i("span",{class:N(m(n.change))},p(g(L)(n.change,n.type)),3)])]),_:1})]),_:1},8,["data"])])}}}),ke=E(Ae,[["__scopeId","data-v-2b39cd8f"]]),Ne={class:"business-process-tab"},De={class:"time-range-selector"},Le={class:"comparison-cell"},Fe={class:"comparison-cell"},$e=M({__name:"BusinessProcessTab",props:{platform:{type:String,required:!0},businessType:{type:String,required:!0},timeRange:{type:String,required:!0}},emits:["time-range-change"],setup(l,{emit:o}){const s=l,f=T([{customerType:"新户",processName:"授信申请量",creditApplyCount:{current:5e3,change:500},rowSpan:2},{customerType:"新户",processName:"授信通过率",creditApprovalRate:{current:.65,change:.05},rowSpan:0},{customerType:"新户",processName:"授信平均额度",creditLimit:{current:5e6,change:5e5},rowSpan:2},{customerType:"新户",processName:"支用申请量",loanApplyCount:{current:3e3,change:300},rowSpan:0},{customerType:"新户",processName:"支用通过率",loanApprovalRate:{current:.8,change:.02},rowSpan:2},{customerType:"新户",processName:"支用金额",loanAmount:{current:3e6,change:3e5},rowSpan:0},{customerType:"新户",processName:"平均期数",averageTerm:{current:12,change:1},rowSpan:2},{customerType:"新户",processName:"平均定价",averagePricing:{current:.15,change:.01},rowSpan:0},{customerType:"老户",processName:"授信申请量",creditApplyCount:{current:4e3,change:400},rowSpan:2},{customerType:"老户",processName:"授信通过率",creditApprovalRate:{current:.6,change:.04},rowSpan:0},{customerType:"老户",processName:"授信平均额度",creditLimit:{current:4e6,change:4e5},rowSpan:2},{customerType:"老户",processName:"支用申请量",loanApplyCount:{current:2e3,change:200},rowSpan:0},{customerType:"老户",processName:"支用通过率",loanApprovalRate:{current:.75,change:.01},rowSpan:2},{customerType:"老户",processName:"支用金额",loanAmount:{current:2e6,change:2e5},rowSpan:0},{customerType:"老户",processName:"平均期数",averageTerm:{current:10,change:.5},rowSpan:2},{customerType:"老户",processName:"平均定价",averagePricing:{current:.12,change:.005},rowSpan:0}]),b=()=>{o("time-range-change",s.timeRange)},y=h=>h>0?"warning-text":"success-text",m=({record:h,column:S,rowIndex:R})=>{if(S.dataIndex==="customerType"){const k=f.value.filter(w=>w.customerType===h.customerType);return{rowspan:f.value.findIndex(w=>w.customerType===h.customerType)===R?k.length:0,colspan:1}}return{rowspan:1,colspan:1}};return(h,S)=>{const R=u("a-radio"),k=u("a-radio-group"),v=u("a-table-column"),w=u("a-table");return C(),q("div",Ne,[i("div",De,[t(k,{value:l.timeRange,type:"button",onChange:b},{default:a(()=>[t(R,{value:"month"},{default:a(()=>[r("月度比对")]),_:1}),t(R,{value:"quarter"},{default:a(()=>[r("季度比对")]),_:1})]),_:1},8,["value"])]),t(w,{data:f.value,pagination:!1,bordered:{wrapper:!0,cell:!0},"span-method":m,class:"process-table"},{columns:a(()=>[t(v,{title:"客群结构","data-index":"customerType",width:120},{cell:a(({record:n,rowIndex:z})=>[z%8===0?(C(),q(K,{key:0},[r(p(n.customerType),1)],64)):P("",!0)]),_:1}),t(v,{title:"业务流程","data-index":"processName",width:150},{cell:a(({record:n})=>[r(p(n.processName),1)]),_:1}),t(v,{title:"实际数据","data-index":"currentValue",width:150},{cell:a(({record:n})=>[i("div",Le,p(n.processName==="授信申请量"?n.creditApplyCount.current:n.processName==="授信通过率"?g(Q)(n.creditApprovalRate.current):n.processName==="授信平均额度"?g(O)(n.creditLimit.current):n.processName==="支用申请量"?n.loanApplyCount.current:n.processName==="支用通过率"?g(Q)(n.loanApprovalRate.current):n.processName==="支用金额"?g(O)(n.loanAmount.current):n.processName==="平均期数"?n.averageTerm.current:g(Q)(n.averagePricing.current)),1)]),_:1}),t(v,{title:"环比","data-index":"change",width:150},{cell:a(({record:n})=>[i("div",Fe,[i("span",{class:N(y(n.processName==="授信申请量"?n.creditApplyCount.change:n.processName==="授信通过率"?n.creditApprovalRate.change:n.processName==="授信平均额度"?n.creditLimit.change:n.processName==="支用申请量"?n.loanApplyCount.change:n.processName==="支用通过率"?n.loanApprovalRate.change:n.processName==="支用金额"?n.loanAmount.change:n.processName==="平均期数"?n.averageTerm.change:n.averagePricing.change))},p(n.processName==="授信申请量"?g(L)(n.creditApplyCount.change,"number"):n.processName==="授信通过率"?g(L)(n.creditApprovalRate.change,"percent"):n.processName==="授信平均额度"?g(L)(n.creditLimit.change,"amount"):n.processName==="支用申请量"?g(L)(n.loanApplyCount.change,"number"):n.processName==="支用通过率"?g(L)(n.loanApprovalRate.change,"percent"):n.processName==="支用金额"?g(L)(n.loanAmount.change,"amount"):n.processName==="平均期数"?g(L)(n.averageTerm.change,"number"):g(L)(n.averagePricing.change,"percent")),3)])]),_:1})]),_:1},8,["data"])])}}}),Be=E($e,[["__scopeId","data-v-19695182"]]),Ve={class:"modal-container"},qe={class:"summary-section"},Pe=M({__name:"PlatformProductModal",props:{visible:{type:Boolean,required:!0},platform:{type:String,required:!0},businessType:{type:String,required:!0},actualLoan:{type:Number,required:!0},externalDataCost:{type:Number,required:!0},budgetStatus:{type:String,required:!0,default:"超支"}},emits:["update:visible"],setup(l,{emit:o}){const s=T("month"),f=b=>{s.value=b};return(b,y)=>{const m=u("a-descriptions-item"),h=u("a-descriptions"),S=u("a-tab-pane"),R=u("a-tabs"),k=u("a-modal");return C(),F(k,{visible:l.visible,"onUpdate:visible":y[0]||(y[0]=v=>o("update:visible",v)),title:`${l.platform} - 详细数据`,width:"1200px",footer:!1},{default:a(()=>[i("div",Ve,[i("div",qe,[t(h,{column:4,bordered:""},{default:a(()=>[t(m,{label:"业务类型"},{default:a(()=>[r(p(l.businessType),1)]),_:1}),t(m,{label:"平台产品"},{default:a(()=>[r(p(l.platform),1)]),_:1}),t(m,{label:"实际放款"},{default:a(()=>[r(p(g(O)(l.actualLoan)),1)]),_:1}),t(m,{label:"实际费用"},{default:a(()=>[r(p(g(O)(l.externalDataCost)),1)]),_:1}),t(m,{label:"预算状态"},{default:a(()=>[r(p(l.budgetStatus),1)]),_:1})]),_:1})]),t(R,{type:"rounded",class:"tabs-section"},{default:a(()=>[t(S,{key:"budget",title:"预算消耗对比"},{default:a(()=>[t(ke,{platform:l.platform,businessType:l.businessType,timeRange:s.value,onTimeRangeChange:f},null,8,["platform","businessType","timeRange"])]),_:1}),t(S,{key:"process",title:"业务过程比对"},{default:a(()=>[t(Be,{platform:l.platform,businessType:l.businessType,timeRange:s.value,onTimeRangeChange:f},null,8,["platform","businessType","timeRange"])]),_:1})]),_:1})])]),_:1},8,["visible","title"])}}}),Ie=E(Pe,[["__scopeId","data-v-a0ff22a3"]]),Oe=M({__name:"BudgetBurndownTabs",props:{chartData:{type:Array,required:!0},updateChart:{type:Function,required:!0}},setup(l){const o=l,s=T("month"),f=T(),b=y=>{o.updateChart(o.chartData.filter(m=>m.granularity===y))};return ue(()=>{console.log("初始化ECharts实例，数据长度:",o.chartData.length),le(f.value,void 0,{useCoarsePointer:!0,pointerSize:3,renderer:"canvas",eventProcessors:{touch:{passive:!0},mouse:{passive:!0}}});const y=o.chartData.filter(m=>m.granularity==="month");console.log("过滤后的初始数据:",JSON.parse(JSON.stringify(y))),o.updateChart(y),he(()=>o.chartData,m=>{console.log("接收到新数据集，总条数:",m.length);const h=m.filter(S=>S.granularity===s.value);console.log("当前激活标签:",s.value,"过滤后数据:",h),o.updateChart(h)})}),(y,m)=>{const h=u("a-tab-pane"),S=u("a-tabs"),R=u("a-card");return C(),F(R,{title:"预算Burn-down图"},{default:a(()=>[t(S,{value:s.value,"onUpdate:value":m[0]||(m[0]=k=>s.value=k),onChange:b},{default:a(()=>[t(h,{key:"month",tab:"月度"},{default:a(()=>[i("div",{ref_key:"burndownChartRef",ref:f,class:"chart-container"},null,512)]),_:1}),t(h,{key:"quarter",tab:"季度"},{default:a(()=>[i("div",{ref_key:"burndownChartRef",ref:f,class:"chart-container"},null,512)]),_:1}),t(h,{key:"year",tab:"年度"},{default:a(()=>[i("div",{ref_key:"burndownChartRef",ref:f,class:"chart-container"},null,512)]),_:1})]),_:1},8,["value"])]),_:1})}}}),Me=E(Oe,[["__scopeId","data-v-aad538b9"]]),Ee={class:"external-data-monitor"},Ue={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"16px"}},ze={class:"comparison-cell"},Je={class:"cost-info"},Ye={class:"comparison-cell"},je={class:"cost-info"},We={class:"comparison-cell"},Qe={class:"cost-info"},Ke=M({__name:"external-data-monitor",setup(l){const o=we(),s=fe({businessType:"",platform:"",targetLoan:void 0,year:void 0,granularity:"month",healthStatus:[],dateRange:[]}),f=T(!1),b=T();ie();const y=T(!1),m=T(""),h=T(null),S=c=>{b.value=c,f.value=!0},R=()=>{y.value=!y.value},k=Array.from({length:5},(c,d)=>(new Date().getFullYear()-d).toString()),v=T();let w=null;const n=T([]),z=T([]),$=c=>(c==null?void 0:c.toLocaleString("zh-CN",{style:"currency",currency:"CNY"}))||"-",A=c=>c?`${(c*100).toFixed(2)}%`:"-",ce=()=>{console.log("导出数据功能")},J=c=>{if(v.value&&w&&(c!=null&&c.length)){const d=v.value;d.addEventListener("wheel",()=>{},{passive:!0}),d.addEventListener("mousewheel",()=>{},{passive:!0}),c.map(_=>({..._,warning:_.actual-_.budget<0}));const x={tooltip:{trigger:"axis",formatter:_=>_.map(D=>{var U;const B=(U=D.data)!=null&&U.warning?" (预警)":"";return`${D.seriesName}: ${$(D.value)}${B}`}).join("<br/>")},legend:{data:["预估剩余","实际剩余","预警线"],bottom:0},grid:{left:"3%",right:"4%",bottom:"10%",top:"3%",containLabel:!0},markLine:{silent:!0,data:[{yAxis:0,lineStyle:{color:"#ff4d4f",type:"dashed"},label:{formatter:"预警线",position:"start"}}]},xAxis:{type:"category",data:c.map(_=>_.month),axisLabel:{rotate:45}},yAxis:{type:"value",name:"金额（元）",axisLabel:{formatter:_=>$(_)}},series:[{name:"预估剩余",type:"line",data:c.map(_=>_.budget),itemStyle:{color:"#165DFF"},smooth:!0,symbol:"circle"},{name:"实际剩余",type:"line",data:c.map(_=>_.actual),itemStyle:{color:"#FF7D00"},smooth:!0,symbol:"circle"},{name:"预警线",type:"line",data:c.map(_=>_.budget*.9),itemStyle:{color:"#F53F3F",opacity:.7},lineStyle:{type:"dashed"},symbol:"none"}]};w.setOption(x)}},pe=()=>{var c;v.value&&(w=le(v.value),(c=o.burndownData)!=null&&c.length&&J(o.burndownData))},G=async()=>{const c={businessType:s.businessType||void 0,platform:s.platform||void 0,targetLoan:s.targetLoan,granularity:s.granularity,startMonth:s.dateRange[0]?s.granularity==="quarter"?`${new Date(s.dateRange[0]).getFullYear()}-Q${Math.floor(new Date(s.dateRange[0]).getMonth()/3)+1}`:new Date(s.dateRange[0]).toISOString().slice(0,7):null,endMonth:s.dateRange[1]?s.granularity==="quarter"?`${new Date(s.dateRange[1]).getFullYear()}-Q${Math.floor(new Date(s.dateRange[1]).getMonth()/3)+1}`:s.dateRange[1].toISOString().slice(0,7):null};await Promise.all([o.fetchBurndownData(c),o.fetchWarningData(c)]),J(o.burndownData),n.value=o.warningData},me=()=>{s.businessType="",s.platform="",s.targetLoan=void 0,s.dateRange=[],G()};return window.addEventListener("resize",()=>{w==null||w.resize()},{passive:!0}),ue(async()=>{var c;try{if(m.value="数据加载中...",await Promise.all([o.fetchBurndownData(),o.fetchWarningData(),o.fetchTargetLoanOptions()]),await ye(),v.value){const d=v.value;d.addEventListener("wheel",()=>{},{passive:!0}),d.addEventListener("mousewheel",()=>{},{passive:!0}),pe(),n.value=o.warningData,m.value="数据加载完成"}}catch(d){console.error("初始化数据失败:",d),m.value=`数据加载失败: ${d.message||"未知错误"}`,h.value=((c=d.response)==null?void 0:c.data)||null}finally{y.value=!0}}),(c,d)=>{var X,Z,ee,te,ae,ne;const x=u("a-option"),_=u("a-select"),D=u("a-form-item"),B=u("a-button"),U=u("a-form"),Y=u("a-card"),H=u("a-space"),V=u("a-table-column"),de=u("a-link"),j=u("a-tooltip"),ge=u("a-table"),W=u("a-descriptions-item"),_e=u("a-descriptions");return C(),q("div",Ee,[t(Y,{class:"filter-card"},{default:a(()=>[t(U,{model:s,layout:"inline"},{default:a(()=>[t(D,{field:"businessType",label:"业务类型"},{default:a(()=>[t(_,{modelValue:s.businessType,"onUpdate:modelValue":d[0]||(d[0]=e=>s.businessType=e),placeholder:"请选择业务类型",style:{width:"200px"}},{default:a(()=>[t(x,{value:"助贷业务"},{default:a(()=>[r("助贷业务")]),_:1}),t(x,{value:"融担类业务"},{default:a(()=>[r("融担类业务")]),_:1}),t(x,{value:"直贷类业务"},{default:a(()=>[r("直贷类业务")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(D,{field:"platform",label:"平台产品"},{default:a(()=>[t(_,{modelValue:s.platform,"onUpdate:modelValue":d[1]||(d[1]=e=>s.platform=e),placeholder:"请选择平台产品",style:{width:"200px"}},{default:a(()=>[t(x,{value:"产品A"},{default:a(()=>[r("产品A")]),_:1}),t(x,{value:"产品B"},{default:a(()=>[r("产品B")]),_:1}),t(x,{value:"产品C"},{default:a(()=>[r("产品C")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(D,{field:"targetLoan",label:"目标贷余"},{default:a(()=>[t(_,{modelValue:s.targetLoan,"onUpdate:modelValue":d[2]||(d[2]=e=>s.targetLoan=e),placeholder:"请选择目标贷余",style:{width:"200px"}},{default:a(()=>[(C(!0),q(K,null,se(g(o).targetLoanOptions,e=>(C(),F(x,{key:e,value:e},{default:a(()=>[r(p($(e)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(D,{field:"year",label:"年份"},{default:a(()=>[t(_,{modelValue:s.year,"onUpdate:modelValue":d[3]||(d[3]=e=>s.year=e),placeholder:"请选择年份",style:{width:"160px"},"allow-clear":""},{default:a(()=>[(C(!0),q(K,null,se(g(k),e=>(C(),F(x,{key:e,value:e},{default:a(()=>[r(p(e),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(D,null,{default:a(()=>[t(B,{type:"primary",onClick:G},{default:a(()=>[r("查询")]),_:1}),t(B,{style:{"margin-left":"8px"},onClick:me},{default:a(()=>[r("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(Me,{"chart-data":z.value,"update-chart":J},null,8,["chart-data"]),t(Y,{class:"warning-card",title:"预算健康度预警"},{default:a(()=>[i("div",Ue,[t(H,null,{default:a(()=>[t(_,{modelValue:s.healthStatus,"onUpdate:modelValue":d[4]||(d[4]=e=>s.healthStatus=e),placeholder:"健康度状态",style:{width:"120px"},multiple:""},{default:a(()=>[t(x,{value:"正常"},{default:a(()=>[r("正常")]),_:1}),t(x,{value:"超支"},{default:a(()=>[r("超支")]),_:1}),t(x,{value:"消耗过慢"},{default:a(()=>[r("消耗过慢")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(B,{type:"primary",onClick:ce},{default:a(()=>[r("导出数据")]),_:1})]),t(ge,{data:n.value,pagination:!1,bordered:{wrapper:!0,cell:!0}},{columns:a(()=>[t(V,{title:"业务类型","data-index":"businessType",width:120}),t(V,{title:"平台产品","data-index":"platform",width:120},{cell:a(({record:e})=>[t(de,{onClick:Ge=>S(e)},{default:a(()=>[r(p(e.platform),1)]),_:2},1032,["onClick"])]),_:1}),t(V,{title:"实际放款",align:"center",width:150},{cell:a(({record:e})=>[i("span",{class:N({"warning-text":e.actualLoan>e.estimatedLoan*1.1})},p($(e.actualLoan)),3)]),_:1}),t(V,{title:"实际费用",align:"center",width:200},{cell:a(({record:e})=>[i("div",ze,[t(j,{content:`预算: ${$(e.estimatedCost)}
实际: ${$(e.actualCost)}
偏离率: ${A((e.actualCost-e.estimatedCost)/e.estimatedCost)}`},{default:a(()=>[i("div",Je,[i("span",{class:N(["cost-value",{"warning-text":e.actualCost>e.estimatedCost*1.1}])},p($(e.actualCost)),3),i("span",{class:N(["deviation-value",{"warning-text":e.actualCost-e.estimatedCost>e.estimatedCost*.1}])},[r(" ("+p(A((e.actualCost-e.estimatedCost)/e.estimatedCost))+") ",1),e.actualCost-e.estimatedCost>e.estimatedCost*.1?(C(),F(g(oe),{key:0,class:"trend-icon warning-text"})):P("",!0)],2)])]),_:2},1032,["content"])])]),_:1}),t(V,{title:"年化数据成本",align:"center",width:200},{cell:a(({record:e})=>[i("div",Ye,[t(j,{content:`预算: ${A(e.estimatedAnnualCost)}
实际: ${A(e.actualAnnualCost)}
偏离率: ${A((e.actualAnnualCost-e.estimatedAnnualCost)/e.estimatedAnnualCost)}`},{default:a(()=>[i("div",je,[i("span",{class:N(["cost-value",{"warning-text":e.actualAnnualCost>e.estimatedAnnualCost*1.1}])},p(A(e.actualAnnualCost)),3),i("span",{class:N(["deviation-value",{"warning-text":e.actualAnnualCost-e.estimatedAnnualCost>e.estimatedAnnualCost*.1}])},[r(" ("+p(A((e.actualAnnualCost-e.estimatedAnnualCost)/e.estimatedAnnualCost))+") ",1),e.actualAnnualCost-e.estimatedAnnualCost>e.estimatedAnnualCost*.1?(C(),F(g(oe),{key:0,class:"trend-icon warning-text"})):P("",!0)],2)])]),_:2},1032,["content"])])]),_:1}),t(V,{title:"无风险收益",align:"center",width:180},{cell:a(({record:e})=>[i("div",We,[t(j,{content:`预算: ${A(e.estimatedRiskFreeReturn)}
实际: ${A(e.actualRiskFreeReturn)}
偏离率: ${A((e.actualRiskFreeReturn-e.estimatedRiskFreeReturn)/e.estimatedRiskFreeReturn)}`},{default:a(()=>[i("div",Qe,[i("span",{class:N(["cost-value",{"warning-text":e.actualRiskFreeReturn<e.estimatedRiskFreeReturn*.9}])},p(A(e.actualRiskFreeReturn)),3),i("span",{class:N(["deviation-value",{"warning-text":e.actualRiskFreeReturn-e.estimatedRiskFreeReturn<e.estimatedRiskFreeReturn*-.1}])},[r(" ("+p(A((e.actualRiskFreeReturn-e.estimatedRiskFreeReturn)/e.estimatedRiskFreeReturn))+") ",1),e.actualRiskFreeReturn-e.estimatedRiskFreeReturn<e.estimatedRiskFreeReturn*-.1?(C(),F(g(ve),{key:0,class:"trend-icon warning-text"})):P("",!0)],2)])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])]),_:1}),t(Ie,{visible:f.value,"onUpdate:visible":d[5]||(d[5]=e=>f.value=e),platform:((X=b.value)==null?void 0:X.platform)||"",businessType:((Z=b.value)==null?void 0:Z.businessType)||"",targetLoan:((ee=b.value)==null?void 0:ee.targetLoan)||0,actualLoan:((te=b.value)==null?void 0:te.actualLoan)||0,externalDataCost:((ae=b.value)==null?void 0:ae.externalDataCost)||0,budgetStatus:((ne=b.value)==null?void 0:ne.budgetStatus)||"超支"},null,8,["visible","platform","businessType","targetLoan","actualLoan","externalDataCost","budgetStatus"]),y.value?(C(),F(Y,{key:0,class:"debug-card",title:"调试信息"},{default:a(()=>[t(H,{direction:"vertical"},{default:a(()=>[t(B,{type:"outline",onClick:R},{default:a(()=>[r(p(y.value?"隐藏调试信息":"显示调试信息"),1)]),_:1}),t(_e,{column:1,bordered:""},{default:a(()=>[t(W,{label:"数据加载状态"},{default:a(()=>[r(p(m.value),1)]),_:1}),t(W,{label:"接口返回数据"},{default:a(()=>[i("pre",null,p(JSON.stringify(h.value,null,2)),1)]),_:1}),t(W,{label:"筛选条件"},{default:a(()=>[i("pre",null,p(JSON.stringify(s,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})):P("",!0)])}}}),at=E(Ke,[["__scopeId","data-v-a93849bc"]]);export{at as default};
