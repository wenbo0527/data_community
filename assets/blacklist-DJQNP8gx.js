import{A as N,B as j,c as A,o as x,h as L,C as K,n as E,D as H,a as S,E as M,_ as W,z as q,x as O,d as F,w as n,e as o,f as t,a8 as w,j as b,a9 as y}from"./index-CsgcdrY7.js";const G=j({name:"IconUndo",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:l}){const r=H("icon"),c=S(()=>[r,`${r}-undo`,{[`${r}-spin`]:e.spin}]),a=S(()=>{const i={};return e.size&&(i.fontSize=M(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:c,innerStyle:a,onClick:i=>{l("click",i)}}}}),J=["stroke-width","stroke-linecap","stroke-linejoin"];function Q(e,l,r,c,a,d){return x(),A("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:E(e.cls),style:K(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:l[0]||(l[0]=(...i)=>e.onClick&&e.onClick(...i))},l[1]||(l[1]=[L("path",{d:"m15.322 23.78-7.778-7.778 7.778-7.778M8.81 16H29.5C35.851 16 41 21.15 41 27.5 41 33.852 35.851 39 29.5 39H17"},null,-1)]),14,J)}var k=N(G,[["render",Q]]);const X=Object.assign(k,{install:(e,l)=>{var r;const c=(r=l==null?void 0:l.iconPrefix)!=null?r:"";e.component(c+k.name,k)}}),f={blacklist:[{username:"用户1",phone:"13800138000",idCard:"110101199003077654",addTime:"2023-01-01 10:00:00",banTime:"2023-01-15 14:30:00",policy:"全局禁用",source:"短信系统"},{username:"用户2",phone:"13900139000",idCard:"310115198502128765",addTime:"2023-02-01 09:15:00",banTime:"2023-02-10 11:20:00",policy:"全局禁用",source:"AI外呼-九四"},{username:"用户4",phone:"13600136000",idCard:"510104199208156543",addTime:"2023-03-05 16:20:00",banTime:"2023-03-20 09:45:00",policy:"全局禁用",source:"AI外呼-百应"},{username:"用户5",phone:"13500135000",idCard:"330106199107189876",addTime:"2023-04-10 11:30:00",banTime:"2023-04-25 14:15:00",policy:"全局禁用",source:"人工电销"},{username:"用户6",phone:"13400134000",idCard:"420102199309123210",addTime:"2023-05-15 08:40:00",banTime:"2023-05-30 16:50:00",policy:"全局禁用",source:"AI外呼-百应"}],unbanned:[{username:"用户3",phone:"13700137000",idCard:"440305199512123456",addTime:"2022-12-01 08:00:00",banTime:"2022-12-20 10:00:00",unbanTime:"2023-01-05 15:00:00",policy:"全局禁用",source:"客服系统"},{username:"用户7",phone:"13300133000",idCard:"320103199410154321",addTime:"2023-01-10 09:20:00",banTime:"2023-01-25 11:40:00",unbanTime:"2023-02-10 14:30:00",policy:"全局禁用",source:"人工电销"},{username:"用户8",phone:"13200132000",idCard:"130105199605167890",addTime:"2023-02-15 13:10:00",banTime:"2023-03-01 15:25:00",unbanTime:"2023-03-15 10:20:00",policy:"全局禁用",source:"AI外呼-百应"}]},Y={name:"BlacklistManagement",components:{IconUndo:X,IconPlus:O,IconUpload:q},data(){const e=f.blacklist,l=f.unbanned,r=[{title:"用户名",dataIndex:"username",width:150,ellipsis:!0,tooltip:!0},{title:"手机号",dataIndex:"phone",width:160,ellipsis:!0,tooltip:!0,render:({record:a})=>this.maskPhone(a.phone)},{title:"身份证",dataIndex:"idCard",width:200,ellipsis:!0,tooltip:!0,render:({record:a})=>this.maskIdCard(a.idCard)},{title:"添加时间",dataIndex:"addTime",width:180,ellipsis:!0,tooltip:!0},{title:"禁用时间",dataIndex:"banTime",width:180,ellipsis:!0,tooltip:!0,render:({record:a})=>a.banTime||"永久禁用"},{title:"禁用策略",dataIndex:"policy",width:150,ellipsis:!0,tooltip:!0},{title:"来源",dataIndex:"source",width:150,ellipsis:!0,tooltip:!0},{title:"操作",dataIndex:"operations",width:120,fixed:"right",slotName:"operations"}],c=[{title:"用户名",dataIndex:"username",width:150,ellipsis:!0,tooltip:!0},{title:"手机号",dataIndex:"phone",width:160,ellipsis:!0,tooltip:!0,render:({record:a})=>this.maskPhone(a.phone)},{title:"身份证",dataIndex:"idCard",width:200,ellipsis:!0,tooltip:!0,render:({record:a})=>this.maskIdCard(a.idCard)},{title:"添加时间",dataIndex:"addTime",width:180,ellipsis:!0,tooltip:!0},{title:"禁用时间",dataIndex:"banTime",width:180,ellipsis:!0,tooltip:!0},{title:"解禁时间",dataIndex:"unbanTime",width:180,ellipsis:!0,tooltip:!0},{title:"禁用策略",dataIndex:"policy",width:150,ellipsis:!0,tooltip:!0},{title:"来源",dataIndex:"source",width:150,ellipsis:!0,tooltip:!0}];return console.log("初始化数据状态:",{blacklistData:e,unbannedData:l}),{formState:{username:"",phone:"",idCard:"",addTimeRange:[],banTimeRange:[]},activeTab:"blacklist",blacklistData:e,unbannedData:l,blacklistColumns:r,unbannedColumns:c}},mounted(){console.log("mounted时blacklistData:",this.blacklistData),console.log("mounted时unbannedData:",this.unbannedData)},watch:{blacklistData:{handler(e){console.log("blacklistData变更:",e)},deep:!0},unbannedData:{handler(e){console.log("unbannedData变更:",e)},deep:!0}},methods:{maskPhone(e){return e?e.slice(0,3)+"****"+e.slice(-4):""},maskIdCard(e){return e?e.slice(0,6)+"********"+e.slice(-4):""},handleTableScroll(){console.log("表格滚动事件触发")},handleSearch(){console.log("搜索条件:",this.formState),console.log("原始黑名单数据:",f.blacklist),this.blacklistData=f.blacklist.filter(e=>{const l=!this.formState.username||e.username.includes(this.formState.username),r=!this.formState.phone||e.phone.includes(this.formState.phone),c=!this.formState.idCard||e.idCard.includes(this.formState.idCard),a=!this.formState.addTimeRange.length||new Date(e.addTime)>=new Date(this.formState.addTimeRange[0])&&new Date(e.addTime)<=new Date(this.formState.addTimeRange[1]),d=!this.formState.banTimeRange.length||new Date(e.banTime)>=new Date(this.formState.banTimeRange[0])&&new Date(e.banTime)<=new Date(this.formState.banTimeRange[1]),i=l&&r&&c&&a&&d;return console.log("筛选结果:",{item:e,result:i}),i}),console.log("筛选后的黑名单数据:",this.blacklistData)},handleReset(){console.log("重置表单"),this.formState={username:"",phone:"",idCard:"",addTimeRange:[],banTimeRange:[]},this.handleSearch()},handleCreate(){},handleImport(){},handleUnban(e){console.log("解禁用户:",e),this.unbannedData.push({...e,unbanTime:new Date().toLocaleString()}),this.blacklistData=this.blacklistData.filter(l=>l!==e)}}};function Z(e,l,r,c,a,d){const i=o("a-input"),u=o("a-form-item"),p=o("a-space"),h=o("a-col"),_=o("a-row"),g=o("a-range-picker"),I=o("a-form"),m=o("a-button"),D=o("icon-plus"),v=o("icon-upload"),V=o("icon-undo"),R=o("a-tooltip"),T=o("a-table"),C=o("a-tab-pane"),z=o("a-tabs"),U=o("a-card"),P=o("a-layout-content"),B=o("a-layout");return x(),F(B,null,{default:n(()=>[t(P,{class:"content"},{default:n(()=>[t(U,{bordered:!1},{default:n(()=>[t(_,{gutter:16,align:"middle",style:{"margin-bottom":"16px"}},{default:n(()=>[t(h,{flex:"auto"},{default:n(()=>[t(I,{model:a.formState,layout:"inline",class:"search-form"},{default:n(()=>[t(_,{gutter:16},{default:n(()=>[t(h,{span:24},{default:n(()=>[t(p,{size:"large"},{default:n(()=>[t(u,{label:"姓名"},{default:n(()=>[t(i,{modelValue:a.formState.username,"onUpdate:modelValue":l[0]||(l[0]=s=>a.formState.username=s),placeholder:"请输入姓名",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),t(u,{label:"手机号"},{default:n(()=>[t(i,{modelValue:a.formState.phone,"onUpdate:modelValue":l[1]||(l[1]=s=>a.formState.phone=s),placeholder:"请输入手机号",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),t(u,{label:"身份证号"},{default:n(()=>[t(i,{modelValue:a.formState.idCard,"onUpdate:modelValue":l[2]||(l[2]=s=>a.formState.idCard=s),placeholder:"请输入身份证号",style:{width:"220px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(_,{gutter:16,style:{"margin-top":"8px"}},{default:n(()=>[t(h,{span:24},{default:n(()=>[t(p,{size:"large"},{default:n(()=>[t(u,{label:"添加时间"},{default:n(()=>[t(g,{modelValue:a.formState.addTimeRange,"onUpdate:modelValue":l[3]||(l[3]=s=>a.formState.addTimeRange=s),style:{width:"220px"},placeholder:["开始日期","结束日期"]},null,8,["modelValue"])]),_:1}),t(u,{label:"禁用时间"},{default:n(()=>[t(g,{modelValue:a.formState.banTimeRange,"onUpdate:modelValue":l[4]||(l[4]=s=>a.formState.banTimeRange=s),style:{width:"220px"},placeholder:["开始日期","结束日期"]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(h,null,{default:n(()=>[t(p,null,{default:n(()=>[t(m,{type:"primary",onClick:d.handleSearch},{default:n(()=>[b("查询")]),_:1},8,["onClick"]),t(m,{onClick:d.handleReset},{default:n(()=>[b("重置")]),_:1},8,["onClick"]),w(t(m,{type:"primary",onClick:d.handleCreate},{icon:n(()=>[t(D)]),default:n(()=>[b(" 新建 ")]),_:1},8,["onClick"]),[[y,a.activeTab==="blacklist"]]),w(t(m,{type:"outline",onClick:d.handleImport},{icon:n(()=>[t(v)]),default:n(()=>[b(" 批量导入 ")]),_:1},8,["onClick"]),[[y,a.activeTab==="blacklist"]])]),_:1})]),_:1})]),_:1}),t(z,{type:"card",class:"blacklist-tabs",activeKey:a.activeTab,"onUpdate:activeKey":l[5]||(l[5]=s=>a.activeTab=s)},{default:n(()=>[t(C,{key:"blacklist",title:"黑名单库"},{default:n(()=>[t(T,{columns:a.blacklistColumns,data:a.blacklistData,pagination:{pageSize:10},scroll:{x:"100%",y:"400px"},bordered:{wrapper:!0,cell:!0},"row-key":"idCard",class:"blacklist-table",onScrollPassive:d.handleTableScroll},{operations:n(({record:s})=>[t(p,null,{default:n(()=>[t(R,{content:"解禁用户",mini:""},{default:n(()=>[t(m,{type:"outline",status:"warning",size:"small",onClick:$=>d.handleUnban(s)},{icon:n(()=>[t(V)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["columns","data","onScrollPassive"])]),_:1}),t(C,{key:"unbanned",title:"解禁名单库"},{default:n(()=>[t(T,{columns:a.unbannedColumns,data:a.unbannedData,scroll:{x:"100%",y:"400px"},bordered:{wrapper:!0,cell:!0},pagination:{pageSize:10},onScrollPassive:d.handleTableScroll},null,8,["columns","data","onScrollPassive"])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1})]),_:1})}const te=W(Y,[["render",Z],["__scopeId","data-v-593cc25e"]]);export{te as default};
