import{B as de,r as v,p as O,b as ne,c as oe,h as P,f as e,w as a,e as s,s as ue,v as ie,o as re,j as l,i as se,x as pe,t as A,M as h,_ as ce}from"./index-CsgcdrY7.js";const fe=w=>(ue("data-v-0b55b86a"),w=w(),ie(),w),me={class:"external-data-management"},_e={class:"page-header"},ve=fe(()=>P("h2",null,"外部数据管理",-1)),ge={class:"search-section"},Ve=de({__name:"index",setup(w){const y=v(!1),S=v(""),I=v(""),q=v(""),f=v(!1),u=v(null),x=v(),N=[{title:"数源名称",dataIndex:"name",slotName:"name",width:180},{title:"数源种类",dataIndex:"dataCategory",width:120},{title:"接口类型",dataIndex:"interfaceType",width:120},{title:"接口标签",dataIndex:"interfaceTag",width:100},{title:"落库表名",dataIndex:"targetTable",width:150},{title:"供应商",dataIndex:"provider",width:120},{title:"单价（元/条）",dataIndex:"unitPrice",width:120},{title:"负责人",dataIndex:"owner",width:100},{title:"状态",dataIndex:"status",slotName:"status",width:100},{title:"最后更新",dataIndex:"updateTime",width:160},{title:"操作",slotName:"actions",width:220,fixed:"right"}],R=v([{id:1,name:"央行征信数据",dataCategory:"征信数据",interfaceType:"REST API",interfaceTag:"主接口",targetTable:"credit_data",provider:"人民银行征信中心",unitPrice:2.5,owner:"张三",description:"个人征信报告、企业征信信息等",dataManager:"李管理",updateFrequency:"实时",dataManagementDescription:"通过API实时获取征信数据，确保数据时效性",status:"active",updateTime:"2024-01-15 10:30:00"},{id:2,name:"风控评分模型",dataCategory:"风控数据",interfaceType:"数据库直连",interfaceTag:"主接口",targetTable:"risk_score",provider:"同盾科技",unitPrice:1.2,owner:"李四",description:"客户风险评分、反欺诈模型结果",dataManager:"王管理",updateFrequency:"日更新",dataManagementDescription:"每日凌晨2点通过数据库直连更新风控评分",status:"active",updateTime:"2024-01-14 16:45:00"},{id:3,name:"运营商数据",dataCategory:"运营商数据",interfaceType:"SFTP",interfaceTag:"备接口",targetTable:"telecom_data",provider:"中国移动",unitPrice:.92,owner:"王五",description:"用户通话记录、流量使用、位置信息等",dataManager:"赵管理",updateFrequency:"每周",dataManagementDescription:"每周一上午通过SFTP传输文件",status:"draft",updateTime:"2024-01-10 14:20:00"}]),T=O({current:1,pageSize:10,total:3,showTotal:!0,showPageSize:!0}),d=O({name:"",dataCategory:"",interfaceType:"",interfaceTag:"",targetTable:"",provider:"",unitPrice:0,owner:"",description:"",dataManager:"",updateFrequency:"",dataManagementDescription:""}),$={name:[{required:!0,message:"请输入数源名称"}],dataCategory:[{required:!0,message:"请选择数源种类"}],interfaceType:[{required:!0,message:"请选择接口类型"}],interfaceTag:[{required:!0,message:"请选择接口标签"}],targetTable:[{required:!0,message:"请输入落库表名"}],provider:[{required:!0,message:"请输入供应商名称"}],unitPrice:[{required:!0,message:"请输入单价"},{type:"number",min:0,message:"单价不能小于0"}],owner:[{required:!0,message:"请输入负责人"}],description:[{required:!0,message:"请输入描述信息"}]},M=()=>{y.value=!0,setTimeout(()=>{y.value=!1},500)},j=o=>{T.current=o},B=o=>{T.pageSize=o,T.current=1},K=o=>({active:"green",inactive:"orange",draft:"gray"})[o]||"gray",G=o=>({active:"启用",inactive:"停用",draft:"草稿"})[o]||"未知",H=o=>{u.value={...o,isViewMode:!0},Object.assign(d,o),f.value=!0},J=o=>{u.value=o,Object.assign(d,o),f.value=!0},L=o=>{const t={...o};t.name=`${o.name}_副本`,delete t.id,u.value=null,Object.assign(d,t),f.value=!0,h.success("已复制数源，请修改相关信息")},Q=o=>{console.log("删除外数:",o),h.success("删除成功")},W=async()=>{var o,t;if((o=u.value)!=null&&o.isViewMode){f.value=!1,C();return}try{await((t=x.value)==null?void 0:t.validate())&&(console.log("提交表单:",d),h.success(u.value?"编辑成功":"注册成功"),f.value=!1,C())}catch(m){console.error("表单验证失败:",m)}},C=()=>{var o;u.value=null,Object.assign(d,{name:"",dataCategory:"",interfaceType:"",interfaceTag:"",targetTable:"",provider:"",unitPrice:0,owner:"",description:"",dataManager:"",updateFrequency:"",dataManagementDescription:""}),(o=x.value)==null||o.resetFields()};return ne(()=>{}),(o,t)=>{var F,U,E,z;const m=s("a-button"),X=s("a-input-search"),p=s("a-col"),n=s("a-option"),g=s("a-select"),_=s("a-row"),Y=s("a-tag"),Z=s("a-space"),ee=s("a-table"),D=s("a-divider"),b=s("a-input"),c=s("a-form-item"),ae=s("a-input-number"),k=s("a-textarea"),te=s("a-form"),le=s("a-modal");return re(),oe("div",me,[P("div",_e,[ve,e(m,{type:"primary",onClick:t[0]||(t[0]=r=>f.value=!0)},{icon:a(()=>[e(se(pe))]),default:a(()=>[l(" 注册外部数据 ")]),_:1})]),P("div",ge,[e(_,{gutter:16},{default:a(()=>[e(p,{span:8},{default:a(()=>[e(X,{modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=r=>S.value=r),placeholder:"搜索数源名称、供应商",onSearch:M},null,8,["modelValue"])]),_:1}),e(p,{span:4},{default:a(()=>[e(g,{modelValue:I.value,"onUpdate:modelValue":t[2]||(t[2]=r=>I.value=r),placeholder:"数源种类","allow-clear":"",onChange:M},{default:a(()=>[e(n,{value:"征信数据"},{default:a(()=>[l("征信数据")]),_:1}),e(n,{value:"风控数据"},{default:a(()=>[l("风控数据")]),_:1}),e(n,{value:"运营商数据"},{default:a(()=>[l("运营商数据")]),_:1}),e(n,{value:"政务数据"},{default:a(()=>[l("政务数据")]),_:1}),e(n,{value:"金融数据"},{default:a(()=>[l("金融数据")]),_:1}),e(n,{value:"其他"},{default:a(()=>[l("其他")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{span:4},{default:a(()=>[e(g,{modelValue:q.value,"onUpdate:modelValue":t[3]||(t[3]=r=>q.value=r),placeholder:"状态","allow-clear":"",onChange:M},{default:a(()=>[e(n,{value:"active"},{default:a(()=>[l("启用")]),_:1}),e(n,{value:"inactive"},{default:a(()=>[l("停用")]),_:1}),e(n,{value:"draft"},{default:a(()=>[l("草稿")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),e(ee,{columns:N,data:R.value,loading:y.value,pagination:T,onPageChange:j,onPageSizeChange:B},{name:a(({record:r})=>[e(m,{type:"text",onClick:V=>H(r)},{default:a(()=>[l(A(r.name),1)]),_:2},1032,["onClick"])]),status:a(({record:r})=>[e(Y,{color:K(r.status)},{default:a(()=>[l(A(G(r.status)),1)]),_:2},1032,["color"])]),actions:a(({record:r})=>[e(Z,null,{default:a(()=>[e(m,{type:"text",size:"small",onClick:V=>J(r)},{default:a(()=>[l(" 编辑 ")]),_:2},1032,["onClick"]),e(m,{type:"text",size:"small",onClick:V=>L(r)},{default:a(()=>[l(" 复制 ")]),_:2},1032,["onClick"]),e(m,{type:"text",size:"small",status:"danger",onClick:V=>Q(r)},{default:a(()=>[l(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","loading","pagination"]),e(le,{visible:f.value,"onUpdate:visible":t[16]||(t[16]=r=>f.value=r),title:(F=u.value)!=null&&F.isViewMode?"数源详情":u.value?"编辑数源":"注册外部数据",width:"1000px",onOk:W,onCancel:C,"ok-text":(U=u.value)!=null&&U.isViewMode?"关闭":"确定","cancel-text":(E=u.value)!=null&&E.isViewMode?"":"取消","hide-cancel":(z=u.value)==null?void 0:z.isViewMode},{default:a(()=>{var r,V;return[e(te,{ref_key:"formRef",ref:x,model:d,rules:(r=u.value)!=null&&r.isViewMode?{}:$,layout:"vertical",disabled:(V=u.value)==null?void 0:V.isViewMode},{default:a(()=>[e(D,{orientation:"left"},{default:a(()=>[l("基本信息")]),_:1}),e(_,{gutter:16},{default:a(()=>[e(p,{span:12},{default:a(()=>[e(c,{label:"数源名称",field:"name"},{default:a(()=>[e(b,{modelValue:d.name,"onUpdate:modelValue":t[4]||(t[4]=i=>d.name=i),placeholder:"请输入数源名称",disabled:u.value&&!u.value.isViewMode},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(p,{span:12},{default:a(()=>[e(c,{label:"数源种类",field:"dataCategory"},{default:a(()=>[e(g,{modelValue:d.dataCategory,"onUpdate:modelValue":t[5]||(t[5]=i=>d.dataCategory=i),placeholder:"请选择数源种类",disabled:u.value&&!u.value.isViewMode},{default:a(()=>[e(n,{value:"征信数据"},{default:a(()=>[l("征信数据")]),_:1}),e(n,{value:"风控数据"},{default:a(()=>[l("风控数据")]),_:1}),e(n,{value:"运营商数据"},{default:a(()=>[l("运营商数据")]),_:1}),e(n,{value:"政务数据"},{default:a(()=>[l("政务数据")]),_:1}),e(n,{value:"金融数据"},{default:a(()=>[l("金融数据")]),_:1}),e(n,{value:"其他"},{default:a(()=>[l("其他")]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(p,{span:8},{default:a(()=>[e(c,{label:"接口类型",field:"interfaceType"},{default:a(()=>[e(g,{modelValue:d.interfaceType,"onUpdate:modelValue":t[6]||(t[6]=i=>d.interfaceType=i),placeholder:"请选择接口类型",disabled:u.value&&!u.value.isViewMode},{default:a(()=>[e(n,{value:"REST API"},{default:a(()=>[l("REST API")]),_:1}),e(n,{value:"SOAP"},{default:a(()=>[l("SOAP")]),_:1}),e(n,{value:"FTP"},{default:a(()=>[l("FTP")]),_:1}),e(n,{value:"SFTP"},{default:a(()=>[l("SFTP")]),_:1}),e(n,{value:"数据库直连"},{default:a(()=>[l("数据库直连")]),_:1}),e(n,{value:"文件传输"},{default:a(()=>[l("文件传输")]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(p,{span:8},{default:a(()=>[e(c,{label:"接口标签",field:"interfaceTag"},{default:a(()=>[e(g,{modelValue:d.interfaceTag,"onUpdate:modelValue":t[7]||(t[7]=i=>d.interfaceTag=i),placeholder:"请选择接口标签"},{default:a(()=>[e(n,{value:"主接口"},{default:a(()=>[l("主接口")]),_:1}),e(n,{value:"备接口"},{default:a(()=>[l("备接口")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(p,{span:8},{default:a(()=>[e(c,{label:"供应商",field:"provider"},{default:a(()=>[e(b,{modelValue:d.provider,"onUpdate:modelValue":t[8]||(t[8]=i=>d.provider=i),placeholder:"请输入供应商名称",disabled:u.value&&!u.value.isViewMode},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(p,{span:8},{default:a(()=>[e(c,{label:"负责人",field:"owner"},{default:a(()=>[e(b,{modelValue:d.owner,"onUpdate:modelValue":t[9]||(t[9]=i=>d.owner=i),placeholder:"请输入负责人",disabled:u.value&&!u.value.isViewMode},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(p,{span:12},{default:a(()=>[e(c,{label:"落库表名",field:"targetTable"},{default:a(()=>[e(b,{modelValue:d.targetTable,"onUpdate:modelValue":t[10]||(t[10]=i=>d.targetTable=i),placeholder:"请输入落库表名"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:a(()=>[e(c,{label:"单价（元/条）",field:"unitPrice"},{default:a(()=>[e(ae,{modelValue:d.unitPrice,"onUpdate:modelValue":t[11]||(t[11]=i=>d.unitPrice=i),placeholder:"请输入单价",precision:4,min:0,max:9999.9999,style:{width:"100%"}},{suffix:a(()=>[l("元/条")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(p,{span:24},{default:a(()=>[e(c,{label:"描述信息",field:"description"},{default:a(()=>[e(k,{modelValue:d.description,"onUpdate:modelValue":t[12]||(t[12]=i=>d.description=i),placeholder:"请输入描述信息",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(D,{orientation:"left"},{default:a(()=>[l("数据管理")]),_:1}),e(_,{gutter:16},{default:a(()=>[e(p,{span:12},{default:a(()=>[e(c,{label:"数据管理员",field:"dataManager"},{default:a(()=>[e(b,{modelValue:d.dataManager,"onUpdate:modelValue":t[13]||(t[13]=i=>d.dataManager=i),placeholder:"请输入数据管理员"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:a(()=>[e(c,{label:"数据更新频率",field:"updateFrequency"},{default:a(()=>[e(g,{modelValue:d.updateFrequency,"onUpdate:modelValue":t[14]||(t[14]=i=>d.updateFrequency=i),placeholder:"选择更新频率"},{default:a(()=>[e(n,{value:"实时"},{default:a(()=>[l("实时")]),_:1}),e(n,{value:"日更新"},{default:a(()=>[l("日更新")]),_:1}),e(n,{value:"离线T+1"},{default:a(()=>[l("离线T+1")]),_:1}),e(n,{value:"每周"},{default:a(()=>[l("每周")]),_:1}),e(n,{value:"每月"},{default:a(()=>[l("每月")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:16},{default:a(()=>[e(p,{span:24},{default:a(()=>[e(c,{label:"数据管理说明"},{default:a(()=>[e(k,{modelValue:d.dataManagementDescription,"onUpdate:modelValue":t[15]||(t[15]=i=>d.dataManagementDescription=i),placeholder:"请输入数据管理相关说明",rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","disabled"])]}),_:1},8,["visible","title","ok-text","cancel-text","hide-cancel"])])}}}),we=ce(Ve,[["__scopeId","data-v-0b55b86a"]]);export{we as default};
